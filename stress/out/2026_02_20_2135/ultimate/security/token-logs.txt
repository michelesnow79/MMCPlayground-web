C:\Users\Michele\MMCPlayground\missmeconnection\dist\assets\index-8dqtjp19.js:34:</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Ei(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ei())}function mN(){const i=W_()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gN(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function xV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CV(){const i=Ei();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function _N(){return!mN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yN(){return!mN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function yb(){try{return typeof indexedDB=="object"}catch{return!1}}function vN(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}function AV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const IV="FirebaseError";class sa extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=IV,Object.setPrototypeOf(this,sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?NV(a,n):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new sa(r,d,n)}}function NV(i,e){return i.replace(DV,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const DV=/\{\$([^}]+)}/g;function RV(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Mo(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const a=i[r],c=e[r];if(TC(a)&&TC(c)){if(!Mo(a,c))return!1}else if(a!==c)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function TC(i){return i!==null&&typeof i=="object"}function Rp(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function jf(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,a]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Vf(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function PV(i,e){const t=new OV(i,e);return t.subscribe.bind(t)}class OV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");MV(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=Mw),r.error===void 0&&(r.error=Mw),r.complete===void 0&&(r.complete=Mw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MV(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Mw(){}const kV=1e3,LV=2,jV=14400*1e3,VV=.5;function SC(i,e=kV,t=LV){const n=e*Math.pow(t,i),r=Math.round(VV*n*(Math.random()-.5)*2);return Math.min(jV,n+r)}function zn(i){return i&&i._delegate?i._delegate:i}class na{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Kc="[DEFAULT]";class UV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new vV;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zV(e))try{this.getOrInitializeService({instanceIdentifier:Kc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});n.resolve(a)}catch{}}}}clearInstance(e=Kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kc){return this.instances.has(e)}getOptions(e=Kc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);n===d&&c.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const a=this.instances.get(n);return a&&e(a,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BV(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Kc){return this.component?this.component.multipleInstances?e:Kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BV(i){return i===Kc?void 0:i}function zV(i){return i.instantiationMode==="EAGER"}class FV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var jt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(jt||(jt={}));const HV={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},qV=jt.INFO,YV={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},GV=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=YV[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class K_{constructor(e){this.name=e,this._logLevel=qV,this._logHandler=GV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...e),this._logHandler(this,jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...e),this._logHandler(this,jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jt.INFO,...e),this._logHandler(this,jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jt.WARN,...e),this._logHandler(this,jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...e),this._logHandler(this,jt.ERROR,...e)}}const WV=(i,e)=>e.some(t=>i instanceof t);let xC,CC;function KV(){return xC||(xC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZV(){return CC||(CC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wN=new WeakMap,v0=new WeakMap,bN=new WeakMap,kw=new WeakMap,vb=new WeakMap;function $V(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",a),i.removeEventListener("error",c)},a=()=>{t(Wl(i.result)),r()},c=()=>{n(i.error),r()};i.addEventListener("success",a),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&wN.set(t,i)}).catch(()=>{}),vb.set(e,i),e}function QV(i){if(v0.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",c),i.removeEventListener("abort",c)},a=()=>{t(),r()},c=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",a),i.addEventListener("error",c),i.addEventListener("abort",c)});v0.set(i,e)}let w0={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return v0.get(i);if(e==="objectStoreNames")return i.objectStoreNames||bN.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wl(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function XV(i){w0=i(w0)}function JV(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(Lw(this),e,...t);return bN.set(n,e.sort?e.sort():[e]),Wl(n)}:ZV().includes(i)?function(...e){return i.apply(Lw(this),e),Wl(wN.get(this))}:function(...e){return Wl(i.apply(Lw(this),e))}}function e3(i){return typeof i=="function"?JV(i):(i instanceof IDBTransaction&&QV(i),WV(i,KV())?new Proxy(i,w0):i)}function Wl(i){if(i instanceof IDBRequest)return $V(i);if(kw.has(i))return kw.get(i);const e=e3(i);return e!==i&&(kw.set(i,e),vb.set(e,i)),e}const Lw=i=>vb.get(i);function EN(i,e,{blocked:t,upgrade:n,blocking:r,terminated:a}={}){const c=indexedDB.open(i,e),d=Wl(c);return n&&c.addEventListener("upgradeneeded",p=>{n(Wl(c.result),p.oldVersion,p.newVersion,Wl(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const t3=["get","getKey","getAll","getAllKeys","count"],n3=["put","add","delete","clear"],jw=new Map;function AC(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(jw.get(e))return jw.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=n3.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||t3.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,r?"readwrite":"readonly");let m=p.store;return n&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),r&&p.done]))[0]};return jw.set(e,a),a}XV(i=>({...i,get:(e,t,n)=>AC(e,t)||i.get(e,t,n),has:(e,t)=>!!AC(e,t)||i.has(e,t)}));class i3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r3(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function r3(i){return i.getComponent()?.type==="VERSION"}const b0="@firebase/app",IC="0.14.8";const ko=new K_("@firebase/app"),s3="@firebase/app-compat",a3="@firebase/analytics-compat",o3="@firebase/analytics",l3="@firebase/app-check-compat",c3="@firebase/app-check",u3="@firebase/auth",d3="@firebase/auth-compat",h3="@firebase/database",f3="@firebase/data-connect",p3="@firebase/database-compat",m3="@firebase/functions",g3="@firebase/functions-compat",_3="@firebase/installations",y3="@firebase/installations-compat",v3="@firebase/messaging",w3="@firebase/messaging-compat",b3="@firebase/performance",E3="@firebase/performance-compat",T3="@firebase/remote-config",S3="@firebase/remote-config-compat",x3="@firebase/storage",C3="@firebase/storage-compat",A3="@firebase/firestore",I3="@firebase/ai",N3="@firebase/firestore-compat",D3="firebase",R3="12.9.0";const E0="[DEFAULT]",P3={[b0]:"fire-core",[s3]:"fire-core-compat",[o3]:"fire-analytics",[a3]:"fire-analytics-compat",[c3]:"fire-app-check",[l3]:"fire-app-check-compat",[u3]:"fire-auth",[d3]:"fire-auth-compat",[h3]:"fire-rtdb",[f3]:"fire-data-connect",[p3]:"fire-rtdb-compat",[m3]:"fire-fn",[g3]:"fire-fn-compat",[_3]:"fire-iid",[y3]:"fire-iid-compat",[v3]:"fire-fcm",[w3]:"fire-fcm-compat",[b3]:"fire-perf",[E3]:"fire-perf-compat",[T3]:"fire-rc",[S3]:"fire-rc-compat",[x3]:"fire-gcs",[C3]:"fire-gcs-compat",[A3]:"fire-fst",[N3]:"fire-fst-compat",[I3]:"fire-vertex","fire-js":"fire-js",[D3]:"fire-js-all"};const Xg=new Map,O3=new Map,T0=new Map;function NC(i,e){try{i.container.addComponent(e)}catch(t){ko.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function za(i){const e=i.name;if(T0.has(e))return ko.debug(`There were multiple attempts to register component ${e}.`),!1;T0.set(e,i);for(const t of Xg.values())NC(t,i);for(const t of O3.values())NC(t,i);return!0}function Mu(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Rs(i){return i==null?!1:i.settings!==void 0}const M3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kl=new Ou("app","Firebase",M3);class k3{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kl.create("app-deleted",{appName:this._name})}}const bh=R3;function TN(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:E0,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw Kl.create("bad-app-name",{appName:String(r)});if(t||(t=dN()),!t)throw Kl.create("no-options");const a=Xg.get(r);if(a){if(Mo(t,a.options)&&Mo(n,a.config))return a;throw Kl.create("duplicate-app",{appName:r})}const c=new FV(r);for(const p of T0.values())c.addComponent(p);const d=new k3(t,n,c);return Xg.set(r,d),d}function wb(i=E0){const e=Xg.get(i);if(!e&&i===E0&&dN())return TN();if(!e)throw Kl.create("no-app",{appName:i});return e}function Ps(i,e,t){let n=P3[i]??i;t&&(n+=`-${t}`);const r=n.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const c=[`Unable to register library "${n}" with version "${e}":`];r&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ko.warn(c.join(" "));return}za(new na(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const L3="firebase-heartbeat-database",j3=1,ap="firebase-heartbeat-store";let Vw=null;function SN(){return Vw||(Vw=EN(L3,j3,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ap)}catch(t){console.warn(t)}}}}).catch(i=>{throw Kl.create("idb-open",{originalErrorMessage:i.message})})),Vw}async function V3(i){try{const t=(await SN()).transaction(ap),n=await t.objectStore(ap).get(xN(i));return await t.done,n}catch(e){if(e instanceof sa)ko.warn(e.message);else{const t=Kl.create("idb-get",{originalErrorMessage:e?.message});ko.warn(t.message)}}}async function DC(i,e){try{const n=(await SN()).transaction(ap,"readwrite");await n.objectStore(ap).put(e,xN(i)),await n.done}catch(t){if(t instanceof sa)ko.warn(t.message);else{const n=Kl.create("idb-set",{originalErrorMessage:t?.message});ko.warn(n.message)}}}function xN(i){return`${i.name}!${i.options.appId}`}const U3=1024,B3=30;class z3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new H3(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=RC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>B3){const r=q3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ko.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=RC(),{heartbeatsToSend:t,unsentEntries:n}=F3(this._heartbeatsCache.heartbeats),r=Qg(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ko.warn(e),""}}}function RC(){return new Date().toISOString().substring(0,10)}function F3(i,e=U3){const t=[];let n=i.slice();for(const r of i){const a=t.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),PC(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),PC(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class H3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yb()?vN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await V3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return DC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return DC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function PC(i){return Qg(JSON.stringify({version:2,heartbeats:i})).length}function q3(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}function Y3(i){za(new na("platform-logger",e=>new i3(e),"PRIVATE")),za(new na("heartbeat",e=>new z3(e),"PRIVATE")),Ps(b0,IC,i),Ps(b0,IC,"esm2020"),Ps("fire-js","")}Y3("");function CN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G3=CN,AN=new Ou("auth","Firebase",CN());const Jg=new K_("@firebase/auth");function W3(i,...e){Jg.logLevel<=jt.WARN&&Jg.warn(`Auth (${bh}): ${i}`,...e)}function Cg(i,...e){Jg.logLevel<=jt.ERROR&&Jg.error(`Auth (${bh}): ${i}`,...e)}function ia(i,...e){throw bb(i,...e)}function ka(i,...e){return bb(i,...e)}function IN(i,e,t){const n={...G3(),[e]:t};return new Ou("auth","Firebase",n).create(e,{appName:i.name})}function No(i){return IN(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bb(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return AN.create(i,...e)}function dt(i,e,...t){if(!i)throw bb(e,...t)}function To(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Cg(e),new Error(e)}function Lo(i,e){i||To(e)}function S0(){return typeof self<"u"&&self.location?.href||""}function K3(){return OC()==="http:"||OC()==="https:"}function OC(){return typeof self<"u"&&self.location?.protocol||null}function Z3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K3()||gN()||"connection"in navigator)?navigator.onLine:!0}function $3(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Pp{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lo(t>e,"Short delay should be less than long delay!"),this.isMobile=TV()||xV()}get(){return Z3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Eb(i,e){Lo(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class NN{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Q3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const X3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J3=new Pp(3e4,6e4);function zo(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Fo(i,e,t,n,r={}){return DN(i,r,async()=>{let a={},c={};n&&(e==="GET"?c=n:a={body:JSON.stringify(n)});const d=Rp({key:i.config.apiKey,...c}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const m={method:e,headers:p,...a};return SV()||(m.referrerPolicy="no-referrer"),i.emulatorConfig&&wh(i.emulatorConfig.host)&&(m.credentials="include"),NN.fetch()(await RN(i,i.config.apiHost,t,d),m)})}async function DN(i,e,t){i._canInitEmulator=!1;const n={...Q3,...e};try{const r=new t4(i),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw og(i,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw og(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw og(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw og(i,"user-disabled",c);const w=n[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw IN(i,w,m);ia(i,w)}}catch(r){if(r instanceof sa)throw r;ia(i,"network-request-failed",{message:String(r)})}}async function Op(i,e,t,n,r={}){const a=await Fo(i,e,t,n,r);return"mfaPendingCredential"in a&&ia(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function RN(i,e,t,n){const r=`${e}${t}?${n}`,a=i,c=a.config.emulator?Eb(i.config,r):`${i.config.apiScheme}://${r}`;return X3.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function e4(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class t4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ka(this.auth,"network-request-failed")),J3.get())})}}function og(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=ka(i,e,n);return r.customData._tokenResponse=t,r}function MC(i){return i!==void 0&&i.enterprise!==void 0}class n4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return e4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function i4(i,e){return Fo(i,"GET","/v2/recaptchaConfig",zo(i,e))}async function r4(i,e){return Fo(i,"POST","/v1/accounts:delete",e)}async function e_(i,e){return Fo(i,"POST","/v1/accounts:lookup",e)}function Kf(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s4(i,e=!1){const t=zn(i),n=await t.getIdToken(e),r=Tb(n);dt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a?.sign_in_provider;return{claims:r,token:n,authTime:Kf(Uw(r.auth_time)),issuedAtTime:Kf(Uw(r.iat)),expirationTime:Kf(Uw(r.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Uw(i){return Number(i)*1e3}function Tb(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Cg("JWT malformed, contained fewer than 3 sections"),null;try{const r=lN(t);return r?JSON.parse(r):(Cg("Failed to decode base64 JWT payload"),null)}catch(r){return Cg("Caught error parsing JWT payload as JSON",r?.toString()),null}}function kC(i){const e=Tb(i);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function op(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof sa&&a4(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function a4({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class o4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class x0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kf(this.lastLoginAt),this.creationTime=Kf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function t_(i){const e=i.auth,t=await i.getIdToken(),n=await op(i,e_(e,{idToken:t}));dt(n?.users.length,e,"internal-error");const r=n.users[0];i._notifyReloadListener(r);const a=r.providerUserInfo?.length?PN(r.providerUserInfo):[],c=c4(i.providerData,a),d=i.isAnonymous,p=!(i.email&&r.passwordHash)&&!c?.length,m=d?p:!1,w={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new x0(r.createdAt,r.lastLoginAt),isAnonymous:m};Object.assign(i,w)}async function l4(i){const e=zn(i);await t_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c4(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function PN(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function u4(i,e){const t=await DN(i,{},async()=>{const n=Rp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=i.config,c=await RN(i,r,"/v1/token",`key=${a}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:n};return i.emulatorConfig&&wh(i.emulatorConfig.host)&&(p.credentials="include"),NN.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function d4(i,e){return Fo(i,"POST","/v2/accounts:revokeToken",zo(i,e))}class jd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const t=kC(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:a}=await u4(e,t);this.updateTokensAndExpiration(n,r,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,c=new jd;return n&&(dt(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),r&&(dt(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(dt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jd,this.toJSON())}_performRefresh(){return To("not implemented")}}function Rl(i,e){dt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new o4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new x0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await op(this,this.stsTokenManager.getToken(this.auth,e));return dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return s4(this,e)}reload(){return l4(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await t_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject(No(this.auth));const e=await this.getIdToken();return await op(this,r4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:C,providerData:N,stsTokenManager:O}=t;dt(b&&O,e,"internal-error");const R=jd.fromJSON(this.name,O);dt(typeof b=="string",e,"internal-error"),Rl(n,e.name),Rl(r,e.name),dt(typeof S=="boolean",e,"internal-error"),dt(typeof C=="boolean",e,"internal-error"),Rl(a,e.name),Rl(c,e.name),Rl(d,e.name),Rl(p,e.name),Rl(m,e.name),Rl(w,e.name);const k=new Xs({uid:b,auth:e,email:r,emailVerified:S,displayName:n,isAnonymous:C,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:R,createdAt:m,lastLoginAt:w});return N&&Array.isArray(N)&&(k.providerData=N.map(G=>({...G}))),p&&(k._redirectEventId=p),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new jd;r.updateFromServerResponse(t);const a=new Xs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await t_(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];dt(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?PN(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!a?.length,d=new jd;d.updateFromIdToken(n);const p=new Xs({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new x0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(p,m),p}}const LC=new Map;function So(i){Lo(i instanceof Function,"Expected a class definition");let e=LC.get(i);return e?(Lo(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,LC.set(i,e),e)}class ON{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ON.type="NONE";const jC=ON;function Ag(i,e,t){return`firebase:${i}:${e}:${t}`}class Vd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=Ag(this.userKey,r.apiKey,a),this.fullPersistenceKey=Ag("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await e_(this.auth,{idToken:e}).catch(()=>{});return t?Xs._fromGetAccountInfoResponse(this.auth,t,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Vd(So(jC),e,n);const r=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=r[0]||So(jC);const c=Ag(n,e.config.apiKey,e.name);let d=null;for(const m of t)try{const w=await m._get(c);if(w){let b;if(typeof w=="string"){const S=await e_(e,{idToken:w}).catch(()=>{});if(!S)break;b=await Xs._fromGetAccountInfoResponse(e,S,w)}else b=Xs._fromJSON(e,w);m!==a&&(d=b),a=m;break}}catch{}const p=r.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Vd(a,e,n):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Vd(a,e,n))}}function VC(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UN(e))return"Blackberry";if(BN(e))return"Webos";if(kN(e))return"Safari";if((e.includes("chrome/")||LN(e))&&!e.includes("edge/"))return"Chrome";if(VN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function MN(i=Ei()){return/firefox\//i.test(i)}function kN(i=Ei()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LN(i=Ei()){return/crios\//i.test(i)}function jN(i=Ei()){return/iemobile/i.test(i)}function VN(i=Ei()){return/android/i.test(i)}function UN(i=Ei()){return/blackberry/i.test(i)}function BN(i=Ei()){return/webos/i.test(i)}function Sb(i=Ei()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function h4(i=Ei()){return Sb(i)&&!!window.navigator?.standalone}function f4(){return CV()&&document.documentMode===10}function zN(i=Ei()){return Sb(i)||VN(i)||BN(i)||UN(i)||/windows phone/i.test(i)||jN(i)}function FN(i,e=[]){let t;switch(i){case"Browser":t=VC(Ei());break;case"Worker":t=`${VC(Ei())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bh}/${n}`}class p4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function m4(i,e={}){return Fo(i,"GET","/v2/passwordPolicy",zo(i,e))}const g4=6;class _4{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??g4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class y4{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UC(this),this.idTokenSubscription=new UC(this),this.beforeStateQueue=new p4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=So(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await e_(this,{idToken:e}),n=await Xs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rs(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=n?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(n=d.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await t_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject(No(this));const t=e?zn(e):null;return t&&dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject(No(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject(No(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(So(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await m4(this),t=new _4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await d4(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&So(e)||this._popupRedirectResolver;dt(t,this,"argument-error"),this.redirectPersistenceManager=await Vd.create(this,[So(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,n,r);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&W3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function uc(i){return zn(i)}class UC{constructor(e){this.auth=e,this.observer=null,this.addObserver=PV(t=>this.observer=t)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Z_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v4(i){Z_=i}function HN(i){return Z_.loadJS(i)}function w4(){return Z_.recaptchaEnterpriseScript}function b4(){return Z_.gapiScript}function E4(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class T4{constructor(){this.enterprise=new S4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class S4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const x4="recaptcha-enterprise",qN="NO_RECAPTCHA";class C4{constructor(e){this.type=x4,this.auth=uc(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{i4(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new n4(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(p=>{d(p)})})}function r(a,c,d){const p=window.grecaptcha;MC(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(qN)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new T4().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{n(this.auth).then(d=>{if(!t&&MC(window.grecaptcha))r(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=w4();p.length!==0&&(p+=d),HN(p).then(()=>{r(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function BC(i,e,t,n=!1,r=!1){const a=new C4(i);let c;if(r)c=qN;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return n?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function n_(i,e,t,n,r){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await BC(i,e,t,t==="getOobCode");return n(i,a)}else return n(i,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await BC(i,e,t,t==="getOobCode");return n(i,c)}else return Promise.reject(a)})}function YN(i,e){const t=Mu(i,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Mo(a,e??{}))return r;ia(r,"already-initialized")}return t.initialize({options:e})}function A4(i,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(So);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function I4(i,e,t){const n=uc(i);dt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,a=GN(e),{host:c,port:d}=N4(e),p=d===null?"":`:${d}`,m={url:`${a}//${c}${p}/`},w=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){dt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),dt(Mo(m,n.config.emulator)&&Mo(w,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=m,n.emulatorConfig=w,n.settings.appVerificationDisabledForTesting=!0,wh(c)?(fN(`${a}//${c}${p}`),pN("Auth",!0)):D4()}function GN(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function N4(i){const e=GN(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const a=r[1];return{host:a,port:zC(n.substr(a.length+1))}}else{const[a,c]=n.split(":");return{host:a,port:zC(c)}}}function zC(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function D4(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class xb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,t){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}}async function R4(i,e){return Fo(i,"POST","/v1/accounts:signUp",e)}async function P4(i,e){return Op(i,"POST","/v1/accounts:signInWithPassword",zo(i,e))}async function O4(i,e){return Fo(i,"POST","/v1/accounts:sendOobCode",zo(i,e))}async function M4(i,e){return O4(i,e)}async function k4(i,e){return Op(i,"POST","/v1/accounts:signInWithEmailLink",zo(i,e))}async function L4(i,e){return Op(i,"POST","/v1/accounts:signInWithEmailLink",zo(i,e))}class lp extends xb{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new lp(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new lp(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n_(e,t,"signInWithPassword",P4);case"emailLink":return k4(e,{email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n_(e,n,"signUpPassword",R4);case"emailLink":return L4(e,{idToken:t,email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ud(i,e){return Op(i,"POST","/v1/accounts:signInWithIdp",zo(i,e))}const j4="http://localhost";class yu extends xb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ia("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...a}=t;if(!n||!r)return null;const c=new yu(n,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ud(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ud(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ud(e,t)}buildRequest(){const e={requestUri:j4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rp(t)}return e}}function V4(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function U4(i){const e=jf(Vf(i)).link,t=e?jf(Vf(e)).deep_link_id:null,n=jf(Vf(i)).deep_link_id;return(n?jf(Vf(n)).link:null)||n||t||e||i}class Cb{constructor(e){const t=jf(Vf(e)),n=t.apiKey??null,r=t.oobCode??null,a=V4(t.mode??null);dt(n&&r&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=U4(e);try{return new Cb(t)}catch{return null}}}class Eh{constructor(){this.providerId=Eh.PROVIDER_ID}static credential(e,t){return lp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Cb.parseLink(t);return dt(n,"argument-error"),lp._fromEmailAndCode(e,n.code,n.tenantId)}}Eh.PROVIDER_ID="password";Eh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class WN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mp extends WN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vl extends Mp{constructor(){super("facebook.com")}static credential(e){return yu._fromParams({providerId:Vl.PROVIDER_ID,signInMethod:Vl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vl.credentialFromTaggedObject(e)}static credentialFromError(e){return Vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vl.credential(e.oauthAccessToken)}catch{return null}}}Vl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vl.PROVIDER_ID="facebook.com";class Ul extends Mp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yu._fromParams({providerId:Ul.PROVIDER_ID,signInMethod:Ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ul.credentialFromTaggedObject(e)}static credentialFromError(e){return Ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ul.credential(t,n)}catch{return null}}}Ul.GOOGLE_SIGN_IN_METHOD="google.com";Ul.PROVIDER_ID="google.com";class Bl extends Mp{constructor(){super("github.com")}static credential(e){return yu._fromParams({providerId:Bl.PROVIDER_ID,signInMethod:Bl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bl.credentialFromTaggedObject(e)}static credentialFromError(e){return Bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bl.credential(e.oauthAccessToken)}catch{return null}}}Bl.GITHUB_SIGN_IN_METHOD="github.com";Bl.PROVIDER_ID="github.com";class zl extends Mp{constructor(){super("twitter.com")}static credential(e,t){return yu._fromParams({providerId:zl.PROVIDER_ID,signInMethod:zl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zl.credentialFromTaggedObject(e)}static credentialFromError(e){return zl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return zl.credential(t,n)}catch{return null}}}zl.TWITTER_SIGN_IN_METHOD="twitter.com";zl.PROVIDER_ID="twitter.com";async function B4(i,e){return Op(i,"POST","/v1/accounts:signUp",zo(i,e))}class vu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const a=await Xs._fromIdTokenResponse(e,n,r),c=FC(n);return new vu({user:a,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=FC(n);return new vu({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function FC(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class i_ extends sa{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new i_(e,t,n,r)}}function KN(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?i_._fromErrorAndOperation(i,a,e,n):a})}async function z4(i,e,t=!1){const n=await op(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return vu._forOperation(i,"link",n)}async function F4(i,e,t=!1){const{auth:n}=i;if(Rs(n.app))return Promise.reject(No(n));const r="reauthenticate";try{const a=await op(i,KN(n,r,e,i),t);dt(a.idToken,n,"internal-error");const c=Tb(a.idToken);dt(c,n,"internal-error");const{sub:d}=c;return dt(i.uid===d,n,"user-mismatch"),vu._forOperation(i,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&ia(n,"user-mismatch"),a}}async function ZN(i,e,t=!1){if(Rs(i.app))return Promise.reject(No(i));const n="signIn",r=await KN(i,n,e),a=await vu._fromIdTokenResponse(i,n,r);return t||await i._updateCurrentUser(a.user),a}async function H4(i,e){return ZN(uc(i),e)}async function $N(i){const e=uc(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function q4(i,e,t){const n=uc(i);await n_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",M4)}async function Y4(i,e,t){if(Rs(i.app))return Promise.reject(No(i));const n=uc(i),c=await n_(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B4).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&$N(i),p}),d=await vu._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(d.user),d}function G4(i,e,t){return Rs(i.app)?Promise.reject(No(i)):H4(zn(i),Eh.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&$N(i),n})}function W4(i,e,t,n){return zn(i).onIdTokenChanged(e,t,n)}function K4(i,e,t){return zn(i).beforeAuthStateChanged(e,t)}function Z4(i,e,t,n){return zn(i).onAuthStateChanged(e,t,n)}function $4(i){return zn(i).signOut()}const r_="__sak";class QN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(r_,"1"),this.storage.removeItem(r_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Q4=1e3,X4=10;class XN extends QN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},a=this.storage.getItem(n);f4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,X4):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Q4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XN.type="LOCAL";const JN=XN;class eD extends QN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eD.type="SESSION";const tD=eD;function J4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class $_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new $_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,c=this.handlersMap[r];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const d=Array.from(c).map(async m=>m(t.origin,a)),p=await J4(d);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$_.receivers=[];function Ab(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}class eU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const m=Ab("",20);r.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},n);c={messageChannel:r,onMessage(b){const S=b;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(w),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(w),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function La(){return window}function tU(i){La().location.href=i}function nD(){return typeof La().WorkerGlobalScope<"u"&&typeof La().importScripts=="function"}async function nU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iU(){return navigator?.serviceWorker?.controller||null}function rU(){return nD()?self:null}const iD="firebaseLocalStorageDb",sU=1,s_="firebaseLocalStorage",rD="fbase_key";class kp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Q_(i,e){return i.transaction([s_],e?"readwrite":"readonly").objectStore(s_)}function aU(){const i=indexedDB.deleteDatabase(iD);return new kp(i).toPromise()}function C0(){const i=indexedDB.open(iD,sU);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(s_,{keyPath:rD})}catch(r){t(r)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(s_)?e(n):(n.close(),await aU(),e(await C0()))})})}async function HC(i,e,t){const n=Q_(i,!0).put({[rD]:e,value:t});return new kp(n).toPromise()}async function oU(i,e){const t=Q_(i,!1).get(e),n=await new kp(t).toPromise();return n===void 0?null:n.value}function qC(i,e){const t=Q_(i,!0).delete(e);return new kp(t).toPromise()}const lU=800,cU=3;class sD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>cU)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$_._getInstance(rU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await nU(),!this.activeServiceWorker)return;this.sender=new eU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C0();return await HC(e,r_,"1"),await qC(e,r_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>HC(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>oU(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Q_(r,!1).getAll();return new kp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sD.type="LOCAL";const aD=sD;new Pp(3e4,6e4);function uU(i,e){return e?So(e):(dt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Ib extends xb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ud(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ud(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ud(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dU(i){return ZN(i.auth,new Ib(i),i.bypassAuthState)}function hU(i){const{auth:e,user:t}=i;return dt(t,e,"internal-error"),F4(t,new Ib(i),i.bypassAuthState)}async function fU(i){const{auth:e,user:t}=i;return dt(t,e,"internal-error"),z4(t,new Ib(i),i.bypassAuthState)}class oD{constructor(e,t,n,r,a=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dU;case"linkViaPopup":case"linkViaRedirect":return fU;case"reauthViaPopup":case"reauthViaRedirect":return hU;default:ia(this.auth,"internal-error")}}resolve(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pU=new Pp(2e3,1e4);class kd extends oD{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,kd.currentPopupAction&&kd.currentPopupAction.cancel(),kd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){Lo(this.filter.length===1,"Popup operations only handle one event");const e=Ab();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ka(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ka(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kd.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ka(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pU.get())};e()}}kd.currentPopupAction=null;const mU="pendingRedirect",Ig=new Map;class gU extends oD{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ig.get(this.auth._key());if(!e){try{const n=await _U(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ig.set(this.auth._key(),e)}return this.bypassAuthState||Ig.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _U(i,e){const t=wU(e),n=vU(i);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function yU(i,e){Ig.set(i._key(),e)}function vU(i){return So(i._redirectPersistence)}function wU(i){return Ag(mU,i.config.apiKey,i.name)}async function bU(i,e,t=!1){if(Rs(i.app))return Promise.reject(No(i));const n=uc(i),r=uU(n,e),c=await new gU(n,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const EU=600*1e3;class TU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!lD(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ka(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EU&&this.cachedEventUids.clear(),this.cachedEventUids.has(YC(e))}saveEventToCache(e){this.cachedEventUids.add(YC(e)),this.lastProcessedEventTime=Date.now()}}function YC(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function lD({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function SU(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lD(i);default:return!1}}async function xU(i,e={}){return Fo(i,"GET","/v1/projects",e)}const CU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AU=/^https?/;async function IU(i){if(i.config.emulator)return;const{authorizedDomains:e}=await xU(i);for(const t of e)try{if(NU(t))return}catch{}ia(i,"unauthorized-domain")}function NU(i){const e=S0(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!AU.test(t))return!1;if(CU.test(i))return n===i;const r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}const DU=new Pp(3e4,6e4);function GC(){const i=La().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function RU(i){return new Promise((e,t)=>{function n(){GC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GC(),t(ka(i,"network-request-failed"))},timeout:DU.get()})}if(La().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(La().gapi?.load)n();else{const r=E4("iframefcb");return La()[r]=()=>{gapi.load?n():t(ka(i,"network-request-failed"))},HN(`${b4()}?onload=${r}`).catch(a=>t(a))}}).catch(e=>{throw Ng=null,e})}let Ng=null;function PU(i){return Ng=Ng||RU(i),Ng}const OU=new Pp(5e3,15e3),MU="__/auth/iframe",kU="emulator/auth/iframe",LU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VU(i){const e=i.config;dt(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Eb(e,kU):`https://${i.config.authDomain}/${MU}`,n={apiKey:e.apiKey,appName:i.name,v:bh},r=jU.get(i.config.apiHost);r&&(n.eid=r);const a=i._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Rp(n).slice(1)}`}async function UU(i){const e=await PU(i),t=La().gapi;return dt(t,i,"internal-error"),e.open({where:document.body,url:VU(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LU,dontclear:!0},n=>new Promise(async(r,a)=>{await n.restyle({setHideOnLeave:!1});const c=ka(i,"network-request-failed"),d=La().setTimeout(()=>{a(c)},OU.get());function p(){La().clearTimeout(d),r(n)}n.ping(p).then(p,()=>{a(c)})}))}const BU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zU=500,FU=600,HU="_blank",qU="http://localhost";class WC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YU(i,e,t,n=zU,r=FU){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const p={...BU,width:n.toString(),height:r.toString(),top:a,left:c},m=Ei().toLowerCase();t&&(d=LN(m)?HU:t),MN(m)&&(e=e||qU,p.scrollbars="yes");const w=Object.entries(p).reduce((S,[C,N])=>`${S}${C}=${N},`,"");if(h4(m)&&d!=="_self")return GU(e||"",d),new WC(null);const b=window.open(e||"",d,w);dt(b,i,"popup-blocked");try{b.focus()}catch{}return new WC(b)}function GU(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const WU="__/auth/handler",KU="emulator/auth/handler",ZU=encodeURIComponent("fac");async function KC(i,e,t,n,r,a){dt(i.config.authDomain,i,"auth-domain-config-required"),dt(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:bh,eventId:r};if(e instanceof WN){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",RV(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,b]of Object.entries({}))c[w]=b}if(e instanceof Mp){const w=e.getScopes().filter(b=>b!=="");w.length>0&&(c.scopes=w.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const w of Object.keys(d))d[w]===void 0&&delete d[w];const p=await i._getAppCheckToken(),m=p?`#${ZU}=${encodeURIComponent(p)}`:"";return`${$U(i)}?${Rp(d).slice(1)}${m}`}function $U({config:i}){return i.emulator?Eb(i,KU):`https://${i.authDomain}/${WU}`}const Bw="webStorageSupport";class QU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tD,this._completeRedirectFn=bU,this._overrideRedirectResult=yU}async _openPopup(e,t,n,r){Lo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await KC(e,t,n,S0(),r);return YU(e,a,Ab())}async _openRedirect(e,t,n,r){await this._originValidation(e);const a=await KC(e,t,n,S0(),r);return tU(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Lo(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await UU(e),n=new TU(e);return t.register("authEvent",r=>(dt(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bw,{type:Bw},r=>{const a=r?.[0]?.[Bw];a!==void 0&&t(!!a),ia(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zN()||kN()||Sb()}}const XU=QU;var ZC="@firebase/auth",$C="1.12.0";class JU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eB(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tB(i){za(new na("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=n.options;dt(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const p={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FN(i)},m=new y4(n,r,a,p);return A4(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),za(new na("auth-internal",e=>{const t=uc(e.getProvider("auth").getImmediate());return(n=>new JU(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ps(ZC,$C,eB(i)),Ps(ZC,$C,"esm2020")}const nB=300,iB=hN("authIdTokenMaxAge")||nB;let QC=null;const rB=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>iB)return;const r=t?.token;QC!==r&&(QC=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function sB(i=wb()){const e=Mu(i,"auth");if(e.isInitialized())return e.getImmediate();const t=YN(i,{popupRedirectResolver:XU,persistence:[aD,JN,tD]}),n=hN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const c=rB(a.toString());K4(t,c,()=>c(t.currentUser)),W4(t,d=>c(d))}}const r=uN("auth");return r&&I4(t,`http://${r}`),t}function aB(){return document.getElementsByTagName("head")?.[0]??document}v4({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{const a=ka("internal-error");a.customData=r,t(a)},n.type="text/javascript",n.charset="UTF-8",aB().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tB("Browser");var XC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zl,cD;(function(){var i;function e(B,V){function j(){}j.prototype=V.prototype,B.F=V.prototype,B.prototype=new j,B.prototype.constructor=B,B.D=function(F,q,z){for(var H=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)H[Re-2]=arguments[Re];return V.prototype[q].apply(F,H)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(B,V,j){j||(j=0);const F=Array(16);if(typeof V=="string")for(var q=0;q<16;++q)F[q]=V.charCodeAt(j++)|V.charCodeAt(j++)<<8|V.charCodeAt(j++)<<16|V.charCodeAt(j++)<<24;else for(q=0;q<16;++q)F[q]=V[j++]|V[j++]<<8|V[j++]<<16|V[j++]<<24;V=B.g[0],j=B.g[1],q=B.g[2];let z=B.g[3],H;H=V+(z^j&(q^z))+F[0]+3614090360&4294967295,V=j+(H<<7&4294967295|H>>>25),H=z+(q^V&(j^q))+F[1]+3905402710&4294967295,z=V+(H<<12&4294967295|H>>>20),H=q+(j^z&(V^j))+F[2]+606105819&4294967295,q=z+(H<<17&4294967295|H>>>15),H=j+(V^q&(z^V))+F[3]+3250441966&4294967295,j=q+(H<<22&4294967295|H>>>10),H=V+(z^j&(q^z))+F[4]+4118548399&4294967295,V=j+(H<<7&4294967295|H>>>25),H=z+(q^V&(j^q))+F[5]+1200080426&4294967295,z=V+(H<<12&4294967295|H>>>20),H=q+(j^z&(V^j))+F[6]+2821735955&4294967295,q=z+(H<<17&4294967295|H>>>15),H=j+(V^q&(z^V))+F[7]+4249261313&4294967295,j=q+(H<<22&4294967295|H>>>10),H=V+(z^j&(q^z))+F[8]+1770035416&4294967295,V=j+(H<<7&4294967295|H>>>25),H=z+(q^V&(j^q))+F[9]+2336552879&4294967295,z=V+(H<<12&4294967295|H>>>20),H=q+(j^z&(V^j))+F[10]+4294925233&4294967295,q=z+(H<<17&4294967295|H>>>15),H=j+(V^q&(z^V))+F[11]+2304563134&4294967295,j=q+(H<<22&4294967295|H>>>10),H=V+(z^j&(q^z))+F[12]+1804603682&4294967295,V=j+(H<<7&4294967295|H>>>25),H=z+(q^V&(j^q))+F[13]+4254626195&4294967295,z=V+(H<<12&4294967295|H>>>20),H=q+(j^z&(V^j))+F[14]+2792965006&4294967295,q=z+(H<<17&4294967295|H>>>15),H=j+(V^q&(z^V))+F[15]+1236535329&4294967295,j=q+(H<<22&4294967295|H>>>10),H=V+(q^z&(j^q))+F[1]+4129170786&4294967295,V=j+(H<<5&4294967295|H>>>27),H=z+(j^q&(V^j))+F[6]+3225465664&4294967295,z=V+(H<<9&4294967295|H>>>23),H=q+(V^j&(z^V))+F[11]+643717713&4294967295,q=z+(H<<14&4294967295|H>>>18),H=j+(z^V&(q^z))+F[0]+3921069994&4294967295,j=q+(H<<20&4294967295|H>>>12),H=V+(q^z&(j^q))+F[5]+3593408605&4294967295,V=j+(H<<5&4294967295|H>>>27),H=z+(j^q&(V^j))+F[10]+38016083&4294967295,z=V+(H<<9&4294967295|H>>>23),H=q+(V^j&(z^V))+F[15]+3634488961&4294967295,q=z+(H<<14&4294967295|H>>>18),H=j+(z^V&(q^z))+F[4]+3889429448&4294967295,j=q+(H<<20&4294967295|H>>>12),H=V+(q^z&(j^q))+F[9]+568446438&4294967295,V=j+(H<<5&4294967295|H>>>27),H=z+(j^q&(V^j))+F[14]+3275163606&4294967295,z=V+(H<<9&4294967295|H>>>23),H=q+(V^j&(z^V))+F[3]+4107603335&4294967295,q=z+(H<<14&4294967295|H>>>18),H=j+(z^V&(q^z))+F[8]+1163531501&4294967295,j=q+(H<<20&4294967295|H>>>12),H=V+(q^z&(j^q))+F[13]+2850285829&4294967295,V=j+(H<<5&4294967295|H>>>27),H=z+(j^q&(V^j))+F[2]+4243563512&4294967295,z=V+(H<<9&4294967295|H>>>23),H=q+(V^j&(z^V))+F[7]+1735328473&4294967295,q=z+(H<<14&4294967295|H>>>18),H=j+(z^V&(q^z))+F[12]+2368359562&4294967295,j=q+(H<<20&4294967295|H>>>12),H=V+(j^q^z)+F[5]+4294588738&4294967295,V=j+(H<<4&4294967295|H>>>28),H=z+(V^j^q)+F[8]+2272392833&4294967295,z=V+(H<<11&4294967295|H>>>21),H=q+(z^V^j)+F[11]+1839030562&4294967295,q=z+(H<<16&4294967295|H>>>16),H=j+(q^z^V)+F[14]+4259657740&4294967295,j=q+(H<<23&4294967295|H>>>9),H=V+(j^q^z)+F[1]+2763975236&4294967295,V=j+(H<<4&4294967295|H>>>28),H=z+(V^j^q)+F[4]+1272893353&4294967295,z=V+(H<<11&4294967295|H>>>21),H=q+(z^V^j)+F[7]+4139469664&4294967295,q=z+(H<<16&4294967295|H>>>16),H=j+(q^z^V)+F[10]+3200236656&4294967295,j=q+(H<<23&4294967295|H>>>9),H=V+(j^q^z)+F[13]+681279174&4294967295,V=j+(H<<4&4294967295|H>>>28),H=z+(V^j^q)+F[0]+3936430074&4294967295,z=V+(H<<11&4294967295|H>>>21),H=q+(z^V^j)+F[3]+3572445317&4294967295,q=z+(H<<16&4294967295|H>>>16),H=j+(q^z^V)+F[6]+76029189&4294967295,j=q+(H<<23&4294967295|H>>>9),H=V+(j^q^z)+F[9]+3654602809&4294967295,V=j+(H<<4&4294967295|H>>>28),H=z+(V^j^q)+F[12]+3873151461&4294967295,z=V+(H<<11&4294967295|H>>>21),H=q+(z^V^j)+F[15]+530742520&4294967295,q=z+(H<<16&4294967295|H>>>16),H=j+(q^z^V)+F[2]+3299628645&4294967295,j=q+(H<<23&4294967295|H>>>9),H=V+(q^(j|~z))+F[0]+4096336452&4294967295,V=j+(H<<6&4294967295|H>>>26),H=z+(j^(V|~q))+F[7]+1126891415&4294967295,z=V+(H<<10&4294967295|H>>>22),H=q+(V^(z|~j))+F[14]+2878612391&4294967295,q=z+(H<<15&4294967295|H>>>17),H=j+(z^(q|~V))+F[5]+4237533241&4294967295,j=q+(H<<21&4294967295|H>>>11),H=V+(q^(j|~z))+F[12]+1700485571&4294967295,V=j+(H<<6&4294967295|H>>>26),H=z+(j^(V|~q))+F[3]+2399980690&4294967295,z=V+(H<<10&4294967295|H>>>22),H=q+(V^(z|~j))+F[10]+4293915773&4294967295,q=z+(H<<15&4294967295|H>>>17),H=j+(z^(q|~V))+F[1]+2240044497&4294967295,j=q+(H<<21&4294967295|H>>>11),H=V+(q^(j|~z))+F[8]+1873313359&4294967295,V=j+(H<<6&4294967295|H>>>26),H=z+(j^(V|~q))+F[15]+4264355552&4294967295,z=V+(H<<10&4294967295|H>>>22),H=q+(V^(z|~j))+F[6]+2734768916&4294967295,q=z+(H<<15&4294967295|H>>>17),H=j+(z^(q|~V))+F[13]+1309151649&4294967295,j=q+(H<<21&4294967295|H>>>11),H=V+(q^(j|~z))+F[4]+4149444226&4294967295,V=j+(H<<6&4294967295|H>>>26),H=z+(j^(V|~q))+F[11]+3174756917&4294967295,z=V+(H<<10&4294967295|H>>>22),H=q+(V^(z|~j))+F[2]+718787259&4294967295,q=z+(H<<15&4294967295|H>>>17),H=j+(z^(q|~V))+F[9]+3951481745&4294967295,B.g[0]=B.g[0]+V&4294967295,B.g[1]=B.g[1]+(q+(H<<21&4294967295|H>>>11))&4294967295,B.g[2]=B.g[2]+q&4294967295,B.g[3]=B.g[3]+z&4294967295}n.prototype.v=function(B,V){V===void 0&&(V=B.length);const j=V-this.blockSize,F=this.C;let q=this.h,z=0;for(;z<V;){if(q==0)for(;z<=j;)r(this,B,z),z+=this.blockSize;if(typeof B=="string"){for(;z<V;)if(F[q++]=B.charCodeAt(z++),q==this.blockSize){r(this,F),q=0;break}}else for(;z<V;)if(F[q++]=B[z++],q==this.blockSize){r(this,F),q=0;break}}this.h=q,this.o+=V},n.prototype.A=function(){var B=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);B[0]=128;for(var V=1;V<B.length-8;++V)B[V]=0;V=this.o*8;for(var j=B.length-8;j<B.length;++j)B[j]=V&255,V/=256;for(this.v(B),B=Array(16),V=0,j=0;j<4;++j)for(let F=0;F<32;F+=8)B[V++]=this.g[j]>>>F&255;return B};function a(B,V){var j=d;return Object.prototype.hasOwnProperty.call(j,B)?j[B]:j[B]=V(B)}function c(B,V){this.h=V;const j=[];let F=!0;for(let q=B.length-1;q>=0;q--){const z=B[q]|0;F&&z==V||(j[q]=z,F=!1)}this.g=j}var d={};function p(B){return-128<=B&&B<128?a(B,function(V){return new c([V|0],V<0?-1:0)}):new c([B|0],B<0?-1:0)}function m(B){if(isNaN(B)||!isFinite(B))return b;if(B<0)return R(m(-B));const V=[];let j=1;for(let F=0;B>=j;F++)V[F]=B/j|0,j*=4294967296;return new c(V,0)}function w(B,V){if(B.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(B.charAt(0)=="-")return R(w(B.substring(1),V));if(B.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=m(Math.pow(V,8));let F=b;for(let z=0;z<B.length;z+=8){var q=Math.min(8,B.length-z);const H=parseInt(B.substring(z,z+q),V);q<8?(q=m(Math.pow(V,q)),F=F.j(q).add(m(H))):(F=F.j(j),F=F.add(m(H)))}return F}var b=p(0),S=p(1),C=p(16777216);i=c.prototype,i.m=function(){if(O(this))return-R(this).m();let B=0,V=1;for(let j=0;j<this.g.length;j++){const F=this.i(j);B+=(F>=0?F:4294967296+F)*V,V*=4294967296}return B},i.toString=function(B){if(B=B||10,B<2||36<B)throw Error("radix out of range: "+B);if(N(this))return"0";if(O(this))return"-"+R(this).toString(B);const V=m(Math.pow(B,6));var j=this;let F="";for(;;){const q=ne(j,V).g;j=k(j,q.j(V));let z=((j.g.length>0?j.g[0]:j.h)>>>0).toString(B);if(j=q,N(j))return z+F;for(;z.length<6;)z="0"+z;F=z+F}},i.i=function(B){return B<0?0:B<this.g.length?this.g[B]:this.h};function N(B){if(B.h!=0)return!1;for(let V=0;V<B.g.length;V++)if(B.g[V]!=0)return!1;return!0}function O(B){return B.h==-1}i.l=function(B){return B=k(this,B),O(B)?-1:N(B)?0:1};function R(B){const V=B.g.length,j=[];for(let F=0;F<V;F++)j[F]=~B.g[F];return new c(j,~B.h).add(S)}i.abs=function(){return O(this)?R(this):this},i.add=function(B){const V=Math.max(this.g.length,B.g.length),j=[];let F=0;for(let q=0;q<=V;q++){let z=F+(this.i(q)&65535)+(B.i(q)&65535),H=(z>>>16)+(this.i(q)>>>16)+(B.i(q)>>>16);F=H>>>16,z&=65535,H&=65535,j[q]=H<<16|z}return new c(j,j[j.length-1]&-2147483648?-1:0)};function k(B,V){return B.add(R(V))}i.j=function(B){if(N(this)||N(B))return b;if(O(this))return O(B)?R(this).j(R(B)):R(R(this).j(B));if(O(B))return R(this.j(R(B)));if(this.l(C)<0&&B.l(C)<0)return m(this.m()*B.m());const V=this.g.length+B.g.length,j=[];for(var F=0;F<2*V;F++)j[F]=0;for(F=0;F<this.g.length;F++)for(let q=0;q<B.g.length;q++){const z=this.i(F)>>>16,H=this.i(F)&65535,Re=B.i(q)>>>16,Ve=B.i(q)&65535;j[2*F+2*q]+=H*Ve,G(j,2*F+2*q),j[2*F+2*q+1]+=z*Ve,G(j,2*F+2*q+1),j[2*F+2*q+1]+=H*Re,G(j,2*F+2*q+1),j[2*F+2*q+2]+=z*Re,G(j,2*F+2*q+2)}for(B=0;B<V;B++)j[B]=j[2*B+1]<<16|j[2*B];for(B=V;B<2*V;B++)j[B]=0;return new c(j,0)};function G(B,V){for(;(B[V]&65535)!=B[V];)B[V+1]+=B[V]>>>16,B[V]&=65535,V++}function Z(B,V){this.g=B,this.h=V}function ne(B,V){if(N(V))throw Error("division by zero");if(N(B))return new Z(b,b);if(O(B))return V=ne(R(B),V),new Z(R(V.g),R(V.h));if(O(V))return V=ne(B,R(V)),new Z(R(V.g),V.h);if(B.g.length>30){if(O(B)||O(V))throw Error("slowDivide_ only works with positive integers.");for(var j=S,F=V;F.l(B)<=0;)j=ee(j),F=ee(F);var q=de(j,1),z=de(F,1);for(F=de(F,2),j=de(j,2);!N(F);){var H=z.add(F);H.l(B)<=0&&(q=q.add(j),z=H),F=de(F,1),j=de(j,1)}return V=k(B,q.j(V)),new Z(q,V)}for(q=b;B.l(V)>=0;){for(j=Math.max(1,Math.floor(B.m()/V.m())),F=Math.ceil(Math.log(j)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),z=m(j),H=z.j(V);O(H)||H.l(B)>0;)j-=F,z=m(j),H=z.j(V);N(z)&&(z=S),q=q.add(z),B=k(B,H)}return new Z(q,B)}i.B=function(B){return ne(this,B).h},i.and=function(B){const V=Math.max(this.g.length,B.g.length),j=[];for(let F=0;F<V;F++)j[F]=this.i(F)&B.i(F);return new c(j,this.h&B.h)},i.or=function(B){const V=Math.max(this.g.length,B.g.length),j=[];for(let F=0;F<V;F++)j[F]=this.i(F)|B.i(F);return new c(j,this.h|B.h)},i.xor=function(B){const V=Math.max(this.g.length,B.g.length),j=[];for(let F=0;F<V;F++)j[F]=this.i(F)^B.i(F);return new c(j,this.h^B.h)};function ee(B){const V=B.g.length+1,j=[];for(let F=0;F<V;F++)j[F]=B.i(F)<<1|B.i(F-1)>>>31;return new c(j,B.h)}function de(B,V){const j=V>>5;V%=32;const F=B.g.length-j,q=[];for(let z=0;z<F;z++)q[z]=V>0?B.i(z+j)>>>V|B.i(z+j+1)<<32-V:B.i(z+j);return new c(q,B.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,cD=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=w,Zl=c}).apply(typeof XC<"u"?XC:typeof self<"u"?self:typeof window<"u"?window:{});var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uD,Uf,dD,Dg,A0,hD,fD,pD;(function(){var i,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof lg=="object"&&lg];for(var x=0;x<g.length;++x){var D=g[x];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var n=t(this);function r(g,x){if(x)e:{var D=n;g=g.split(".");for(var Y=0;Y<g.length-1;Y++){var ae=g[Y];if(!(ae in D))break e;D=D[ae]}g=g[g.length-1],Y=D[g],x=x(Y),x!=Y&&x!=null&&e(D,g,{configurable:!0,writable:!0,value:x})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(x){var D=[],Y;for(Y in x)Object.prototype.hasOwnProperty.call(x,Y)&&D.push([Y,x[Y]]);return D}});var a=a||{},c=this||self;function d(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function p(g,x,D){return g.call.apply(g.bind,arguments)}function m(g,x,D){return m=p,m.apply(null,arguments)}function w(g,x){var D=Array.prototype.slice.call(arguments,1);return function(){var Y=D.slice();return Y.push.apply(Y,arguments),g.apply(this,Y)}}function b(g,x){function D(){}D.prototype=x.prototype,g.Z=x.prototype,g.prototype=new D,g.prototype.constructor=g,g.Ob=function(Y,ae,ge){for(var Ue=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)Ue[ht-2]=arguments[ht];return x.prototype[ae].apply(Y,Ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function C(g){const x=g.length;if(x>0){const D=Array(x);for(let Y=0;Y<x;Y++)D[Y]=g[Y];return D}return[]}function N(g,x){for(let Y=1;Y<arguments.length;Y++){const ae=arguments[Y];var D=typeof ae;if(D=D!="object"?D:ae?Array.isArray(ae)?"array":D:"null",D=="array"||D=="object"&&typeof ae.length=="number"){D=g.length||0;const ge=ae.length||0;g.length=D+ge;for(let Ue=0;Ue<ge;Ue++)g[D+Ue]=ae[Ue]}else g.push(ae)}}class O{constructor(x,D){this.i=x,this.j=D,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function R(g){c.setTimeout(()=>{throw g},0)}function k(){var g=B;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class G{constructor(){this.h=this.g=null}add(x,D){const Y=Z.get();Y.set(x,D),this.h?this.h.next=Y:this.g=Y,this.h=Y}}var Z=new O(()=>new ne,g=>g.reset());class ne{constructor(){this.next=this.g=this.h=null}set(x,D){this.h=x,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,de=!1,B=new G,V=()=>{const g=Promise.resolve(void 0);ee=()=>{g.then(j)}};function j(){for(var g;g=k();){try{g.h.call(g.g)}catch(D){R(D)}var x=Z;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}de=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const D=()=>{};c.addEventListener("test",D,x),c.removeEventListener("test",D,x)}catch{}return g})();function H(g){return/^[\s\xa0]*$/.test(g)}function Re(g,x){q.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}b(Re,q),Re.prototype.init=function(g,x){const D=this.type=g.type,Y=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(D=="mouseover"?x=g.fromElement:D=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,Y?(this.clientX=Y.clientX!==void 0?Y.clientX:Y.pageX,this.clientY=Y.clientY!==void 0?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),W=0;function le(g,x,D,Y,ae){this.listener=g,this.proxy=null,this.src=x,this.type=D,this.capture=!!Y,this.ha=ae,this.key=++W,this.da=this.fa=!1}function se(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function je(g,x,D){for(const Y in g)x.call(D,g[Y],Y,g)}function Ce(g,x){for(const D in g)x.call(void 0,g[D],D,g)}function K(g){const x={};for(const D in g)x[D]=g[D];return x}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(g,x){let D,Y;for(let ae=1;ae<arguments.length;ae++){Y=arguments[ae];for(D in Y)g[D]=Y[D];for(let ge=0;ge<fe.length;ge++)D=fe[ge],Object.prototype.hasOwnProperty.call(Y,D)&&(g[D]=Y[D])}}function $(g){this.src=g,this.g={},this.h=0}$.prototype.add=function(g,x,D,Y,ae){const ge=g.toString();g=this.g[ge],g||(g=this.g[ge]=[],this.h++);const Ue=be(g,x,Y,ae);return Ue>-1?(x=g[Ue],D||(x.fa=!1)):(x=new le(x,this.src,ge,!!Y,ae),x.fa=D,g.push(x)),x};function ye(g,x){const D=x.type;if(D in g.g){var Y=g.g[D],ae=Array.prototype.indexOf.call(Y,x,void 0),ge;(ge=ae>=0)&&Array.prototype.splice.call(Y,ae,1),ge&&(se(x),g.g[D].length==0&&(delete g.g[D],g.h--))}}function be(g,x,D,Y){for(let ae=0;ae<g.length;++ae){const ge=g[ae];if(!ge.da&&ge.listener==x&&ge.capture==!!D&&ge.ha==Y)return ae}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),it={};function et(g,x,D,Y,ae){if(Array.isArray(x)){for(let ge=0;ge<x.length;ge++)et(g,x[ge],D,Y,ae);return null}return D=oi(D),g&&g[Ve]?g.J(x,D,d(Y)?!!Y.capture:!1,ae):ft(g,x,D,!1,Y,ae)}function ft(g,x,D,Y,ae,ge){if(!x)throw Error("Invalid event type");const Ue=d(ae)?!!ae.capture:!!ae;let ht=Oi(g);if(ht||(g[Fe]=ht=new $(g)),D=ht.add(x,D,Y,Ue,ge),D.proxy)return D;if(Y=qt(),D.proxy=Y,Y.src=g,Y.listener=D,g.addEventListener)z||(ae=Ue),ae===void 0&&(ae=!1),g.addEventListener(x.toString(),Y,ae);else if(g.attachEvent)g.attachEvent(Wn(x.toString()),Y);else if(g.addListener&&g.removeListener)g.addListener(Y);else throw Error("addEventListener and attachEvent are unavailable.");return D}function qt(){function g(D){return x.call(g.src,g.listener,D)}const x=dr;return g}function Wt(g,x,D,Y,ae){if(Array.isArray(x))for(var ge=0;ge<x.length;ge++)Wt(g,x[ge],D,Y,ae);else Y=d(Y)?!!Y.capture:!!Y,D=oi(D),g&&g[Ve]?(g=g.i,ge=String(x).toString(),ge in g.g&&(x=g.g[ge],D=be(x,D,Y,ae),D>-1&&(se(x[D]),Array.prototype.splice.call(x,D,1),x.length==0&&(delete g.g[ge],g.h--)))):g&&(g=Oi(g))&&(x=g.g[x.toString()],g=-1,x&&(g=be(x,D,Y,ae)),(D=g>-1?x[g]:null)&&Mn(D))}function Mn(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[Ve])ye(x.i,g);else{var D=g.type,Y=g.proxy;x.removeEventListener?x.removeEventListener(D,Y,g.capture):x.detachEvent?x.detachEvent(Wn(D),Y):x.addListener&&x.removeListener&&x.removeListener(Y),(D=Oi(x))?(ye(D,g),D.h==0&&(D.src=null,x[Fe]=null)):se(g)}}}function Wn(g){return g in it?it[g]:it[g]="on"+g}function dr(g,x){if(g.da)g=!0;else{x=new Re(x,this);const D=g.listener,Y=g.ha||g.src;g.fa&&Mn(g),g=D.call(Y,x)}return g}function Oi(g){return g=g[Fe],g instanceof $?g:null}var Mi="__closure_events_fn_"+(Math.random()*1e9>>>0);function oi(g){return typeof g=="function"?g:(g[Mi]||(g[Mi]=function(x){return g.handleEvent(x)}),g[Mi])}function rn(){F.call(this),this.i=new $(this),this.M=this,this.G=null}b(rn,F),rn.prototype[Ve]=!0,rn.prototype.removeEventListener=function(g,x,D,Y){Wt(this,g,x,D,Y)};function Kt(g,x){var D,Y=g.G;if(Y)for(D=[];Y;Y=Y.G)D.push(Y);if(g=g.M,Y=x.type||x,typeof x=="string")x=new q(x,g);else if(x instanceof q)x.target=x.target||g;else{var ae=x;x=new q(Y,g),we(x,ae)}ae=!0;let ge,Ue;if(D)for(Ue=D.length-1;Ue>=0;Ue--)ge=x.g=D[Ue],ae=kn(ge,Y,!0,x)&&ae;if(ge=x.g=g,ae=kn(ge,Y,!0,x)&&ae,ae=kn(ge,Y,!1,x)&&ae,D)for(Ue=0;Ue<D.length;Ue++)ge=x.g=D[Ue],ae=kn(ge,Y,!1,x)&&ae}rn.prototype.N=function(){if(rn.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const D=g.g[x];for(let Y=0;Y<D.length;Y++)se(D[Y]);delete g.g[x],g.h--}}this.G=null},rn.prototype.J=function(g,x,D,Y){return this.i.add(String(g),x,!1,D,Y)},rn.prototype.K=function(g,x,D,Y){return this.i.add(String(g),x,!0,D,Y)};function kn(g,x,D,Y){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let ge=0;ge<x.length;++ge){const Ue=x[ge];if(Ue&&!Ue.da&&Ue.capture==D){const ht=Ue.listener,zt=Ue.ha||Ue.src;Ue.fa&&ye(g.i,Ue),ae=ht.call(zt,Y)!==!1&&ae}}return ae&&!Y.defaultPrevented}function hr(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=m(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(g,x||0)}function ki(g){g.g=hr(()=>{g.g=null,g.i&&(g.i=!1,ki(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class he extends F{constructor(x,D){super(),this.m=x,this.l=D,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(g){F.call(this),this.h=g,this.g={}}b(Te,F);var Me=[];function Pe(g){je(g.g,function(x,D){this.g.hasOwnProperty(D)&&Mn(x)},g),g.g={}}Te.prototype.N=function(){Te.Z.N.call(this),Pe(this)},Te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=c.JSON.stringify,Ze=c.JSON.parse,ct=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function xt(){}function Ut(){}var Rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){q.call(this,"d")}b(Pt,q);function Cn(){q.call(this,"c")}b(Cn,q);var wt={},Ln=null;function sn(){return Ln=Ln||new rn}wt.Ia="serverreachability";function Cr(g){q.call(this,wt.Ia,g)}b(Cr,q);function ei(g){const x=sn();Kt(x,new Cr(x))}wt.STAT_EVENT="statevent";function ti(g,x){q.call(this,wt.STAT_EVENT,g),this.stat=x}b(ti,q);function Bt(g){const x=sn();Kt(x,new ti(x,g))}wt.Ja="timingevent";function li(g,x){q.call(this,wt.Ja,g),this.size=x}b(li,q);function Li(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},x)}function gn(){this.g=!0}gn.prototype.ua=function(){this.g=!1};function Ar(g,x,D,Y,ae,ge){g.info(function(){if(g.g)if(ge){var Ue="",ht=ge.split("&");for(let Ft=0;Ft<ht.length;Ft++){var zt=ht[Ft].split("=");if(zt.length>1){const Sn=zt[0];zt=zt[1];const Or=Sn.split("_");Ue=Or.length>=2&&Or[1]=="type"?Ue+(Sn+"="+zt+"&"):Ue+(Sn+"=redacted&")}}}else Ue=null;else Ue=ge;return"XMLHTTP REQ ("+Y+") [attempt "+ae+"]: "+x+`
C:\Users\Michele\MMCPlayground\missmeconnection\dist\assets\index-8dqtjp19.js:63:`).slice(0,3).join(" "),...e})},timers:{},startTimer:i=>{gt.timers[i]=performance.now()},endTimer:(i,e={})=>{if(gt.timers[i]){const t=Math.round(performance.now()-gt.timers[i]);return gt.trackEvent(i,{duration_ms:t,...e}),delete gt.timers[i],t}}};typeof window<"u"&&(window.onerror=(i,e,t,n,r)=>{gt.trackError(r||{message:i},{source:"window.onerror",line:t})},window.onunhandledrejection=i=>{gt.trackError(i.reason,{source:"unhandledrejection"})});const cO=P.createContext(),f9=({children:i})=>{const[e,t]=P.useState(null),[n,r]=P.useState(!1),[a,c]=P.useState(!0),[d,p]=P.useState([]),[m,w]=P.useState([]),[b,S]=P.useState({}),[C,N]=P.useState([]),[O,R]=P.useState({}),[k,G]=P.useState(()=>{const he=localStorage.getItem("mmc_hiddenPins");return he?JSON.parse(he):[]}),[Z,ne]=P.useState("mm/dd/yyyy"),[ee,de]=P.useState("dark"),[B,V]=P.useState("miles"),[j,F]=P.useState(!1),[q,z]=P.useState(null),[H,Re]=P.useState({location:"",radius:10,unit:"miles",type:"",date:null,keyword:""});P.useEffect(()=>{Re(he=>({...he,unit:B}))},[B]),P.useEffect(()=>{if(!Sa){c(!1);return}const he=Z4(Sa,async Te=>{try{if(Te){const Me=await Dd(an(st,"users",Te.uid)),Pe=Me.exists()?Me.data():{},{uid:ke,email:Ze,...ct}=Pe;t({...ct,uid:Te.uid,email:Te.email,name:ct.name||Te.email.split("@")[0].toUpperCase(),isAdmin:ct.isAdmin||Te.email==="MissMe@missmeconnection.com"}),r(!0)}else t(null),r(!1)}catch(Me){console.error("Auth sync error:",Me)}finally{c(!1)}});return()=>he()},[]);const Ve=async()=>{if(!Sa?.currentUser)return;const he=await Dd(an(st,"users",Sa.currentUser.uid));he.exists()&&t(Te=>({...Te,...he.data()}))};P.useEffect(()=>{if(st)try{gt.startTimer("pins_load");const he=Co(Di(st,"pins"),bp("createdAt","desc")),Te=Hl(he,Me=>{const Pe=Me.docs.map(ct=>{const xt=ct.data(),Ut=ct.id;return{...xt,id:Ut}}),ke=Array.isArray(e?.blockedUids)?e.blockedUids:[],Ze=Pe.filter(ct=>!ke.includes(ct.ownerUid));p(Ze),gt.endTimer("pins_load",{count:Ze.length}),gt.trackEvent("pins_load_success",{count:Ze.length})},Me=>{gt.trackError(Me,{source:"Pins Listener"}),gt.trackEvent("pins_load_fail",{error:Me.code})});return()=>{Te()}}catch(he){gt.trackError(he,{source:"Pins Listener Setup"})}},[e,e?.blockedUids]),P.useEffect(()=>{if(!e||!st){w([]);return}try{gt.startTimer("thread_list_load");const he=Co(Di(st,"threads"),kP(zg("ownerUid","==",e.uid),zg("responderUid","==",e.uid))),Te=Hl(he,{next:Me=>{const Pe=Me.docs.map(ke=>({...ke.data(),id:ke.id}));Pe.sort((ke,Ze)=>{const ct=ke.lastMessageAt?.toDate?ke.lastMessageAt.toDate():ke.lastMessageAt||0;return(Ze.lastMessageAt?.toDate?Ze.lastMessageAt.toDate():Ze.lastMessageAt||0)-ct}),w(Pe),gt.endTimer("thread_list_load",{count:Pe.length}),gt.trackEvent("thread_list_load_success",{count:Pe.length})},error:Me=>{console.error("? Threads Listener Error:",Me.code,Me.message,"User:",e.uid),gt.trackError(Me,{source:"Threads Listener"}),gt.trackEvent("thread_list_load_fail",{error:Me.code})}});return()=>{Te()}}catch(he){gt.trackError(he,{source:"Threads Listener Setup"})}},[e?.uid,st]);const W=(he,Te)=>{if(!st||!he)return()=>{};const Me=Co(Di(st,"threads",he,"messages"),bp("createdAt","asc"));return Hl(Me,Pe=>{const ke=Pe.docs.map(Ze=>({id:Ze.id,...Ze.data()}));Te(ke)},Pe=>{console.error("? Messages listener error:",Pe),Te([])})};P.useEffect(()=>{if(!(!e||!st))try{const he=Co(Di(st,"notifications"),zg("targetUid","==",e.uid)),Te=Hl(he,Me=>{const Pe=Me.docs.map(ke=>({id:ke.id,...ke.data()}));Pe.sort((ke,Ze)=>{const ct=ke.createdAt?.toDate?ke.createdAt.toDate():ke.createdAt||0;return(Ze.createdAt?.toDate?Ze.createdAt.toDate():Ze.createdAt||0)-ct}),N(Pe)});return()=>Te()}catch(he){console.error("Notif listener error:",he)}},[e]),P.useEffect(()=>{if(!st)return;const he=Hl(Di(st,"ratings"),Te=>{const Me={};Te.docs.forEach(Pe=>{const ke=Pe.data();Me[ke.pinId]||(Me[ke.pinId]=[]),Me[ke.pinId].push({userId:ke.userId,rating:ke.rating})}),R(Me)});return()=>he()},[]),P.useEffect(()=>{if(!e){F(!1);return}const he=m.filter(Te=>Te.lastSenderUid&&Te.lastSenderUid!==e.uid&&Te.lastMessageAt).length;parseInt(localStorage.getItem(`mmc_last_notified_threads_${e.uid}`)||"0"),he>0?F(!0):F(!1)},[m,e]);const le=()=>{e&&F(!1)},se=(he,Te)=>he==null?"":String(he).trim().replace(/\s+/g," ").slice(0,Te),je=he=>{if(!he)return!1;const Te="st|street|ave|avenue|rd|road|blvd|boulevard|dr|drive|ln|lane|ct|court|way|hwy|highway";return new RegExp(`^\\d+[-/]*\\d*\\s+.*\\s+(?:${Te})$`,"i").test(he.trim())},Ce=async(he,Te)=>{gt.trackEvent("auth_login_attempt");try{const Me=await G4(Sa,he,Te);return gt.trackEvent("auth_login_success"),Me}catch(Me){throw gt.trackEvent("auth_login_fail",{error:Me.code}),Me}},K=async(he,Te,Me,Pe)=>{gt.trackEvent("auth_signup_attempt");try{const ke=await Y4(Sa,he,Te),Ze=se(Me,40),ct=se(Pe,16),xt=await nb(ct),Ut=xt?.state||"",Rt=xt?.country||"";return await Fg(an(st,"users",ke.user.uid),{name:Ze,email:he,postalCode:ct,state:Ut,country:Rt,createdAt:vi(),isAdmin:he==="MissMe@missmeconnection.com"}),gt.trackEvent("auth_signup_success"),ke}catch(ke){throw gt.trackEvent("auth_signup_fail",{error:ke.code}),ke}},fe=async()=>{try{await $4(Sa),t(null),r(!1),p([]),w([]),N([]),R({})}catch(he){console.error("Logout error:",he)}},we=async(he,Te)=>{if(!(!e||!he))try{const Me=se(Te,40),Pe=an(st,"users",e.uid);await lr(Pe,{[`nicknames.${he}`]:Me}),t(ke=>({...ke,nicknames:{...ke.nicknames||{},[he]:Me}}))}catch(Me){throw console.error("Error setting thread nickname:",Me),Me}},$=async(he,Te)=>{const Me=an(st,"users",he);let Pe={};const ke={...Te};if(Te.name!==void 0&&(ke.name=se(Te.name,40)),Te.postalCode!==void 0){ke.postalCode=se(Te.postalCode,16);const Ze=await nb(ke.postalCode);Ze&&(Pe={state:Ze.state,country:Ze.country})}try{await lr(Me,{...ke,...Pe}),await Ve()}catch(Ze){throw console.error("Profile update error:",Ze),Ze}},ye=async he=>{if(!he)return;const Te=se(he.title,80).toUpperCase(),Me=se(he.description,2e3);let Pe=se(he.location,120),ke=se(he.address,160);if(je(Pe)&&(Pe="Public Area"),je(ke)&&(ke=""),!Te||!Me){console.error("? addPin Aborted: Title and description are required after sanitization.");return}const Ze={...he,title:Te,description:Me,location:Pe,address:ke,ownerEmail:e?.email||he.ownerEmail||"admin@missmeconnection.com",ownerUid:e?.uid||"seeder-bot",createdAt:vi()};ru("FIRESTORE WRITE pinData.date:",Ze.date),ru("FIRESTORE WRITE createdAt:",Ze.createdAt);try{he.id?await Fg(an(st,"pins",String(he.id)),Ze):await Pd(Di(st,"pins"),Ze)}catch(ct){throw console.error("addPin failed:",ct),ct}},be=async(he,Te="User deleted",Me=null)=>{if(!he){console.error("? removePin called without an ID");return}const Pe=String(he);console.log("??? INITIATING DELETE & ARCHIVE: Targeting ID:",Pe);try{const ke=d.find(ct=>String(ct.id)===Pe);ke&&(console.log("?? Archiving Pin to Black Box..."),await Pd(Di(st,"deleted_pins"),{...ke,originalId:Pe,deletedAt:vi(),deletedBy:Me||e?.uid||"unknown",deletionReason:Te,archivedByRole:e?.isAdmin?"admin":"user"}));const Ze=an(st,"pins",Pe);await Ep(Ze),console.log("? FIREBASE DELETE SUCCESS for ID:",Pe)}catch(ke){console.error("? FIREBASE DELETE FAILED for ID:",Pe,ke),alert("Delete failed in database. Status: "+ke.message)}},Fe=async(he,Te)=>{if(!e)return;const Me=se(Te,500);if(!Me){console.error("? reportPin Aborted: Empty reason after sanitization.");return}try{await Pd(Di(st,"reports"),{pinId:he,reporterUid:e.uid,reporterEmail:e.email,reason:Me,status:"pending",createdAt:vi()});const Pe=an(st,"pins",he);await lr(Pe,{isReported:!0})}catch(Pe){throw console.error("reportPin failed:",Pe),Pe}},it=async(he,Te)=>{if(!e)return;const Me={...Te};if(Te.title!==void 0&&(Me.title=se(Te.title,80).toUpperCase()),Te.description!==void 0&&(Me.description=se(Te.description,2e3)),Te.location!==void 0){let Pe=se(Te.location,120);je(Pe)&&(Pe="Public Area"),Me.location=Pe}if(Te.address!==void 0){let Pe=se(Te.address,160);je(Pe)&&(Pe=""),Me.address=Pe}try{const Pe=an(st,"pins",he);await lr(Pe,{...Me,updatedAt:vi()})}catch(Pe){throw console.error("updatePin failed:",Pe),Pe}},et=async(he,Te)=>{if(e)try{const Me=`${e.uid}_${he}`;await Fg(an(st,"ratings",Me),{pinId:he,userId:e.uid,rating:Te,updatedAt:vi()})}catch(Me){throw console.error("ratePin failed:",Me),Me}},ft=he=>{const Te=O[he]||[];return Te.length===0?"0.0":(Te.reduce((Pe,ke)=>Pe+(ke.rating||0),0)/Te.length).toFixed(1)},qt=()=>{if(!e||!e.isSuspended||!e.suspendedUntil)return!1;const he=new Date,Te=e.suspendedUntil.toDate?e.suspendedUntil.toDate():new Date(e.suspendedUntil);return he<Te},Wt=()=>{if(!e||!e.reviewStatus||!e.reviewExpiresAt)return!1;const he=new Date,Te=e.reviewExpiresAt.toDate?e.reviewExpiresAt.toDate():new Date(e.reviewExpiresAt);return he<Te},Mn=async he=>{if(!e)return!1;if(!qt())return!0;const Te=`${he}_${e.uid}`;return(await Dd(an(st,"threads",Te))).exists()},Wn=async he=>{if(!(!e||!st||!he))try{const Te=an(st,"threads",he),Me=he.split("_"),Pe=Me[Me.length-1];let ke=null;e.uid===Pe?ke="responderLastReadAt":ke="ownerLastReadAt",await lr(Te,{[ke]:vi()})}catch(Te){Te.code!=="permission-denied"&&console.error("markRead failed",Te)}},dr=async(he,Te,Me="moderation")=>{await Pd(Di(st,"notifications"),{targetUid:he,message:Te,type:Me,read:!1})},Oi=async(he,Te,Me=null)=>{if(!e){console.error("? addReply Failed: User not logged in.");return}const Pe=(Te||"").toString().trim();if(!Pe){console.error("? addReply Aborted: Empty message.");return}const ke=Pe.slice(0,2e3),Ze=d.find(wt=>String(wt.id)===String(he));if(!Ze){console.error(`? addReply Failed: Pin ${he} not found in state.`);return}let ct=Ze.ownerUid;if(!ct)if(e.email.toLowerCase()===(Ze.ownerEmail||"").toLowerCase())ct=e.uid,console.log("?? addReply: resolvedOwnerUid missing on pin, using current user as owner (match by email).");else{console.error("? addReply Aborted: Pin has no ownerUid and user is not owner.");return}let xt=Me;if(e.uid!==ct)xt=e.uid;else if(!xt){console.error("? addReply Aborted: Owner must specify target responderUid to reply.");return}if(xt===ct){console.error("? addReply Aborted: Responder cannot be the owner.");return}const Ut=[ct,xt];if(Ut.includes(void 0)||Ut.includes(null)){console.error("? addReply Integrity Error: Participants array contains invalid values:",Ut);return}const Rt=`${he}_${xt}`,Pt=an(st,"threads",Rt),Cn={pinId:he,ownerUid:ct,ownerEmail:(Ze.ownerEmail||"").toLowerCase(),responderUid:xt,participants:Ut,lastMessageAt:vi(),lastMessagePreview:ke.substring(0,80),lastSenderUid:e.uid,updatedAt:vi(),ownerLastReadAt:vi(),responderLastReadAt:vi()};try{gt.trackEvent("reply_send_attempt"),gt.startTimer("reply_send");const wt=BP(st),Ln=Math.random().toString(36).substring(2,9),sn=`${e.uid}_${Date.now()}_${Ln}`,Cr=an(st,"threads",Rt,"messages",sn),ei={content:ke,senderUid:e.uid,senderEmail:e.email,createdAt:vi(),participants:Ut},ti={lastMessageAt:vi(),lastMessagePreview:ke.substring(0,80),lastSenderUid:e.uid,updatedAt:vi()};e.uid===ct?ti.ownerLastReadAt=vi():e.uid===xt&&(ti.responderLastReadAt=vi()),(await Dd(Pt)).exists()?wt.update(Pt,ti):wt.set(Pt,Cn),wt.set(Cr,ei),await wt.commit(),gt.endTimer("reply_send"),gt.trackEvent("reply_send_success"),console.log(`? SUCCESS: Atomic write for thread ${Rt} and message ${sn}`)}catch(wt){throw gt.trackEvent("reply_send_fail",{error:wt.code}),gt.trackError(wt,{source:"addReply"}),wt}},Mi=async(he,Te,Me)=>{if(!e)return;const Pe=an(st,"threads",he,"messages",Te);try{const ke=await Dd(Pe);if(!ke.exists()){console.error("? updateReply Failed: Message does not exist.");return}if(ke.data().senderUid!==e.uid){console.error("? updateReply Access Denied: User is not the author.");return}const Ze=(Me||"").toString().trim();if(!Ze)return;await lr(Pe,{content:Ze.slice(0,2e3),updatedAt:vi()})}catch(ke){console.error("? updateReply Error:",ke)}},oi=he=>{G(Te=>{const Me=Te.includes(he)?Te:[...Te,he];return localStorage.setItem("mmc_hiddenPins",JSON.stringify(Me)),Me})},rn=he=>{G(Te=>{const Me=Te.filter(Pe=>Pe!==he);return localStorage.setItem("mmc_hiddenPins",JSON.stringify(Me)),Me})},Kt=()=>{G([]),localStorage.removeItem("mmc_hiddenPins")},kn=async he=>{if(!(!e||!he||e.uid===he)){console.log(`?? RECIPROCAL BLOCK INITIATED: ${e.uid} <-> ${he}`);try{const Te=an(st,"users",e.uid);await lr(Te,{blockedUids:J0(he)});const Me=an(st,"users",he);await lr(Me,{blockedUids:J0(e.uid)});const Pe=m.filter(ke=>ke.participants.includes(e.uid)&&ke.participants.includes(he)).map(ke=>ke.id);for(const ke of Pe)await Ep(an(st,"threads",ke));await Pd(Di(st,"deleted_pins"),{type:"user_block",title:"RECIPROCAL BLOCK",deletedAt:vi(),deletedBy:e.uid,targetUid:he,deletionReason:'User used "BAR USER" feature',archivedByRole:"user",details:`Cleaned up ${Pe.length} message threads.`}),await Ve(),console.log("? Reciprocal block complete. Threads purged.")}catch(Te){console.error("? Block error:",Te)}}},hr=he=>{if(!he)return"JUST NOW";let Te;if(he.toDate?Te=he.toDate():he.seconds!==void 0?Te=new Date(he.seconds*1e3):Te=new Date(he),!Te||isNaN(Te.getTime()))return"JUST NOW";const Pe=Math.floor((new Date-Te)/1e3);if(Pe<60)return"JUST NOW";if(Pe<3600)return`${Math.floor(Pe/60)}M AGO`;if(Pe<86400)return`${Math.floor(Pe/3600)}H AGO`;const ke=Math.floor(Pe/86400);return ke<5?`${ke}D AGO`:ki(Te)},ki=he=>{if(!he)return"";if(typeof he=="string"){if(he.includes("T")||he.includes("Z")){if(/^\d{4}-\d{2}-\d{2}/.test(he)){const Ze=he.split("T")[0],[ct,xt,Ut]=Ze.split("-").map(Cn=>parseInt(Cn,10)),Rt=String(xt).padStart(2,"0"),Pt=String(Ut).padStart(2,"0");return Z==="dd/mm/yyyy"?`${Pt}/${Rt}/${ct}`:Z==="yyyy/mm/dd"?`${ct}/${Rt}/${Pt}`:`${Rt}/${Pt}/${ct}`}return""}if(/^\d{4}-\d{2}-\d{2}$/.test(he)){const[Ze,ct,xt]=he.split("-").map(Ut=>parseInt(Ut,10));if(Ze&&ct&&xt){const Ut=String(ct).padStart(2,"0"),Rt=String(xt).padStart(2,"0");return Z==="dd/mm/yyyy"?`${Rt}/${Ut}/${Ze}`:Z==="yyyy/mm/dd"?`${Ze}/${Ut}/${Rt}`:`${Ut}/${Rt}/${Ze}`}}}let Te;if(he.toDate)Te=he.toDate();else if(he.seconds!==void 0)Te=new Date(he.seconds*1e3);else if(typeof he=="string"&&he.includes("T")){const[Ze,ct,xt]=he.split("T")[0].split("-");Te=new Date(Ze,ct-1,xt)}else Te=new Date(he);if(!Te||isNaN(Te.getTime()))return typeof he=="object"?"RECENT":String(he);const Me=String(Te.getDate()).padStart(2,"0"),Pe=String(Te.getMonth()+1).padStart(2,"0"),ke=Te.getFullYear();return Z==="dd/mm/yyyy"?`${Me}/${Pe}/${ke}`:Z==="yyyy/mm/dd"?`${ke}/${Pe}/${Me}`:`${Pe}/${Me}/${ke}`};return _.jsx(cO.Provider,{value:{user:e,pins:d,isLoggedIn:n,loading:a,signup:K,login:Ce,logout:fe,addPin:ye,removePin:be,updatePin:it,updateUserProfile:$,ratePin:et,getAverageRating:ft,addReply:Oi,updateReply:Mi,blockUser:kn,setThreadNickname:we,hiddenPins:k,hidePin:oi,unhidePin:rn,clearHiddenPins:Kt,formatDate:ki,formatRelativeTime:hr,dateFormat:Z,setDateFormat:ne,mapMode:ee,setMapMode:de,distanceUnit:B,setDistanceUnit:V,threads:m,ratings:O,notifications:C,hasNewNotifications:j,markNotificationsAsRead:le,reportPin:Fe,isSuspended:qt,hasProbation:Wt,canStartNewThread:Mn,addNotification:dr,refreshUserData:Ve,visiblePinIds:q,setVisiblePinIds:z,activeFilters:H,setActiveFilters:Re,subscribeToThread:W,markThreadAsRead:Wn,resetPassword:he=>q4(Sa,he)},children:i})},Yo=()=>P.useContext(cO),ac=({onAddClick:i,showAddButton:e})=>{const{hasNewNotifications:t}=Yo(),n=Ya(),r=a=>!!(n.pathname===a||a==="/messages"&&n.pathname.startsWith("/browse/")&&n.state?.fromMessages||a==="/browse"&&n.pathname.startsWith("/browse/")&&!n.state?.fromMessages);return _.jsxs("nav",{className:"bottom-nav",children:[_.jsxs(Lf,{to:"/map",className:r("/map")?"nav-item active":"nav-item",children:[_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[_.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.08 16.19 7 11.88 7 9z"}),_.jsx("circle",{cx:"12",cy:"9",r:"2.5"})]}),_.jsx("span",{className:"nav-label",children:"Map"})]}),_.jsxs(Lf,{to:"/browse",className:r("/browse")?"nav-item active":"nav-item",children:[_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h10V7H7v3zm0 4h10v-3H7v3zm0 4h10v-3H7v3z"})}),_.jsx("span",{className:"nav-label",children:"Browse"})]}),e&&_.jsx("div",{className:"nav-fab-container",children:_.jsx("button",{className:"nav-fab-btn",onClick:()=>{console.log("MMC DEBUG: + Button clicked in BottomNav"),i()},children:_.jsx("div",{className:"cyan-fab-circle",children:_.jsx("span",{className:"fab-plus",children:"+"})})})}),_.jsxs(Lf,{to:"/messages",className:r("/messages")?"nav-item active":"nav-item",children:[_.jsxs("div",{className:"nav-icon-wrapper",children:[_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"})}),t&&_.jsx("div",{className:"nav-notification",children:"!"})]}),_.jsx("span",{className:"nav-label",children:"Messages"})]}),_.jsxs(Lf,{to:"/account",className:r("/account")?"nav-item active":"nav-item",children:[_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})}),_.jsx("span",{className:"nav-label",children:"Account"})]})]})},t0=vh("Geolocation",{web:()=>SE(()=>import("./web-D2fmwutw.js"),[]).then(i=>new i.GeolocationWeb)});function uO(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=uO(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function bi(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=uO(i))&&(n&&(n+=" "),n+=e);return n}const dO=6048e5,p9=864e5,xy=6e4,Cy=36e5,m9=1e3,RI=Symbol.for("constructDateFrom");function mn(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&RI in i?i[RI](e):i instanceof Date?new i.constructor(e):new Date(e)}function Je(i,e){return mn(e||i,i)}function ea(i,e,t){const n=Je(i,t?.in);return isNaN(e)?mn(t?.in||i,NaN):(e&&n.setDate(n.getDate()+e),n)}function ra(i,e,t){const n=Je(i,t?.in);if(isNaN(e))return mn(i,NaN);if(!e)return n;const r=n.getDate(),a=mn(i,n.getTime());a.setMonth(n.getMonth()+e+1,0);const c=a.getDate();return r>=c?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function hO(i,e,t){return mn(i,+Je(i)+e)}function g9(i,e,t){return hO(i,e*Cy)}let _9={};function Lu(){return _9}function Bo(i,e){const t=Lu(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Je(i,e?.in),a=r.getDay(),c=(a<n?7:0)+a-n;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function uh(i,e){return Bo(i,{...e,weekStartsOn:1})}function fO(i,e){const t=Je(i,e?.in),n=t.getFullYear(),r=mn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=uh(r),c=mn(t,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const d=uh(c);return t.getTime()>=a.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function D_(i){const e=Je(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function Go(i,...e){const t=mn.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Du(i,e){const t=Je(i,e?.in);return t.setHours(0,0,0,0),t}function dh(i,e,t){const[n,r]=Go(t?.in,i,e),a=Du(n),c=Du(r),d=+a-D_(a),p=+c-D_(c);return Math.round((d-p)/p9)}function y9(i,e){const t=fO(i,e),n=mn(i,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),uh(n)}function Tp(i,e,t){const n=Je(i,t?.in);return n.setTime(n.getTime()+e*xy),n}function RE(i,e,t){return ra(i,e*3,t)}function v9(i,e,t){return hO(i,e*1e3)}function R_(i,e,t){return ea(i,e*7,t)}function ta(i,e,t){return ra(i,e*12,t)}function PI(i,e){let t,n=e?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=mn.bind(null,r));const a=Je(r,n);(!t||t<a||isNaN(+a))&&(t=a)}),mn(n,t||NaN)}function OI(i,e){let t,n=e?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=mn.bind(null,r));const a=Je(r,n);(!t||t>a||isNaN(+a))&&(t=a)}),mn(n,t||NaN)}function w9(i,e,t){const[n,r]=Go(t?.in,i,e);return+Du(n)==+Du(r)}function Va(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function hh(i){return!(!Va(i)&&typeof i!="number"||isNaN(+Je(i)))}function P_(i,e,t){const[n,r]=Go(t?.in,i,e),a=n.getFullYear()-r.getFullYear(),c=n.getMonth()-r.getMonth();return a*12+c}function Gl(i,e){const t=Je(i,e?.in);return Math.trunc(t.getMonth()/3)+1}function O_(i,e,t){const[n,r]=Go(t?.in,i,e),a=n.getFullYear()-r.getFullYear(),c=Gl(n)-Gl(r);return a*4+c}function M_(i,e,t){const[n,r]=Go(t?.in,i,e);return n.getFullYear()-r.getFullYear()}function b9(i,e,t){const[n,r]=Go(t?.in,i,e),a=MI(n,r),c=Math.abs(dh(n,r));n.setDate(n.getDate()-a*c);const d=+(MI(n,r)===-a),p=a*(c-d);return p===0?0:p}function MI(i,e){const t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function pO(i,e){const t=Je(i,e?.in);return t.setHours(23,59,59,999),t}function mO(i,e){const t=Je(i,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function ib(i,e){const t=Je(i,e?.in),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function gO(i,e){const t=Je(i,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function _O(i,e){const t=Je(i,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Ay(i,e){const t=Je(i,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function E9(i,e){const t=Lu(),n=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Je(i,e?.in),a=r.getDay(),c=(a<n?-7:0)+6-(a-n);return r.setDate(r.getDate()+c),r.setHours(23,59,59,999),r}const T9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S9=(i,e,t)=>{let n;const r=T9[i];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function n0(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const x9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},A9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},I9={date:n0({formats:x9,defaultWidth:"full"}),time:n0({formats:C9,defaultWidth:"full"}),dateTime:n0({formats:A9,defaultWidth:"full"})},N9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},D9=(i,e,t,n)=>N9[i];function Pf(i){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let r;if(n==="formatting"&&i.formattingValues){const c=i.defaultFormattingWidth||i.defaultWidth,d=t?.width?String(t.width):c;r=i.formattingValues[d]||i.formattingValues[c]}else{const c=i.defaultWidth,d=t?.width?String(t.width):i.defaultWidth;r=i.values[d]||i.values[c]}const a=i.argumentCallback?i.argumentCallback(e):e;return r[a]}}const R9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},P9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},O9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},k9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},L9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},j9=(i,e)=>{const t=Number(i),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},V9={ordinalNumber:j9,era:Pf({values:R9,defaultWidth:"wide"}),quarter:Pf({values:P9,defaultWidth:"wide",argumentCallback:i=>i-1}),month:Pf({values:O9,defaultWidth:"wide"}),day:Pf({values:M9,defaultWidth:"wide"}),dayPeriod:Pf({values:k9,defaultWidth:"wide",formattingValues:L9,defaultFormattingWidth:"wide"})};function Of(i){return(e,t={})=>{const n=t.width,r=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],a=e.match(r);if(!a)return null;const c=a[0],d=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],p=Array.isArray(d)?B9(d,b=>b.test(c)):U9(d,b=>b.test(c));let m;m=i.valueCallback?i.valueCallback(p):p,m=t.valueCallback?t.valueCallback(m):m;const w=e.slice(c.length);return{value:m,rest:w}}}function U9(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function B9(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function z9(i){return(e,t={})=>{const n=e.match(i.matchPattern);if(!n)return null;const r=n[0],a=e.match(i.parsePattern);if(!a)return null;let c=i.valueCallback?i.valueCallback(a[0]):a[0];c=t.valueCallback?t.valueCallback(c):c;const d=e.slice(r.length);return{value:c,rest:d}}}const F9=/^(\d+)(th|st|nd|rd)?/i,H9=/\d+/i,q9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y9={any:[/^b/i,/^(a|c)/i]},G9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},W9={any:[/1/i,/2/i,/3/i,/4/i]},K9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Q9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},X9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},J9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eH={ordinalNumber:z9({matchPattern:F9,parsePattern:H9,valueCallback:i=>parseInt(i,10)}),era:Of({matchPatterns:q9,defaultMatchWidth:"wide",parsePatterns:Y9,defaultParseWidth:"any"}),quarter:Of({matchPatterns:G9,defaultMatchWidth:"wide",parsePatterns:W9,defaultParseWidth:"any",valueCallback:i=>i+1}),month:Of({matchPatterns:K9,defaultMatchWidth:"wide",parsePatterns:Z9,defaultParseWidth:"any"}),day:Of({matchPatterns:$9,defaultMatchWidth:"wide",parsePatterns:Q9,defaultParseWidth:"any"}),dayPeriod:Of({matchPatterns:X9,defaultMatchWidth:"any",parsePatterns:J9,defaultParseWidth:"any"})},yO={code:"en-US",formatDistance:S9,formatLong:I9,formatRelative:D9,localize:V9,match:eH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tH(i,e){const t=Je(i,e?.in);return dh(t,Ay(t))+1}function PE(i,e){const t=Je(i,e?.in),n=+uh(t)-+y9(t);return Math.round(n/dO)+1}function OE(i,e){const t=Je(i,e?.in),n=t.getFullYear(),r=Lu(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=mn(e?.in||i,0);c.setFullYear(n+1,0,a),c.setHours(0,0,0,0);const d=Bo(c,e),p=mn(e?.in||i,0);p.setFullYear(n,0,a),p.setHours(0,0,0,0);const m=Bo(p,e);return+t>=+d?n+1:+t>=+m?n:n-1}function nH(i,e){const t=Lu(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=OE(i,e),a=mn(e?.in||i,0);return a.setFullYear(r,0,n),a.setHours(0,0,0,0),Bo(a,e)}function vO(i,e){const t=Je(i,e?.in),n=+Bo(t,e)-+nH(t,e);return Math.round(n/dO)+1}function hn(i,e){const t=i<0?"-":"",n=Math.abs(i).toString().padStart(e,"0");return t+n}const kl={y(i,e){const t=i.getFullYear(),n=t>0?t:1-t;return hn(e==="yy"?n%100:n,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):hn(t+1,2)},d(i,e){return hn(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];default:return t==="am"?"a.m.":"p.m."}},h(i,e){return hn(i.getHours()%12||12,e.length)},H(i,e){return hn(i.getHours(),e.length)},m(i,e){return hn(i.getMinutes(),e.length)},s(i,e){return hn(i.getSeconds(),e.length)},S(i,e){const t=e.length,n=i.getMilliseconds(),r=Math.trunc(n*Math.pow(10,t-3));return hn(r,e.length)}},Td={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kI={G:function(i,e,t){const n=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});default:return t.era(n,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const n=i.getFullYear(),r=n>0?n:1-n;return t.ordinalNumber(r,{unit:"year"})}return kl.y(i,e)},Y:function(i,e,t,n){const r=OE(i,n),a=r>0?r:1-r;if(e==="YY"){const c=a%100;return hn(c,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):hn(a,e.length)},R:function(i,e){const t=fO(i);return hn(t,e.length)},u:function(i,e){const t=i.getFullYear();return hn(t,e.length)},Q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return hn(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return hn(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(i,e,t){const n=i.getMonth();switch(e){case"M":case"MM":return kl.M(i,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(i,e,t){const n=i.getMonth();switch(e){case"L":return String(n+1);case"LL":return hn(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(i,e,t,n){const r=vO(i,n);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):hn(r,e.length)},I:function(i,e,t){const n=PE(i);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):hn(n,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):kl.d(i,e)},D:function(i,e,t){const n=tH(i);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):hn(n,e.length)},E:function(i,e,t){const n=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(i,e,t,n){const r=i.getDay(),a=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return hn(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(i,e,t,n){const r=i.getDay(),a=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return hn(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(i,e,t){const n=i.getDay(),r=n===0?7:n;switch(e){case"i":return String(r);case"ii":return hn(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(i,e,t){const r=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(i,e,t){const n=i.getHours();let r;switch(n===12?r=Td.noon:n===0?r=Td.midnight:r=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(i,e,t){const n=i.getHours();let r;switch(n>=17?r=Td.evening:n>=12?r=Td.afternoon:n>=4?r=Td.morning:r=Td.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let n=i.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return kl.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):kl.H(i,e)},K:function(i,e,t){const n=i.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):hn(n,e.length)},k:function(i,e,t){let n=i.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):hn(n,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):kl.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):kl.s(i,e)},S:function(i,e){return kl.S(i,e)},X:function(i,e,t){const n=i.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return jI(n);case"XXXX":case"XX":return Qc(n);default:return Qc(n,":")}},x:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"x":return jI(n);case"xxxx":case"xx":return Qc(n);default:return Qc(n,":")}},O:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+LI(n,":");default:return"GMT"+Qc(n,":")}},z:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+LI(n,":");default:return"GMT"+Qc(n,":")}},t:function(i,e,t){const n=Math.trunc(+i/1e3);return hn(n,e.length)},T:function(i,e,t){return hn(+i,e.length)}};function LI(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),r=Math.trunc(n/60),a=n%60;return a===0?t+String(r):t+String(r)+e+hn(a,2)}function jI(i,e){return i%60===0?(i>0?"-":"+")+hn(Math.abs(i)/60,2):Qc(i,e)}function Qc(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),r=hn(Math.trunc(n/60),2),a=hn(n%60,2);return t+r+e+a}const VI=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},wO=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},iH=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],n=t[1],r=t[2];if(!r)return VI(i,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",VI(n,e)).replace("{{time}}",wO(r,e))},rb={p:wO,P:iH},rH=/^D+$/,sH=/^Y+$/,aH=["D","DD","YY","YYYY"];function oH(i){return rH.test(i)}function lH(i){return sH.test(i)}function cH(i,e,t){const n=uH(i,e,t);if(console.warn(n),aH.includes(i))throw new RangeError(n)}function uH(i,e,t){const n=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fH=/^'([^]*?)'?$/,pH=/''/g,mH=/[a-zA-Z]/;function UI(i,e,t){const n=Lu(),r=t?.locale??n.locale??yO,a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,c=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,d=Je(i,t?.in);if(!hh(d))throw new RangeError("Invalid time value");let p=e.match(hH).map(w=>{const b=w[0];if(b==="p"||b==="P"){const S=rb[b];return S(w,r.formatLong)}return w}).join("").match(dH).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const b=w[0];if(b==="'")return{isToken:!1,value:gH(w)};if(kI[b])return{isToken:!0,value:w};if(b.match(mH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:w}});r.localize.preprocessor&&(p=r.localize.preprocessor(d,p));const m={firstWeekContainsDate:a,weekStartsOn:c,locale:r};return p.map(w=>{if(!w.isToken)return w.value;const b=w.value;(!t?.useAdditionalWeekYearTokens&&lH(b)||!t?.useAdditionalDayOfYearTokens&&oH(b))&&cH(b,e,String(i));const S=kI[b[0]];return S(d,b,r.localize,m)}).join("")}function gH(i){const e=i.match(fH);return e?e[1].replace(pH,"'"):i}function BI(i,e){return Je(i,e?.in).getDate()}function _H(i,e){return Je(i,e?.in).getDay()}function yH(i,e){const t=Je(i,e?.in),n=t.getFullYear(),r=t.getMonth(),a=mn(t,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function vH(){return Object.assign({},Lu())}function sr(i,e){return Je(i,e?.in).getHours()}function wH(i,e){const t=Je(i,e?.in).getDay();return t===0?7:t}function ar(i,e){return Je(i,e?.in).getMinutes()}function Gr(i,e){return Je(i,e?.in).getMonth()}function Jl(i){return Je(i).getSeconds()}function sb(i){return+Je(i)}function Dt(i,e){return Je(i,e?.in).getFullYear()}function Ro(i,e){return+Je(i)>+Je(e)}function Oa(i,e){return+Je(i)<+Je(e)}function bH(i,e){return+Je(i)==+Je(e)}function EH(i,e){const t=TH(e)?new e(0):mn(e,0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}function TH(i){return typeof i=="function"&&i.prototype?.constructor===i}const SH=10;class bO{subPriority=0;validate(e,t){return!0}}class xH extends bO{constructor(e,t,n,r,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class CH extends bO{priority=SH;subPriority=-1;constructor(e,t){super(),this.context=e||(n=>mn(t,n))}set(e,t){return t.timestampIsSet?e:mn(e,EH(e,this.context))}}class nn{run(e,t,n,r){const a=this.parse(e,t,n,r);return a?{setter:new xH(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}class AH extends nn{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const si={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Na={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ai(i,e){return i&&{value:e(i.value),rest:i.rest}}function qn(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Da(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,r=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:n*(r*Cy+a*xy+c*m9),rest:e.slice(t[0].length)}}function EO(i){return qn(si.anyDigitsSigned,i)}function Jn(i,e){switch(i){case 1:return qn(si.singleDigit,e);case 2:return qn(si.twoDigits,e);case 3:return qn(si.threeDigits,e);case 4:return qn(si.fourDigits,e);default:return qn(new RegExp("^\\d{1,"+i+"}"),e)}}function k_(i,e){switch(i){case 1:return qn(si.singleDigitSigned,e);case 2:return qn(si.twoDigitsSigned,e);case 3:return qn(si.threeDigitsSigned,e);case 4:return qn(si.fourDigitsSigned,e);default:return qn(new RegExp("^-?\\d{1,"+i+"}"),e)}}function ME(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function TO(i,e){const t=e>0,n=t?e:1-e;let r;if(n<=50)r=i||100;else{const a=n+50,c=Math.trunc(a/100)*100,d=i>=a%100;r=i+c-(d?100:0)}return t?r:1-r}function SO(i){return i%400===0||i%4===0&&i%100!==0}class IH extends nn{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const r=a=>({year:a,isTwoDigitYear:t==="yy"});switch(t){case"y":return ai(Jn(4,e),r);case"yo":return ai(n.ordinalNumber(e,{unit:"year"}),r);default:return ai(Jn(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const c=TO(n.year,r);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const a=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class NH extends nn{priority=130;parse(e,t,n){const r=a=>({year:a,isTwoDigitYear:t==="YY"});switch(t){case"Y":return ai(Jn(4,e),r);case"Yo":return ai(n.ordinalNumber(e,{unit:"year"}),r);default:return ai(Jn(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const a=OE(e,r);if(n.isTwoDigitYear){const d=TO(n.year,a);return e.setFullYear(d,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Bo(e,r)}const c=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(c,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Bo(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class DH extends nn{priority=130;parse(e,t){return k_(t==="R"?4:t.length,e)}set(e,t,n){const r=mn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),uh(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class RH extends nn{priority=130;parse(e,t){return k_(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class PH extends nn{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return Jn(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class OH extends nn{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return Jn(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class MH extends nn{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const r=a=>a-1;switch(t){case"M":return ai(qn(si.month,e),r);case"MM":return ai(Jn(2,e),r);case"Mo":return ai(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class kH extends nn{priority=110;parse(e,t,n){const r=a=>a-1;switch(t){case"L":return ai(qn(si.month,e),r);case"LL":return ai(Jn(2,e),r);case"Lo":return ai(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function LH(i,e,t){const n=Je(i,t?.in),r=vO(n,t)-e;return n.setDate(n.getDate()-r*7),Je(n,t?.in)}class jH extends nn{priority=100;parse(e,t,n){switch(t){case"w":return qn(si.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Jn(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return Bo(LH(e,n,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function VH(i,e,t){const n=Je(i,t?.in),r=PE(n,t)-e;return n.setDate(n.getDate()-r*7),n}class UH extends nn{priority=100;parse(e,t,n){switch(t){case"I":return qn(si.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Jn(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return uh(VH(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const BH=[31,28,31,30,31,30,31,31,30,31,30,31],zH=[31,29,31,30,31,30,31,31,30,31,30,31];class FH extends nn{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return qn(si.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Jn(t.length,e)}}validate(e,t){const n=e.getFullYear(),r=SO(n),a=e.getMonth();return r?t>=1&&t<=zH[a]:t>=1&&t<=BH[a]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class HH extends nn{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return qn(si.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Jn(t.length,e)}}validate(e,t){const n=e.getFullYear();return SO(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function kE(i,e,t){const n=Lu(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Je(i,t?.in),c=a.getDay(),p=(e%7+7)%7,m=7-r,w=e<0||e>6?e-(c+m)%7:(p+m)%7-(c+m)%7;return ea(a,w,t)}class qH extends nn{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=kE(e,n,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class YH extends nn{priority=90;parse(e,t,n,r){const a=c=>{const d=Math.floor((c-1)/7)*7;return(c+r.weekStartsOn+6)%7+d};switch(t){case"e":case"ee":return ai(Jn(t.length,e),a);case"eo":return ai(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=kE(e,n,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class GH extends nn{priority=90;parse(e,t,n,r){const a=c=>{const d=Math.floor((c-1)/7)*7;return(c+r.weekStartsOn+6)%7+d};switch(t){case"c":case"cc":return ai(Jn(t.length,e),a);case"co":return ai(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=kE(e,n,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function WH(i,e,t){const n=Je(i,t?.in),r=wH(n,t),a=e-r;return ea(n,a,t)}class KH extends nn{priority=90;parse(e,t,n){const r=a=>a===0?7:a;switch(t){case"i":case"ii":return Jn(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return ai(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return ai(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ai(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return ai(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=WH(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class ZH extends nn{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(ME(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class $H extends nn{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(ME(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class QH extends nn{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(ME(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class XH extends nn{priority=70;parse(e,t,n){switch(t){case"h":return qn(si.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Jn(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):!r&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class JH extends nn{priority=70;parse(e,t,n){switch(t){case"H":return qn(si.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Jn(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class e8 extends nn{priority=70;parse(e,t,n){switch(t){case"K":return qn(si.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Jn(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class t8 extends nn{priority=70;parse(e,t,n){switch(t){case"k":return qn(si.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Jn(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class n8 extends nn{priority=60;parse(e,t,n){switch(t){case"m":return qn(si.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Jn(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class i8 extends nn{priority=50;parse(e,t,n){switch(t){case"s":return qn(si.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Jn(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class r8 extends nn{priority=30;parse(e,t){const n=r=>Math.trunc(r*Math.pow(10,-t.length+3));return ai(Jn(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class s8 extends nn{priority=10;parse(e,t){switch(t){case"X":return Da(Na.basicOptionalMinutes,e);case"XX":return Da(Na.basic,e);case"XXXX":return Da(Na.basicOptionalSeconds,e);case"XXXXX":return Da(Na.extendedOptionalSeconds,e);default:return Da(Na.extended,e)}}set(e,t,n){return t.timestampIsSet?e:mn(e,e.getTime()-D_(e)-n)}incompatibleTokens=["t","T","x"]}class a8 extends nn{priority=10;parse(e,t){switch(t){case"x":return Da(Na.basicOptionalMinutes,e);case"xx":return Da(Na.basic,e);case"xxxx":return Da(Na.basicOptionalSeconds,e);case"xxxxx":return Da(Na.extendedOptionalSeconds,e);default:return Da(Na.extended,e)}}set(e,t,n){return t.timestampIsSet?e:mn(e,e.getTime()-D_(e)-n)}incompatibleTokens=["t","T","X"]}class o8 extends nn{priority=40;parse(e){return EO(e)}set(e,t,n){return[mn(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class l8 extends nn{priority=20;parse(e){return EO(e)}set(e,t,n){return[mn(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const c8={G:new AH,y:new IH,Y:new NH,R:new DH,u:new RH,Q:new PH,q:new OH,M:new MH,L:new kH,w:new jH,I:new UH,d:new FH,D:new HH,E:new qH,e:new YH,c:new GH,i:new KH,a:new ZH,b:new $H,B:new QH,h:new XH,H:new JH,K:new e8,k:new t8,m:new n8,s:new i8,S:new r8,X:new s8,x:new a8,t:new o8,T:new l8},u8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,d8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h8=/^'([^]*?)'?$/,f8=/''/g,p8=/\S/,m8=/[a-zA-Z]/;function g8(i,e,t,n){const r=()=>mn(n?.in||t,NaN),a=vH(),c=n?.locale??a.locale??yO,d=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,p=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!e)return i?r():Je(t,n?.in);const m={firstWeekContainsDate:d,weekStartsOn:p,locale:c},w=[new CH(n?.in,t)],b=e.match(d8).map(R=>{const k=R[0];if(k in rb){const G=rb[k];return G(R,c.formatLong)}return R}).join("").match(u8),S=[];for(let R of b){const k=R[0],G=c8[k];if(G){const{incompatibleTokens:Z}=G;if(Array.isArray(Z)){const ee=S.find(de=>Z.includes(de.token)||de.token===k);if(ee)throw new RangeError(`The format string mustn't contain \`${ee.fullToken}\` and \`${R}\` at the same time`)}else if(G.incompatibleTokens==="*"&&S.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);S.push({token:k,fullToken:R});const ne=G.run(i,R,c.match,m);if(!ne)return r();w.push(ne.setter),i=ne.rest}else{if(k.match(m8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");if(R==="''"?R="'":k==="'"&&(R=_8(R)),i.indexOf(R)===0)i=i.slice(R.length);else return r()}}if(i.length>0&&p8.test(i))return r();const C=w.map(R=>R.priority).sort((R,k)=>k-R).filter((R,k,G)=>G.indexOf(R)===k).map(R=>w.filter(k=>k.priority===R).sort((k,G)=>G.subPriority-k.subPriority)).map(R=>R[0]);let N=Je(t,n?.in);if(isNaN(+N))return r();const O={};for(const R of C){if(!R.validate(N,m))return r();const k=R.set(N,O,m);Array.isArray(k)?(N=k[0],Object.assign(O,k[1])):N=k}return N}function _8(i){return i.match(h8)[1].replace(f8,"'")}function y8(i,e,t){const[n,r]=Go(t?.in,i,e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function v8(i,e,t){const[n,r]=Go(t?.in,i,e);return+ib(n)==+ib(r)}function w8(i,e,t){const[n,r]=Go(t?.in,i,e);return n.getFullYear()===r.getFullYear()}function Sp(i,e,t){const n=+Je(i,t?.in),[r,a]=[+Je(e.start,t?.in),+Je(e.end,t?.in)].sort((c,d)=>c-d);return n>=r&&n<=a}function b8(i,e,t){return ea(i,-1,t)}function E8(i,e){const t=()=>mn(e?.in,NaN),r=C8(i);let a;if(r.date){const m=A8(r.date,2);a=I8(m.restDateString,m.year)}if(!a||isNaN(+a))return t();const c=+a;let d=0,p;if(r.time&&(d=N8(r.time),isNaN(d)))return t();if(r.timezone){if(p=D8(r.timezone),isNaN(p))return t()}else{const m=new Date(c+d),w=Je(0,e?.in);return w.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),w.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),w}return Je(c+d+p,e?.in)}const mg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},T8=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S8=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,x8=/^([+-])(\d{2})(?::?(\d{2}))?$/;function C8(i){const e={},t=i.split(mg.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],mg.timeZoneDelimiter.test(e.date)&&(e.date=i.split(mg.timeZoneDelimiter)[0],n=i.substr(e.date.length,i.length))),n){const r=mg.timezone.exec(n);r?(e.time=n.replace(r[1],""),e.timezone=r[1]):e.time=n}return e}function A8(i,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=i.match(t);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?r:a*100,restDateString:i.slice((n[1]||n[2]).length)}}function I8(i,e){if(e===null)return new Date(NaN);const t=i.match(T8);if(!t)return new Date(NaN);const n=!!t[4],r=Mf(t[1]),a=Mf(t[2])-1,c=Mf(t[3]),d=Mf(t[4]),p=Mf(t[5])-1;if(n)return k8(e,d,p)?R8(e,d,p):new Date(NaN);{const m=new Date(0);return!O8(e,a,c)||!M8(e,r)?new Date(NaN):(m.setUTCFullYear(e,a,Math.max(r,c)),m)}}function Mf(i){return i?parseInt(i):1}function N8(i){const e=i.match(S8);if(!e)return NaN;const t=i0(e[1]),n=i0(e[2]),r=i0(e[3]);return L8(t,n,r)?t*Cy+n*xy+r*1e3:NaN}function i0(i){return i&&parseFloat(i.replace(",","."))||0}function D8(i){if(i==="Z")return 0;const e=i.match(x8);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return j8(n,r)?t*(n*Cy+r*xy):NaN}function R8(i,e,t){const n=new Date(0);n.setUTCFullYear(i,0,4);const r=n.getUTCDay()||7,a=(e-1)*7+t+1-r;return n.setUTCDate(n.getUTCDate()+a),n}const P8=[31,null,31,30,31,30,31,31,30,31,30,31];function xO(i){return i%400===0||i%4===0&&i%100!==0}function O8(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(P8[e]||(xO(i)?29:28))}function M8(i,e){return e>=1&&e<=(xO(i)?366:365)}function k8(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function L8(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function j8(i,e){return e>=0&&e<=59}function ls(i,e,t){const n=Je(i,t?.in),r=n.getFullYear(),a=n.getDate(),c=mn(i,0);c.setFullYear(r,e,15),c.setHours(0,0,0,0);const d=yH(c);return n.setMonth(e,Math.min(a,d)),n}function Hg(i,e,t){const n=Je(i,t?.in);return n.setHours(e),n}function qg(i,e,t){const n=Je(i,t?.in);return n.setMinutes(e),n}function Od(i,e,t){const n=Je(i,t?.in),r=Math.trunc(n.getMonth()/3)+1,a=e-r;return ls(n,n.getMonth()+a*3)}function Yg(i,e,t){const n=Je(i,t?.in);return n.setSeconds(e),n}function Ca(i,e,t){const n=Je(i,t?.in);return isNaN(+n)?mn(i,NaN):(n.setFullYear(e),n)}function fu(i,e,t){return ra(i,-e,t)}function CO(i,e,t){return RE(i,-1,t)}function zI(i,e,t){return R_(i,-1,t)}function oc(i,e,t){return ta(i,-e,t)}function Iy(){return typeof window<"u"}function kh(i){return AO(i)?(i.nodeName||"").toLowerCase():"#document"}function ps(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Wa(i){var e;return(e=(AO(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function AO(i){return Iy()?i instanceof Node||i instanceof ps(i).Node:!1}function Er(i){return Iy()?i instanceof Element||i instanceof ps(i).Element:!1}function Ha(i){return Iy()?i instanceof HTMLElement||i instanceof ps(i).HTMLElement:!1}function FI(i){return!Iy()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof ps(i).ShadowRoot}const V8=new Set(["inline","contents"]);function Wp(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=ks(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!V8.has(r)}const U8=new Set(["table","td","th"]);function B8(i){return U8.has(kh(i))}const z8=[":popover-open",":modal"];function Ny(i){return z8.some(e=>{try{return i.matches(e)}catch{return!1}})}const F8=["transform","translate","scale","rotate","perspective"],H8=["transform","translate","scale","rotate","perspective","filter"],q8=["paint","layout","strict","content"];function LE(i){const e=jE(),t=Er(i)?ks(i):i;return F8.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||H8.some(n=>(t.willChange||"").includes(n))||q8.some(n=>(t.contain||"").includes(n))}function Y8(i){let e=lc(i);for(;Ha(e)&&!fh(e);){if(LE(e))return e;if(Ny(e))return null;e=lc(e)}return null}function jE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const G8=new Set(["html","body","#document"]);function fh(i){return G8.has(kh(i))}function ks(i){return ps(i).getComputedStyle(i)}function Dy(i){return Er(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function lc(i){if(kh(i)==="html")return i;const e=i.assignedSlot||i.parentNode||FI(i)&&i.host||Wa(i);return FI(e)?e.host:e}function IO(i){const e=lc(i);return fh(e)?i.ownerDocument?i.ownerDocument.body:i.body:Ha(e)&&Wp(e)?e:IO(e)}function xp(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=IO(i),a=r===((n=i.ownerDocument)==null?void 0:n.body),c=ps(r);if(a){const d=ab(c);return e.concat(c,c.visualViewport||[],Wp(r)?r:[],d&&t?xp(d):[])}return e.concat(r,xp(r,[],t))}function ab(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}const ph=Math.min,pu=Math.max,L_=Math.round,gg=Math.floor,Ua=i=>({x:i,y:i}),W8={left:"right",right:"left",bottom:"top",top:"bottom"},K8={start:"end",end:"start"};function Z8(i,e,t){return pu(i,ph(e,t))}function Ry(i,e){return typeof i=="function"?i(e):i}function mh(i){return i.split("-")[0]}function Kp(i){return i.split("-")[1]}function $8(i){return i==="x"?"y":"x"}function VE(i){return i==="y"?"height":"width"}const Q8=new Set(["top","bottom"]);function ou(i){return Q8.has(mh(i))?"y":"x"}function UE(i){return $8(ou(i))}function X8(i,e,t){t===void 0&&(t=!1);const n=Kp(i),r=UE(i),a=VE(r);let c=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=j_(c)),[c,j_(c)]}function J8(i){const e=j_(i);return[ob(i),e,ob(e)]}function ob(i){return i.replace(/start|end/g,e=>K8[e])}const HI=["left","right"],qI=["right","left"],eq=["top","bottom"],tq=["bottom","top"];function nq(i,e,t){switch(i){case"top":case"bottom":return t?e?qI:HI:e?HI:qI;case"left":case"right":return e?eq:tq;default:return[]}}function iq(i,e,t,n){const r=Kp(i);let a=nq(mh(i),t==="start",n);return r&&(a=a.map(c=>c+"-"+r),e&&(a=a.concat(a.map(ob)))),a}function j_(i){return i.replace(/left|right|bottom|top/g,e=>W8[e])}function rq(i){return{top:0,right:0,bottom:0,left:0,...i}}function NO(i){return typeof i!="number"?rq(i):{top:i,right:i,bottom:i,left:i}}function V_(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}var sq=typeof document<"u",aq=function(){},U_=sq?P.useLayoutEffect:aq;const oq={...E1},lq=oq.useInsertionEffect,cq=lq||(i=>i());function uq(i){const e=P.useRef(()=>{});return cq(()=>{e.current=i}),P.useCallback(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.current==null?void 0:e.current(...n)},[])}function YI(i,e,t){let{reference:n,floating:r}=i;const a=ou(e),c=UE(e),d=VE(c),p=mh(e),m=a==="y",w=n.x+n.width/2-r.width/2,b=n.y+n.height/2-r.height/2,S=n[d]/2-r[d]/2;let C;switch(p){case"top":C={x:w,y:n.y-r.height};break;case"bottom":C={x:w,y:n.y+n.height};break;case"right":C={x:n.x+n.width,y:b};break;case"left":C={x:n.x-r.width,y:b};break;default:C={x:n.x,y:n.y}}switch(Kp(e)){case"start":C[c]-=S*(t&&m?-1:1);break;case"end":C[c]+=S*(t&&m?-1:1);break}return C}async function dq(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:a,rects:c,elements:d,strategy:p}=i,{boundary:m="clippingAncestors",rootBoundary:w="viewport",elementContext:b="floating",altBoundary:S=!1,padding:C=0}=Ry(e,i),N=NO(C),R=d[S?b==="floating"?"reference":"floating":b],k=V_(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(R)))==null||t?R:R.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:m,rootBoundary:w,strategy:p})),G=b==="floating"?{x:n,y:r,width:c.floating.width,height:c.floating.height}:c.reference,Z=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),ne=await(a.isElement==null?void 0:a.isElement(Z))?await(a.getScale==null?void 0:a.getScale(Z))||{x:1,y:1}:{x:1,y:1},ee=V_(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:G,offsetParent:Z,strategy:p}):G);return{top:(k.top-ee.top+N.top)/ne.y,bottom:(ee.bottom-k.bottom+N.bottom)/ne.y,left:(k.left-ee.left+N.left)/ne.x,right:(ee.right-k.right+N.right)/ne.x}}const hq=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:a=[],platform:c}=t,d=a.filter(Boolean),p=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:i,floating:e,strategy:r}),{x:w,y:b}=YI(m,n,p),S=n,C={},N=0;for(let R=0;R<d.length;R++){var O;const{name:k,fn:G}=d[R],{x:Z,y:ne,data:ee,reset:de}=await G({x:w,y:b,initialPlacement:n,placement:S,strategy:r,middlewareData:C,rects:m,platform:{...c,detectOverflow:(O=c.detectOverflow)!=null?O:dq},elements:{reference:i,floating:e}});w=Z??w,b=ne??b,C={...C,[k]:{...C[k],...ee}},de&&N<=50&&(N++,typeof de=="object"&&(de.placement&&(S=de.placement),de.rects&&(m=de.rects===!0?await c.getElementRects({reference:i,floating:e,strategy:r}):de.rects),{x:w,y:b}=YI(m,S,p)),R=-1)}return{x:w,y:b,placement:S,strategy:r,middlewareData:C}},fq=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:a,platform:c,elements:d,middlewareData:p}=e,{element:m,padding:w=0}=Ry(i,e)||{};if(m==null)return{};const b=NO(w),S={x:t,y:n},C=UE(r),N=VE(C),O=await c.getDimensions(m),R=C==="y",k=R?"top":"left",G=R?"bottom":"right",Z=R?"clientHeight":"clientWidth",ne=a.reference[N]+a.reference[C]-S[C]-a.floating[N],ee=S[C]-a.reference[C],de=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let B=de?de[Z]:0;(!B||!await(c.isElement==null?void 0:c.isElement(de)))&&(B=d.floating[Z]||a.floating[N]);const V=ne/2-ee/2,j=B/2-O[N]/2-1,F=ph(b[k],j),q=ph(b[G],j),z=F,H=B-O[N]-q,Re=B/2-O[N]/2+V,Ve=Z8(z,Re,H),W=!p.arrow&&Kp(r)!=null&&Re!==Ve&&a.reference[N]/2-(Re<z?F:q)-O[N]/2<0,le=W?Re<z?Re-z:Re-H:0;return{[C]:S[C]+le,data:{[C]:Ve,centerOffset:Re-Ve-le,...W&&{alignmentOffset:le}},reset:W}}}),pq=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:a,rects:c,initialPlacement:d,platform:p,elements:m}=e,{mainAxis:w=!0,crossAxis:b=!0,fallbackPlacements:S,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:O=!0,...R}=Ry(i,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const k=mh(r),G=ou(d),Z=mh(d)===d,ne=await(p.isRTL==null?void 0:p.isRTL(m.floating)),ee=S||(Z||!O?[j_(d)]:J8(d)),de=N!=="none";!S&&de&&ee.push(...iq(d,O,N,ne));const B=[d,...ee],V=await p.detectOverflow(e,R),j=[];let F=((n=a.flip)==null?void 0:n.overflows)||[];if(w&&j.push(V[k]),b){const Re=X8(r,c,ne);j.push(V[Re[0]],V[Re[1]])}if(F=[...F,{placement:r,overflows:j}],!j.every(Re=>Re<=0)){var q,z;const Re=(((q=a.flip)==null?void 0:q.index)||0)+1,Ve=B[Re];if(Ve&&(!(b==="alignment"?G!==ou(Ve):!1)||F.every(se=>ou(se.placement)===G?se.overflows[0]>0:!0)))return{data:{index:Re,overflows:F},reset:{placement:Ve}};let W=(z=F.filter(le=>le.overflows[0]<=0).sort((le,se)=>le.overflows[1]-se.overflows[1])[0])==null?void 0:z.placement;if(!W)switch(C){case"bestFit":{var H;const le=(H=F.filter(se=>{if(de){const je=ou(se.placement);return je===G||je==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(je=>je>0).reduce((je,Ce)=>je+Ce,0)]).sort((se,je)=>se[1]-je[1])[0])==null?void 0:H[0];le&&(W=le);break}case"initialPlacement":W=d;break}if(r!==W)return{reset:{placement:W}}}return{}}}},mq=new Set(["left","top"]);async function gq(i,e){const{placement:t,platform:n,elements:r}=i,a=await(n.isRTL==null?void 0:n.isRTL(r.floating)),c=mh(t),d=Kp(t),p=ou(t)==="y",m=mq.has(c)?-1:1,w=a&&p?-1:1,b=Ry(e,i);let{mainAxis:S,crossAxis:C,alignmentAxis:N}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return d&&typeof N=="number"&&(C=d==="end"?N*-1:N),p?{x:C*w,y:S*m}:{x:S*m,y:C*w}}const _q=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:a,placement:c,middlewareData:d}=e,p=await gq(e,i);return c===((t=d.offset)==null?void 0:t.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:r+p.x,y:a+p.y,data:{...p,placement:c}}}}};function DO(i){const e=ks(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Ha(i),a=r?i.offsetWidth:t,c=r?i.offsetHeight:n,d=L_(t)!==a||L_(n)!==c;return d&&(t=a,n=c),{width:t,height:n,$:d}}function BE(i){return Er(i)?i:i.contextElement}function Hd(i){const e=BE(i);if(!Ha(e))return Ua(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:a}=DO(e);let c=(a?L_(t.width):t.width)/n,d=(a?L_(t.height):t.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const yq=Ua(0);function RO(i){const e=ps(i);return!jE()||!e.visualViewport?yq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vq(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==ps(i)?!1:e}function Ru(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),a=BE(i);let c=Ua(1);e&&(n?Er(n)&&(c=Hd(n)):c=Hd(i));const d=vq(a,t,n)?RO(a):Ua(0);let p=(r.left+d.x)/c.x,m=(r.top+d.y)/c.y,w=r.width/c.x,b=r.height/c.y;if(a){const S=ps(a),C=n&&Er(n)?ps(n):n;let N=S,O=ab(N);for(;O&&n&&C!==N;){const R=Hd(O),k=O.getBoundingClientRect(),G=ks(O),Z=k.left+(O.clientLeft+parseFloat(G.paddingLeft))*R.x,ne=k.top+(O.clientTop+parseFloat(G.paddingTop))*R.y;p*=R.x,m*=R.y,w*=R.x,b*=R.y,p+=Z,m+=ne,N=ps(O),O=ab(N)}}return V_({width:w,height:b,x:p,y:m})}function Py(i,e){const t=Dy(i).scrollLeft;return e?e.left+t:Ru(Wa(i)).left+t}function PO(i,e){const t=i.getBoundingClientRect(),n=t.left+e.scrollLeft-Py(i,t),r=t.top+e.scrollTop;return{x:n,y:r}}function wq(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const a=r==="fixed",c=Wa(n),d=e?Ny(e.floating):!1;if(n===c||d&&a)return t;let p={scrollLeft:0,scrollTop:0},m=Ua(1);const w=Ua(0),b=Ha(n);if((b||!b&&!a)&&((kh(n)!=="body"||Wp(c))&&(p=Dy(n)),Ha(n))){const C=Ru(n);m=Hd(n),w.x=C.x+n.clientLeft,w.y=C.y+n.clientTop}const S=c&&!b&&!a?PO(c,p):Ua(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-p.scrollLeft*m.x+w.x+S.x,y:t.y*m.y-p.scrollTop*m.y+w.y+S.y}}function bq(i){return Array.from(i.getClientRects())}function Eq(i){const e=Wa(i),t=Dy(i),n=i.ownerDocument.body,r=pu(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=pu(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let c=-t.scrollLeft+Py(i);const d=-t.scrollTop;return ks(n).direction==="rtl"&&(c+=pu(e.clientWidth,n.clientWidth)-r),{width:r,height:a,x:c,y:d}}const GI=25;function Tq(i,e){const t=ps(i),n=Wa(i),r=t.visualViewport;let a=n.clientWidth,c=n.clientHeight,d=0,p=0;if(r){a=r.width,c=r.height;const w=jE();(!w||w&&e==="fixed")&&(d=r.offsetLeft,p=r.offsetTop)}const m=Py(n);if(m<=0){const w=n.ownerDocument,b=w.body,S=getComputedStyle(b),C=w.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,N=Math.abs(n.clientWidth-b.clientWidth-C);N<=GI&&(a-=N)}else m<=GI&&(a+=m);return{width:a,height:c,x:d,y:p}}const Sq=new Set(["absolute","fixed"]);function xq(i,e){const t=Ru(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,a=Ha(i)?Hd(i):Ua(1),c=i.clientWidth*a.x,d=i.clientHeight*a.y,p=r*a.x,m=n*a.y;return{width:c,height:d,x:p,y:m}}function WI(i,e,t){let n;if(e==="viewport")n=Tq(i,t);else if(e==="document")n=Eq(Wa(i));else if(Er(e))n=xq(e,t);else{const r=RO(i);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return V_(n)}function OO(i,e){const t=lc(i);return t===e||!Er(t)||fh(t)?!1:ks(t).position==="fixed"||OO(t,e)}function Cq(i,e){const t=e.get(i);if(t)return t;let n=xp(i,[],!1).filter(d=>Er(d)&&kh(d)!=="body"),r=null;const a=ks(i).position==="fixed";let c=a?lc(i):i;for(;Er(c)&&!fh(c);){const d=ks(c),p=LE(c);!p&&d.position==="fixed"&&(r=null),(a?!p&&!r:!p&&d.position==="static"&&!!r&&Sq.has(r.position)||Wp(c)&&!p&&OO(i,c))?n=n.filter(w=>w!==c):r=d,c=lc(c)}return e.set(i,n),n}function Aq(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const c=[...t==="clippingAncestors"?Ny(e)?[]:Cq(e,this._c):[].concat(t),n],d=c[0],p=c.reduce((m,w)=>{const b=WI(e,w,r);return m.top=pu(b.top,m.top),m.right=ph(b.right,m.right),m.bottom=ph(b.bottom,m.bottom),m.left=pu(b.left,m.left),m},WI(e,d,r));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function Iq(i){const{width:e,height:t}=DO(i);return{width:e,height:t}}function Nq(i,e,t){const n=Ha(e),r=Wa(e),a=t==="fixed",c=Ru(i,!0,a,e);let d={scrollLeft:0,scrollTop:0};const p=Ua(0);function m(){p.x=Py(r)}if(n||!n&&!a)if((kh(e)!=="body"||Wp(r))&&(d=Dy(e)),n){const C=Ru(e,!0,a,e);p.x=C.x+e.clientLeft,p.y=C.y+e.clientTop}else r&&m();a&&!n&&r&&m();const w=r&&!n&&!a?PO(r,d):Ua(0),b=c.left+d.scrollLeft-p.x-w.x,S=c.top+d.scrollTop-p.y-w.y;return{x:b,y:S,width:c.width,height:c.height}}function r0(i){return ks(i).position==="static"}function KI(i,e){if(!Ha(i)||ks(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return Wa(i)===t&&(t=t.ownerDocument.body),t}function MO(i,e){const t=ps(i);if(Ny(i))return t;if(!Ha(i)){let r=lc(i);for(;r&&!fh(r);){if(Er(r)&&!r0(r))return r;r=lc(r)}return t}let n=KI(i,e);for(;n&&B8(n)&&r0(n);)n=KI(n,e);return n&&fh(n)&&r0(n)&&!LE(n)?t:n||Y8(i)||t}const Dq=async function(i){const e=this.getOffsetParent||MO,t=this.getDimensions,n=await t(i.floating);return{reference:Nq(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Rq(i){return ks(i).direction==="rtl"}const Pq={convertOffsetParentRelativeRectToViewportRelativeRect:wq,getDocumentElement:Wa,getClippingRect:Aq,getOffsetParent:MO,getElementRects:Dq,getClientRects:bq,getDimensions:Iq,getScale:Hd,isElement:Er,isRTL:Rq};function kO(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function Oq(i,e){let t=null,n;const r=Wa(i);function a(){var d;clearTimeout(n),(d=t)==null||d.disconnect(),t=null}function c(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),a();const m=i.getBoundingClientRect(),{left:w,top:b,width:S,height:C}=m;if(d||e(),!S||!C)return;const N=gg(b),O=gg(r.clientWidth-(w+S)),R=gg(r.clientHeight-(b+C)),k=gg(w),Z={rootMargin:-N+"px "+-O+"px "+-R+"px "+-k+"px",threshold:pu(0,ph(1,p))||1};let ne=!0;function ee(de){const B=de[0].intersectionRatio;if(B!==p){if(!ne)return c();B?c(!1,B):n=setTimeout(()=>{c(!1,1e-7)},1e3)}B===1&&!kO(m,i.getBoundingClientRect())&&c(),ne=!1}try{t=new IntersectionObserver(ee,{...Z,root:r.ownerDocument})}catch{t=new IntersectionObserver(ee,Z)}t.observe(i)}return c(!0),a}function Mq(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=n,m=BE(i),w=r||a?[...m?xp(m):[],...xp(e)]:[];w.forEach(k=>{r&&k.addEventListener("scroll",t,{passive:!0}),a&&k.addEventListener("resize",t)});const b=m&&d?Oq(m,t):null;let S=-1,C=null;c&&(C=new ResizeObserver(k=>{let[G]=k;G&&G.target===m&&C&&(C.unobserve(e),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var Z;(Z=C)==null||Z.observe(e)})),t()}),m&&!p&&C.observe(m),C.observe(e));let N,O=p?Ru(i):null;p&&R();function R(){const k=Ru(i);O&&!kO(O,k)&&t(),O=k,N=requestAnimationFrame(R)}return t(),()=>{var k;w.forEach(G=>{r&&G.removeEventListener("scroll",t),a&&G.removeEventListener("resize",t)}),b?.(),(k=C)==null||k.disconnect(),C=null,p&&cancelAnimationFrame(N)}}const kq=_q,Lq=pq,ZI=fq,jq=(i,e,t)=>{const n=new Map,r={platform:Pq,...t},a={...r.platform,_c:n};return hq(i,e,{...r,platform:a})};var Vq=typeof document<"u",Uq=function(){},Gg=Vq?P.useLayoutEffect:Uq;function B_(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!B_(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const a=r[n];if(!(a==="_owner"&&i.$$typeof)&&!B_(i[a],e[a]))return!1}return!0}return i!==i&&e!==e}function LO(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function $I(i,e){const t=LO(i);return Math.round(e*t)/t}function s0(i){const e=P.useRef(i);return Gg(()=>{e.current=i}),e}function Bq(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:a,floating:c}={},transform:d=!0,whileElementsMounted:p,open:m}=i,[w,b]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[S,C]=P.useState(n);B_(S,n)||C(n);const[N,O]=P.useState(null),[R,k]=P.useState(null),G=P.useCallback(se=>{se!==de.current&&(de.current=se,O(se))},[]),Z=P.useCallback(se=>{se!==B.current&&(B.current=se,k(se))},[]),ne=a||N,ee=c||R,de=P.useRef(null),B=P.useRef(null),V=P.useRef(w),j=p!=null,F=s0(p),q=s0(r),z=s0(m),H=P.useCallback(()=>{if(!de.current||!B.current)return;const se={placement:e,strategy:t,middleware:S};q.current&&(se.platform=q.current),jq(de.current,B.current,se).then(je=>{const Ce={...je,isPositioned:z.current!==!1};Re.current&&!B_(V.current,Ce)&&(V.current=Ce,Yd.flushSync(()=>{b(Ce)}))})},[S,e,t,q,z]);Gg(()=>{m===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,b(se=>({...se,isPositioned:!1})))},[m]);const Re=P.useRef(!1);Gg(()=>(Re.current=!0,()=>{Re.current=!1}),[]),Gg(()=>{if(ne&&(de.current=ne),ee&&(B.current=ee),ne&&ee){if(F.current)return F.current(ne,ee,H);H()}},[ne,ee,H,F,j]);const Ve=P.useMemo(()=>({reference:de,floating:B,setReference:G,setFloating:Z}),[G,Z]),W=P.useMemo(()=>({reference:ne,floating:ee}),[ne,ee]),le=P.useMemo(()=>{const se={position:t,left:0,top:0};if(!W.floating)return se;const je=$I(W.floating,w.x),Ce=$I(W.floating,w.y);return d?{...se,transform:"translate("+je+"px, "+Ce+"px)",...LO(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:je,top:Ce}},[t,d,W.floating,w.x,w.y]);return P.useMemo(()=>({...w,update:H,refs:Ve,elements:W,floatingStyles:le}),[w,H,Ve,W,le])}const zq=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?ZI({element:n.current,padding:r}).fn(t):{}:n?ZI({element:n,padding:r}).fn(t):{}}}},Fq=(i,e)=>({...kq(i),options:[i,e]}),Hq=(i,e)=>({...Lq(i),options:[i,e]}),qq=(i,e)=>({...zq(i),options:[i,e]}),Yq={...E1};let QI=!1,Gq=0;const XI=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Gq++;function Wq(){const[i,e]=P.useState(()=>QI?XI():void 0);return U_(()=>{i==null&&e(XI())},[]),P.useEffect(()=>{QI=!0},[]),i}const Kq=Yq.useId,jO=Kq||Wq,Zq=P.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:a,shift:c}},width:d=14,height:p=7,tipRadius:m=0,strokeWidth:w=0,staticOffset:b,stroke:S,d:C,style:{transform:N,...O}={},...R}=e,k=jO(),[G,Z]=P.useState(!1);if(U_(()=>{if(!r)return;ks(r).direction==="rtl"&&Z(!0)},[r]),!r)return null;const[ne,ee]=n.split("-"),de=ne==="top"||ne==="bottom";let B=b;(de&&c!=null&&c.x||!de&&c!=null&&c.y)&&(B=null);const V=w*2,j=V/2,F=d/2*(m/-8+1),q=p/2*m/4,z=!!C,H=B&&ee==="end"?"bottom":"top";let Re=B&&ee==="end"?"right":"left";B&&G&&(Re=ee==="end"?"left":"right");const Ve=a?.x!=null?B||a.x:"",W=a?.y!=null?B||a.y:"",le=C||"M0,0"+(" H"+d)+(" L"+(d-F)+","+(p-q))+(" Q"+d/2+","+p+" "+F+","+(p-q))+" Z",se={top:z?"rotate(180deg)":"",left:z?"rotate(90deg)":"rotate(-90deg)",bottom:z?"":"rotate(180deg)",right:z?"rotate(-90deg)":"rotate(90deg)"}[ne];return _.jsxs("svg",{...R,"aria-hidden":!0,ref:t,width:z?d:d+V,height:d,viewBox:"0 0 "+d+" "+(p>d?p:d),style:{position:"absolute",pointerEvents:"none",[Re]:Ve,[H]:W,[ne]:de||z?"100%":"calc(100% - "+V/2+"px)",transform:[se,N].filter(je=>!!je).join(" "),...O},children:[V>0&&_.jsx("path",{clipPath:"url(#"+k+")",fill:"none",stroke:S,strokeWidth:V+(C?0:1),d:le}),_.jsx("path",{stroke:V&&!C?R.fill:"none",d:le}),_.jsx("clipPath",{id:k,children:_.jsx("rect",{x:-j,y:j*(z?-1:1),width:d+V,height:d})})]})});function $q(){const i=new Map;return{emit(e,t){var n;(n=i.get(e))==null||n.forEach(r=>r(t))},on(e,t){i.has(e)||i.set(e,new Set),i.get(e).add(t)},off(e,t){var n;(n=i.get(e))==null||n.delete(t)}}}const Qq=P.createContext(null),Xq=P.createContext(null),Jq=()=>{var i;return((i=P.useContext(Qq))==null?void 0:i.id)||null},e7=()=>P.useContext(Xq);function t7(i){const{open:e=!1,onOpenChange:t,elements:n}=i,r=jO(),a=P.useRef({}),[c]=P.useState(()=>$q()),d=Jq()!=null,[p,m]=P.useState(n.reference),w=uq((C,N,O)=>{a.current.openEvent=C?N:void 0,c.emit("openchange",{open:C,event:N,reason:O,nested:d}),t?.(C,N,O)}),b=P.useMemo(()=>({setPositionReference:m}),[]),S=P.useMemo(()=>({reference:p||n.reference||null,floating:n.floating||null,domReference:n.reference}),[p,n.reference,n.floating]);return P.useMemo(()=>({dataRef:a,open:e,onOpenChange:w,elements:S,events:c,floatingId:r,refs:b}),[e,w,S,c,r,b])}function n7(i){i===void 0&&(i={});const{nodeId:e}=i,t=t7({...i,elements:{reference:null,floating:null,...i.elements}}),n=i.rootContext||t,r=n.elements,[a,c]=P.useState(null),[d,p]=P.useState(null),w=r?.domReference||a,b=P.useRef(null),S=e7();U_(()=>{w&&(b.current=w)},[w]);const C=Bq({...i,elements:{...r,...d&&{reference:d}}}),N=P.useCallback(Z=>{const ne=Er(Z)?{getBoundingClientRect:()=>Z.getBoundingClientRect(),getClientRects:()=>Z.getClientRects(),contextElement:Z}:Z;p(ne),C.refs.setReference(ne)},[C.refs]),O=P.useCallback(Z=>{(Er(Z)||Z===null)&&(b.current=Z,c(Z)),(Er(C.refs.reference.current)||C.refs.reference.current===null||Z!==null&&!Er(Z))&&C.refs.setReference(Z)},[C.refs]),R=P.useMemo(()=>({...C.refs,setReference:O,setPositionReference:N,domReference:b}),[C.refs,O,N]),k=P.useMemo(()=>({...C.elements,domReference:w}),[C.elements,w]),G=P.useMemo(()=>({...C,...n,refs:R,elements:k,nodeId:e}),[C,R,k,e,n]);return U_(()=>{n.dataRef.current.floatingContext=G;const Z=S?.nodesRef.current.find(ne=>ne.id===e);Z&&(Z.context=G)}),P.useMemo(()=>({...C,context:G,refs:R,elements:k}),[C,R,k,G])}var lb=function(e,t){return lb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},lb(e,t)};function qi(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lb(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Tt=function(){return Tt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Tt.apply(this,arguments)};function Ma(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,a;n<r;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return i.concat(a||Array.prototype.slice.call(e))}var i7=function(i){var e=i.showTimeSelectOnly,t=e===void 0?!1:e,n=i.showTime,r=n===void 0?!1:n,a=i.className,c=i.children,d=i.inline,p=t?"Choose Time":"Choose Date".concat(r?" and Time":"");return te.createElement("div",{className:a,"aria-label":p,role:d?void 0:"dialog","aria-modal":d?void 0:"true",translate:"no"},c)},r7=function(i,e){var t=P.useRef(null),n=P.useRef(i);P.useEffect(function(){n.current=i},[i]);var r=P.useCallback(function(a){var c,d=a.composed&&a.composedPath&&a.composedPath().find(function(p){return p instanceof Node})||a.target;t.current&&!t.current.contains(d)&&(e&&d instanceof HTMLElement&&d.classList.contains(e)||(c=n.current)===null||c===void 0||c.call(n,a))},[e]);return P.useEffect(function(){return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[r]),t},Oy=function(i){var e=i.children,t=i.onClickOutside,n=i.className,r=i.containerRef,a=i.style,c=i.ignoreClass,d=r7(t,c);return te.createElement("div",{className:n,style:a,ref:function(p){d.current=p,r&&(r.current=p)}},e)},_g=null,JI=!1;function VO(){if(JI)return _g;JI=!0;try{var i="date-fns-tz";_g=require(i)}catch{_g=null}return _g}function e1(i,e){if(!e)return i;var t=VO();return t?t.toZonedTime(i,e):i}function wo(i,e){if(!e)return i;var t=VO();return t?t.fromZonedTime(i,e):i}var qe;(function(i){i.ArrowUp="ArrowUp",i.ArrowDown="ArrowDown",i.ArrowLeft="ArrowLeft",i.ArrowRight="ArrowRight",i.PageUp="PageUp",i.PageDown="PageDown",i.Home="Home",i.End="End",i.Enter="Enter",i.Space=" ",i.Tab="Tab",i.Escape="Escape",i.Backspace="Backspace",i.X="x"})(qe||(qe={}));function UO(){var i=typeof window<"u"?window:globalThis;return i}var Zp=12;function Gt(i){if(i==null)return new Date;var e=typeof i=="string"?E8(i):Je(i);return Yr(e)?e:new Date}function Wc(i,e,t,n,r){r===void 0&&(r=Gt());for(var a=gh(t)||gh(zE()),c=Array.isArray(e)?e:[e],d=0,p=c;d<p.length;d++){var m=p[d],w=g8(i,m,r,{locale:a});if(Yr(w)&&(!n||i===On(w,m,t)))return w}if(!n&&i&&i.length>=8){var b=new Date(i);if(hh(b))return b}return null}function s7(i,e){if(e===void 0&&(e=Gt()),!i)return null;var t=i.match(/\b(1\d{3}|2\d{3})\b/);if(!t||!t[1])return null;var n=parseInt(t[1],10),r=i.match(/(?:^|[/\-\s])?(0?[1-9]|1[0-2])(?:[/\-\s]|$)/),a=r&&r[1]?parseInt(r[1],10)-1:e.getMonth();return new Date(n,a,1)}function Yr(i){return hh(i)}function lu(i){return i==null?null:Va(i)&&hh(i)?i:null}function On(i,e,t){if(t==="en")return UI(i,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?gh(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||gh(zE()),UI(i,e,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Hr(i,e){var t=e.dateFormat,n=e.locale,r=Array.isArray(t)&&t.length>0?t[0]:t;return i&&On(i,r,n)||""}var BO=" - ";function a7(i,e,t){if(!i&&!e)return"";var n=i?Hr(i,t):"",r=e?Hr(e,t):"",a=t.rangeSeparator||BO;return"".concat(n).concat(a).concat(r)}function o7(i,e){if(!i?.length)return"";var t=i[0]?Hr(i[0],e):"";if(i.length===1)return t;if(i.length===2&&i[1]){var n=Hr(i[1],e);return"".concat(t,", ").concat(n)}var r=i.length-1;return"".concat(t," (+").concat(r,")")}function bo(i,e){var t=e.hour,n=t===void 0?0:t,r=e.minute,a=r===void 0?0:r,c=e.second,d=c===void 0?0:c;return Hg(qg(Yg(i,d),a),n)}function l7(i){return PE(i)}function c7(i,e){return On(i,"ddd",e)}function qf(i){return Du(i)}function ec(i,e,t){var n=gh(e||zE());return Bo(i,{locale:n,weekStartsOn:t})}function Po(i){return gO(i)}function Yf(i){return Ay(i)}function t1(i){return ib(i)}function n1(){return Du(Gt())}function i1(i){return pO(i)}function u7(i){return E9(i)}function d7(i){return mO(i)}function Ia(i,e){return i&&e?w8(i,e):!i&&!e}function br(i,e){return i&&e?y8(i,e):!i&&!e}function z_(i,e){return i&&e?v8(i,e):!i&&!e}function Lt(i,e){return i&&e?w9(i,e):!i&&!e}function cu(i,e){return i&&e?bH(i,e):!i&&!e}function Xc(i,e,t){var n,r=Du(e),a=pO(t);try{n=Sp(i,{start:r,end:a})}catch{n=!1}return n}function zE(){var i=UO();return i.__localeId__}function gh(i){if(typeof i=="string"){var e=UO();return e.__localeData__?e.__localeData__[i]:void 0}else return i}function h7(i,e,t){return e(On(i,"EEEE",t))}function f7(i,e){return On(i,"EEEEEE",e)}function p7(i,e){return On(i,"EEE",e)}function FE(i,e){return On(ls(Gt(),i),"LLLL",e)}function zO(i,e){return On(ls(Gt(),i),"LLL",e)}function m7(i,e){return On(Od(Gt(),i),"QQQ",e)}function Ds(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,a=t.excludeDates,c=t.excludeDateIntervals,d=t.includeDates,p=t.includeDateIntervals,m=t.filterDate,w=t.disabled;return w?!0:$p(i,{minDate:n,maxDate:r})||a&&a.some(function(b){return b instanceof Date?Lt(i,b):Lt(i,b.date)})||c&&c.some(function(b){var S=b.start,C=b.end;return Sp(i,{start:S,end:C})})||d&&!d.some(function(b){return Lt(i,b)})||p&&!p.some(function(b){var S=b.start,C=b.end;return Sp(i,{start:S,end:C})})||m&&!m(Gt(i))||!1}function HE(i,e){var t=e===void 0?{}:e,n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some(function(a){var c=a.start,d=a.end;return Sp(i,{start:c,end:d})}):n&&n.some(function(a){var c;return a instanceof Date?Lt(i,a):Lt(i,(c=a.date)!==null&&c!==void 0?c:new Date)})||!1}function FO(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,a=t.excludeDates,c=t.includeDates,d=t.filterDate;return $p(i,{minDate:n?gO(n):void 0,maxDate:r?mO(r):void 0})||a?.some(function(p){return br(i,p instanceof Date?p:p.date)})||c&&!c.some(function(p){return br(i,p)})||d&&!d(Gt(i))||!1}function yg(i,e,t,n){var r=Dt(i),a=Gr(i),c=Dt(e),d=Gr(e),p=Dt(n);return r===c&&r===p?a<=t&&t<=d:r<c?p===r&&a<=t||p===c&&d>=t||p<c&&p>r:!1}function g7(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,a=t.excludeDates,c=t.includeDates;return $p(i,{minDate:n,maxDate:r})||a&&a.some(function(d){return br(d instanceof Date?d:d.date,i)})||c&&!c.some(function(d){return br(d,i)})||!1}function vg(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,a=t.excludeDates,c=t.includeDates,d=t.filterDate,p=t.disabled;return p?!0:$p(i,{minDate:n,maxDate:r})||a?.some(function(m){return z_(i,m instanceof Date?m:m.date)})||c&&!c.some(function(m){return z_(i,m)})||d&&!d(Gt(i))||!1}function wg(i,e,t){if(!e||!t||!hh(e)||!hh(t))return!1;var n=Dt(e),r=Dt(t);return n<=i&&r>=i}function Wg(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.maxDate,a=t.excludeDates,c=t.includeDates,d=t.filterDate,p=t.disabled;if(p)return!0;var m=new Date(i,0,1);return $p(m,{minDate:n?Ay(n):void 0,maxDate:r?_O(r):void 0})||a?.some(function(w){return Ia(m,w instanceof Date?w:w.date)})||c&&!c.some(function(w){return Ia(m,w)})||d&&!d(Gt(m))||!1}function bg(i,e,t,n){var r=Dt(i),a=Gl(i),c=Dt(e),d=Gl(e),p=Dt(n);return r===c&&r===p?a<=t&&t<=d:r<c?p===r&&a<=t||p===c&&d>=t||p<c&&p>r:!1}function $p(i,e){var t,n=e===void 0?{}:e,r=n.minDate,a=n.maxDate;return(t=r&&dh(i,r)<0||a&&dh(i,a)>0)!==null&&t!==void 0?t:!1}function r1(i,e){return e.some(function(t){return sr(t)===sr(i)&&ar(t)===ar(i)&&Jl(t)===Jl(i)})}function s1(i,e){var t=e===void 0?{}:e,n=t.excludeTimes,r=t.includeTimes,a=t.filterTime;return n&&r1(i,n)||r&&!r1(i,r)||a&&!a(i)||!1}function a1(i,e){var t=e.minTime,n=e.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var r=Gt();r=Hg(r,sr(i)),r=qg(r,ar(i)),r=Yg(r,Jl(i));var a=Gt();a=Hg(a,sr(t)),a=qg(a,ar(t)),a=Yg(a,Jl(t));var c=Gt();c=Hg(c,sr(n)),c=qg(c,ar(n)),c=Yg(c,Jl(n));var d;try{d=!Sp(r,{start:a,end:c})}catch{d=!1}return d}function o1(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.includeDates,a=fu(i,1);return n&&P_(n,a)>0||r&&r.every(function(c){return P_(c,a)>0})||!1}function l1(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.includeDates,a=ra(i,1);return n&&P_(a,n)>0||r&&r.every(function(c){return P_(a,c)>0})||!1}function _7(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.includeDates,a=Ay(i),c=CO(a);return n&&O_(n,c)>0||r&&r.every(function(d){return O_(d,c)>0})||!1}function y7(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.includeDates,a=_O(i),c=RE(a,1);return n&&O_(c,n)>0||r&&r.every(function(d){return O_(c,d)>0})||!1}function c1(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.includeDates,a=oc(i,1);return n&&M_(n,a)>0||r&&r.every(function(c){return M_(c,a)>0})||!1}function v7(i,e){var t=e===void 0?{}:e,n=t.minDate,r=t.yearItemNumber,a=r===void 0?Zp:r,c=Yf(oc(i,a)),d=Ao(c,a).endPeriod,p=n&&Dt(n);return p&&p>d||!1}function u1(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.includeDates,a=ta(i,1);return n&&M_(a,n)>0||r&&r.every(function(c){return M_(a,c)>0})||!1}function w7(i,e){var t=e===void 0?{}:e,n=t.maxDate,r=t.yearItemNumber,a=r===void 0?Zp:r,c=ta(i,a),d=Ao(c,a).startPeriod,p=n&&Dt(n);return p&&p<d||!1}function HO(i){var e=i.minDate,t=i.includeDates;if(t&&e){var n=t.filter(function(r){return dh(r,e)>=0});return OI(n)}else return t?OI(t):e}function qO(i){var e=i.maxDate,t=i.includeDates;if(t&&e){var n=t.filter(function(r){return dh(r,e)<=0});return PI(n)}else return t?PI(t):e}function d1(i,e){var t;i===void 0&&(i=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var n=new Map,r=0,a=i.length;r<a;r++){var c=i[r];if(Va(c)){var d=On(c,"MM.dd.yyyy"),p=n.get(d)||[];p.includes(e)||(p.push(e),n.set(d,p))}else if(typeof c=="object"){var m=Object.keys(c),w=(t=m[0])!==null&&t!==void 0?t:"",b=c[w];if(typeof w=="string"&&Array.isArray(b))for(var S=0,C=b.length;S<C;S++){var N=b[S];if(N){var d=On(N,"MM.dd.yyyy"),p=n.get(d)||[];p.includes(w)||(p.push(w),n.set(d,p))}}}}return n}function b7(i,e){return i.length!==e.length?!1:i.every(function(t,n){return t===e[n]})}function E7(i,e){i===void 0&&(i=[]),e===void 0&&(e="react-datepicker__day--holidays");var t=new Map;return i.forEach(function(n){var r=n.date,a=n.holidayName;if(Va(r)){var c=On(r,"MM.dd.yyyy"),d=t.get(c)||{className:"",holidayNames:[]};if(!("className"in d&&d.className===e&&b7(d.holidayNames,[a]))){d.className=e;var p=d.holidayNames;d.holidayNames=p?Ma(Ma([],p,!0),[a],!1):[a],t.set(c,d)}}}),t}function T7(i,e,t,n,r){for(var a=r.length,c=[],d=0;d<a;d++){var p=i,m=r[d];m&&(p=g9(p,sr(m)),p=Tp(p,ar(m)),p=v9(p,Jl(m)));var w=Tp(i,(t+1)*n);Ro(p,e)&&Oa(p,w)&&m!=null&&c.push(m)}return c}function Sd(i){return i<10?"0".concat(i):"".concat(i)}function Ao(i,e){e===void 0&&(e=Zp);var t=Math.ceil(Dt(i)/e)*e,n=t-(e-1);return{startPeriod:n,endPeriod:t}}function S7(i){var e=new Date(i.getFullYear(),i.getMonth(),i.getDate()),t=new Date(i.getFullYear(),i.getMonth(),i.getDate(),24);return Math.round((+t-+e)/36e5)}function h1(i){var e=i.getSeconds(),t=i.getMilliseconds();return Je(i.getTime()-e*1e3-t)}function YO(i,e){return h1(i).getTime()===h1(e).getTime()}function f1(i){if(!Va(i))throw new Error("Invalid date");var e=new Date(i);return e.setHours(0,0,0,0),e}function a0(i,e){if(!Va(i)||!Va(e))throw new Error("Invalid date received");var t=f1(i),n=f1(e);return Oa(t,n)}function GO(i){return i.key===qe.Space}var o0=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.inputRef=te.createRef(),n.onTimeChange=function(r){var a,c;n.setState({time:r});var d=n.props.date,p=d instanceof Date&&!isNaN(+d),m=p?d:new Date;if(r?.includes(":")){var w=r.split(":"),b=w[0],S=w[1];m.setHours(Number(b)),m.setMinutes(Number(S))}(c=(a=n.props).onChange)===null||c===void 0||c.call(a,m)},n.renderTimeInput=function(){var r=n.state.time,a=n.props,c=a.date,d=a.timeString,p=a.customTimeInput;return p?P.cloneElement(p,{date:c,value:r,onChange:n.onTimeChange}):te.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var m;(m=n.inputRef.current)===null||m===void 0||m.focus()},required:!0,value:r,onChange:function(m){n.onTimeChange(m.target.value||d)}})},n.state={time:n.props.timeString},n}return e.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},e.prototype.render=function(){return te.createElement("div",{className:"react-datepicker__input-time-container"},te.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),te.createElement("div",{className:"react-datepicker-time__input-container"},te.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(P.Component),x7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.dayEl=P.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var r,a,c=n.key;c===qe.Space&&(n.preventDefault(),n.key=qe.Enter),(a=(r=t.props).handleOnKeyDown)===null||a===void 0||a.call(r,n)},t.isSameDay=function(n){return Lt(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var r=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(c){return t.isSameDayOrWeek(c)}):t.isSameDayOrWeek(t.props.selected),a=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!r&&t.isSameDayOrWeek(t.props.preSelection)&&!a},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),Ds(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(){return HE(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Lt(t.props.day,ec(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&Lt(n,ec(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,r=n.day,a=n.highlightDates;if(!a)return!1;var c=On(r,"MM.dd.yyyy");return a.get(c)},t.getHolidaysClass=function(){var n,r=t.props,a=r.day,c=r.holidays;if(!c)return[void 0];var d=On(a,"MM.dd.yyyy");return c.has(d)?[(n=c.get(d))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,r=n.day,a=n.startDate,c=n.endDate;return!a||!c?!1:Xc(r,a,c)},t.isInSelectingRange=function(){var n,r=t.props,a=r.day,c=r.selectsStart,d=r.selectsEnd,p=r.selectsRange,m=r.selectsDisabledDaysInRange,w=r.startDate,b=r.swapRange,S=r.endDate,C=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;if(t.isAfterMonth()||t.isBeforeMonth()||!(c||d||p)||!C||!m&&t.isDisabled())return!1;if(c&&S&&(Oa(C,S)||cu(C,S)))return Xc(a,C,S);if(d&&w&&(Ro(C,w)||cu(C,w)))return Xc(a,w,C);if(p&&w&&!S){if(cu(C,w)||Ro(C,w))return Xc(a,w,C);if(b&&Oa(C,w))return Xc(a,C,w)}return!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var r=t.props,a=r.day,c=r.startDate,d=r.selectsStart,p=r.swapRange,m=r.selectsRange,w=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return d?Lt(a,w):m&&p&&c&&w?Lt(a,Oa(w,c)?w:c):Lt(a,c)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var r=t.props,a=r.day,c=r.endDate,d=r.selectsEnd,p=r.selectsRange,m=r.swapRange,w=r.startDate,b=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return d?Lt(a,b):p&&m&&w&&b?Lt(a,Oa(b,w)?w:b):p?Lt(a,b):Lt(a,c)},t.isRangeStart=function(){var n=t.props,r=n.day,a=n.startDate,c=n.endDate;return!a||!c?!1:Lt(a,r)},t.isRangeEnd=function(){var n=t.props,r=n.day,a=n.startDate,c=n.endDate;return!a||!c?!1:Lt(c,r)},t.isWeekend=function(){var n=_H(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Gr(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Gr(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Gt())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(r){return t.isSameDayOrWeek(r)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var r=t.props.dayClassName?t.props.dayClassName(n):void 0;return bi("react-datepicker__day",r,"react-datepicker__day--"+c7(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,r=n.day,a=n.ariaLabelPrefixWhenEnabled,c=a===void 0?"Choose":a,d=n.ariaLabelPrefixWhenDisabled,p=d===void 0?"Not available":d,m=t.isDisabled()||t.isExcluded()?p:c;return"".concat(m," ").concat(On(r,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,r=n.day,a=n.holidays,c=a===void 0?new Map:a,d=n.excludeDates,p=On(r,"MM.dd.yyyy"),m=[];return c.has(p)&&m.push.apply(m,c.get(p).holidayNames),t.isExcluded()&&m.push(d?.filter(function(w){return w instanceof Date?Lt(w,r):Lt(w?.date,r)}).map(function(w){if(!(w instanceof Date))return w?.message})),m.join(", ")},t.getTabIndex=function(){var n=t.props.selected,r=t.props.preSelection,a=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&Lt(r,n))?0:-1;return a},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(BI(t.props.day),t.props.day):BI(t.props.day)},t.render=function(){return te.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&te.createElement("span",{className:"overlay"},t.getTitle()))},t}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},e.prototype.isDayActiveElement=function(){var t,n,r;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((r=document.activeElement)===null||r===void 0?void 0:r.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(P.Component),C7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.weekNumberEl=P.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var r,a,c=n.key;c===qe.Space&&(n.preventDefault(),n.key=qe.Enter),(a=(r=t.props).handleOnKeyDown)===null||a===void 0||a.call(r,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Lt(t.props.date,t.props.selected)&&Lt(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Lt(t.props.date,t.props.selected)&&Lt(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var r=!1;t.getTabIndex()===0&&!n?.isInputFocused&&Lt(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(r=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},e.prototype.render=function(){var t=this.props,n=t.weekNumber,r=t.isWeekDisabled,a=t.ariaLabelPrefix,c=a===void 0?e.defaultProps.ariaLabelPrefix:a,d=t.onClick,p={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!d&&!r,"react-datepicker__week-number--selected":!!d&&Lt(this.props.date,this.props.selected)};return te.createElement("div",{ref:this.weekNumberEl,className:bi(p),"aria-label":"".concat(c," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},e})(P.Component),A7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isDisabled=function(n){return Ds(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,r){t.props.onDayClick&&t.props.onDayClick(n,r)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,r,a){for(var c,d,p,m=new Date(n),w=0;w<7;w++){var b=new Date(n);b.setDate(b.getDate()+w);var S=!t.isDisabled(b);if(S){m=b;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(m,r,a),t.props.showWeekPicker&&t.handleDayClick(m,a),((c=t.props.shouldCloseOnSelect)!==null&&c!==void 0?c:e.defaultProps.shouldCloseOnSelect)&&((p=(d=t.props).setOpen)===null||p===void 0||p.call(d,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):l7(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),r=ea(n,6),a=new Date(n);a<=r;){if(!t.isDisabled(a))return!1;a=ea(a,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),r=[],a=t.formatWeekNumber(n);if(t.props.showWeekNumber){var c=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,a):void 0;r.push(te.createElement(C7,Tt({key:"W"},e.defaultProps,t.props,{weekNumber:a,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:c})))}return r.concat([0,1,2,3,4,5,6].map(function(d){var p=ea(n,d);return te.createElement(x7,Tt({},e.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:p.valueOf(),day:p,onClick:t.handleDayClick.bind(t,p),onMouseEnter:t.handleDayMouseEnter.bind(t,p)}))}))},t.startOfWeek=function(){return ec(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Lt(t.startOfWeek(),t.props.selected)&&Lt(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Lt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return te.createElement("div",{className:bi(t,n),role:"row"},this.renderDays())},e})(P.Component),kf,I7=6,qd={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},l0=(kf={},kf[qd.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},kf[qd.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},kf[qd.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},kf),Eg=1;function p1(i,e){return i?qd.FOUR_COLUMNS:e?qd.TWO_COLUMNS:qd.THREE_COLUMNS}var N7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.MONTH_REFS=Ma([],Array(12),!0).map(function(){return P.createRef()}),t.QUARTER_REFS=Ma([],Array(4),!0).map(function(){return P.createRef()}),t.isDisabled=function(n){return Ds(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(n){return HE(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,r){var a,c;(c=(a=t.props).onDayClick)===null||c===void 0||c.call(a,n,r,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var r,a;(a=(r=t.props).onDayMouseEnter)===null||a===void 0||a.call(r,n)},t.handleMouseLeave=function(){var n,r;(r=(n=t.props).onMouseLeave)===null||r===void 0||r.call(n)},t.isRangeStartMonth=function(n){var r=t.props,a=r.day,c=r.startDate,d=r.endDate;return!c||!d?!1:br(ls(a,n),c)},t.isRangeStartQuarter=function(n){var r=t.props,a=r.day,c=r.startDate,d=r.endDate;return!c||!d?!1:z_(Od(a,n),c)},t.isRangeEndMonth=function(n){var r=t.props,a=r.day,c=r.startDate,d=r.endDate;return!c||!d?!1:br(ls(a,n),d)},t.isRangeEndQuarter=function(n){var r=t.props,a=r.day,c=r.startDate,d=r.endDate;return!c||!d?!1:z_(Od(a,n),d)},t.isInSelectingRangeMonth=function(n){var r,a=t.props,c=a.day,d=a.selectsStart,p=a.selectsEnd,m=a.selectsRange,w=a.startDate,b=a.endDate,S=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(d||p||m)||!S?!1:d&&b?yg(S,b,n,c):p&&w||m&&w&&!b?yg(w,S,n,c):!1},t.isSelectingMonthRangeStart=function(n){var r;if(!t.isInSelectingRangeMonth(n))return!1;var a=t.props,c=a.day,d=a.startDate,p=a.selectsStart,m=ls(c,n),w=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return p?br(m,w):br(m,d)},t.isSelectingMonthRangeEnd=function(n){var r;if(!t.isInSelectingRangeMonth(n))return!1;var a=t.props,c=a.day,d=a.endDate,p=a.selectsEnd,m=a.selectsRange,w=ls(c,n),b=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return p||m?br(w,b):br(w,d)},t.isInSelectingRangeQuarter=function(n){var r,a=t.props,c=a.day,d=a.selectsStart,p=a.selectsEnd,m=a.selectsRange,w=a.startDate,b=a.endDate,S=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(d||p||m)||!S?!1:d&&b?bg(S,b,n,c):p&&w||m&&w&&!b?bg(w,S,n,c):!1},t.isWeekInMonth=function(n){var r=t.props.day,a=ea(n,6);return br(n,r)||br(a,r)},t.isCurrentMonth=function(n,r){return Dt(n)===Dt(Gt())&&r===Gr(Gt())},t.isCurrentQuarter=function(n,r){return Dt(n)===Dt(Gt())&&r===Gl(Gt())},t.isSelectedMonth=function(n,r,a){return Gr(a)===r&&Dt(n)===Dt(a)},t.isSelectMonthInList=function(n,r,a){return a.some(function(c){return t.isSelectedMonth(n,r,c)})},t.isSelectedQuarter=function(n,r,a){return Gl(a)===r&&Dt(n)===Dt(a)},t.isSelectQuarterInList=function(n,r,a){return a.some(function(c){return t.isSelectedQuarter(n,r,c)})},t.isMonthSelected=function(){var n=t.props,r=n.day,a=n.selected,c=n.selectedDates,d=n.selectsMultiple,p=Gr(r);return d?c?.some(function(m){return t.isSelectedMonth(r,p,m)}):!!a&&t.isSelectedMonth(r,p,a)},t.isQuarterSelected=function(){var n=t.props,r=n.day,a=n.selected,c=n.selectedDates,d=n.selectsMultiple,p=Gl(r);return d?c?.some(function(m){return t.isSelectedQuarter(r,p,m)}):!!a&&t.isSelectedQuarter(r,p,a)},t.renderWeeks=function(){if(!Yr(t.props.day))return[];for(var n=[],r=t.props.fixedHeight,a=0,c=!1,d=ec(Po(t.props.day),t.props.locale,t.props.calendarStartDay),p=function(N){return t.props.showWeekPicker?ec(N,t.props.locale,t.props.calendarStartDay):t.props.preSelection},m=function(N){return t.props.showWeekPicker?ec(N,t.props.locale,t.props.calendarStartDay):t.props.selected},w=t.props.selected?m(t.props.selected):void 0,b=t.props.preSelection?p(t.props.preSelection):void 0;n.push(te.createElement(A7,Tt({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:a,day:d,month:Gr(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:w,preSelection:b,showWeekNumber:t.props.showWeekNumbers}))),!c;){a++,d=R_(d,1);var S=r&&a>=I7,C=!r&&!t.isWeekInMonth(d);if(S||C)if(t.props.peekNextMonth)c=!0;else break}return n},t.onMonthClick=function(n,r){var a=t.isMonthDisabledForLabelDate(r),c=a.isDisabled,d=a.labelDate;c||t.handleDayClick(Po(d),n)},t.onMonthMouseEnter=function(n){var r=t.isMonthDisabledForLabelDate(n),a=r.isDisabled,c=r.labelDate;a||t.handleDayMouseEnter(Po(c))},t.handleMonthNavigation=function(n,r){var a,c,d,p;(c=(a=t.props).setPreSelection)===null||c===void 0||c.call(a,r),(p=(d=t.MONTH_REFS[n])===null||d===void 0?void 0:d.current)===null||p===void 0||p.focus()},t.handleKeyboardNavigation=function(n,r,a){var c,d=t.props,p=d.selected,m=d.preSelection,w=d.setPreSelection,b=d.minDate,S=d.maxDate,C=d.showFourColumnMonthYearPicker,N=d.showTwoColumnMonthYearPicker;if(m){var O=p1(C,N),R=t.getVerticalOffset(O),k=(c=l0[O])===null||c===void 0?void 0:c.grid,G=function(B,V,j){var F,q,z=V,H=j;switch(B){case qe.ArrowRight:z=ra(V,Eg),H=j===11?0:j+Eg;break;case qe.ArrowLeft:z=fu(V,Eg),H=j===0?11:j-Eg;break;case qe.ArrowUp:z=fu(V,R),H=!((F=k?.[0])===null||F===void 0)&&F.includes(j)?j+12-R:j-R;break;case qe.ArrowDown:z=ra(V,R),H=!((q=k?.[k.length-1])===null||q===void 0)&&q.includes(j)?j-12+R:j+R;break}return{newCalculatedDate:z,newCalculatedMonth:H}},Z=function(B,V,j){for(var F=40,q=B,z=!1,H=0,Re=G(q,V,j),Ve=Re.newCalculatedDate,W=Re.newCalculatedMonth;!z;){if(H>=F){Ve=V,W=j;break}if(b&&Ve<b){q=qe.ArrowRight;var le=G(q,Ve,W);Ve=le.newCalculatedDate,W=le.newCalculatedMonth}if(S&&Ve>S){q=qe.ArrowLeft;var le=G(q,Ve,W);Ve=le.newCalculatedDate,W=le.newCalculatedMonth}if(g7(Ve,t.props)){var le=G(q,Ve,W);Ve=le.newCalculatedDate,W=le.newCalculatedMonth}else z=!0;H++}return{newCalculatedDate:Ve,newCalculatedMonth:W}};if(r===qe.Enter){t.isMonthDisabled(a)||(t.onMonthClick(n,a),w?.(p));return}var ne=Z(r,m,a),ee=ne.newCalculatedDate,de=ne.newCalculatedMonth;switch(r){case qe.ArrowRight:case qe.ArrowLeft:case qe.ArrowUp:case qe.ArrowDown:t.handleMonthNavigation(de,ee);break}}},t.getVerticalOffset=function(n){var r,a;return(a=(r=l0[n])===null||r===void 0?void 0:r.verticalNavigationOffset)!==null&&a!==void 0?a:0},t.onMonthKeyDown=function(n,r){var a=t.props,c=a.disabledKeyboardNavigation,d=a.handleOnMonthKeyDown,p=n.key;p!==qe.Tab&&n.preventDefault(),c||t.handleKeyboardNavigation(n,p,r),d&&d(n)},t.onQuarterClick=function(n,r){var a=Od(t.props.day,r);vg(a,t.props)||t.handleDayClick(t1(a),n)},t.onQuarterMouseEnter=function(n){var r=Od(t.props.day,n);vg(r,t.props)||t.handleDayMouseEnter(t1(r))},t.handleQuarterNavigation=function(n,r){var a,c,d,p;t.isDisabled(r)||t.isExcluded(r)||((c=(a=t.props).setPreSelection)===null||c===void 0||c.call(a,r),(p=(d=t.QUARTER_REFS[n-1])===null||d===void 0?void 0:d.current)===null||p===void 0||p.focus())},t.onQuarterKeyDown=function(n,r){var a,c,d=n.key;if(!t.props.disabledKeyboardNavigation)switch(d){case qe.Enter:t.onQuarterClick(n,r),(c=(a=t.props).setPreSelection)===null||c===void 0||c.call(a,t.props.selected);break;case qe.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(r===4?1:r+1,RE(t.props.preSelection,1));break;case qe.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(r===1?4:r-1,CO(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var r,a=t.props,c=a.day,d=a.disabled,p=a.minDate,m=a.maxDate,w=a.excludeDates,b=a.includeDates,S=ls(c,n);return d?{isDisabled:!0,labelDate:ls(c,n)}:{isDisabled:(r=(p||m||w||b)&&FO(S,t.props))!==null&&r!==void 0?r:!1,labelDate:S}},t.isMonthDisabled=function(n){var r=t.isMonthDisabledForLabelDate(n).isDisabled;return r},t.getMonthClassNames=function(n){var r=t.props,a=r.day,c=r.startDate,d=r.endDate,p=r.preSelection,m=r.monthClassName,w=m?m(ls(a,n)):void 0,b=t.getSelection();return bi("react-datepicker__month-text","react-datepicker__month-".concat(n),w,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":b?t.isSelectMonthInList(a,n,b):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&p&&t.isSelectedMonth(a,n,p)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":c&&d?yg(c,d,n,a):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(a,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var r=Gr(t.props.preSelection),a=t.isMonthDisabledForLabelDate(r).isDisabled,c=n===r&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var r=Gl(t.props.preSelection),a=vg(t.props.day,t.props),c=n===r&&!(a||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getAriaLabel=function(n){var r=t.props,a=r.chooseDayAriaLabelPrefix,c=a===void 0?"Choose":a,d=r.disabledDayAriaLabelPrefix,p=d===void 0?"Not available":d,m=r.day,w=r.locale,b=ls(m,n),S=t.isDisabled(b)||t.isExcluded(b)?p:c;return"".concat(S," ").concat(On(b,"MMMM yyyy",w))},t.getQuarterClassNames=function(n){var r=t.props,a=r.day,c=r.startDate,d=r.endDate,p=r.minDate,m=r.maxDate,w=r.excludeDates,b=r.includeDates,S=r.filterDate,C=r.preSelection,N=r.disabledKeyboardNavigation,O=r.disabled,R=(p||m||w||b||S||O)&&vg(Od(a,n),t.props),k=t.getSelection();return bi("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":R,"react-datepicker__quarter-text--selected":k?t.isSelectQuarterInList(a,n,k):void 0,"react-datepicker__quarter-text--keyboard-selected":!N&&C&&t.isSelectedQuarter(a,n,C)&&!t.isQuarterSelected()&&!R,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":c&&d?bg(c,d,n,a):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(a,n)})},t.getMonthContent=function(n){var r=t.props,a=r.showFullMonthYearPicker,c=r.renderMonthContent,d=r.locale,p=r.day,m=zO(n,d),w=FE(n,d);return c?c(n,m,w,p):a?w:m},t.getQuarterContent=function(n){var r,a=t.props,c=a.renderQuarterContent,d=a.locale,p=m7(n,d);return(r=c?.(n,p))!==null&&r!==void 0?r:p},t.renderMonths=function(){var n,r=t.props,a=r.showTwoColumnMonthYearPicker,c=r.showFourColumnMonthYearPicker,d=r.day,p=r.selected,m=(n=l0[p1(c,a)])===null||n===void 0?void 0:n.grid;return m?.map(function(w,b){return te.createElement("div",{className:"react-datepicker__month-wrapper",key:b},w.map(function(S,C){return te.createElement("div",{ref:t.MONTH_REFS[S],key:C,onClick:function(N){t.onMonthClick(N,S)},onKeyDown:function(N){GO(N)&&(N.preventDefault(),N.key=qe.Enter),t.onMonthKeyDown(N,S)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(S)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(S)}:void 0,tabIndex:Number(t.getTabIndex(S)),className:t.getMonthClassNames(S),"aria-disabled":t.isMonthDisabled(S),role:"option","aria-label":t.getAriaLabel(S),"aria-current":t.isCurrentMonth(d,S)?"date":void 0,"aria-selected":p?t.isSelectedMonth(d,S,p):void 0},t.getMonthContent(S))}))})},t.renderQuarters=function(){var n=t.props,r=n.day,a=n.selected,c=[1,2,3,4];return te.createElement("div",{className:"react-datepicker__quarter-wrapper"},c.map(function(d,p){return te.createElement("div",{key:p,ref:t.QUARTER_REFS[p],role:"option",onClick:function(m){t.onQuarterClick(m,d)},onKeyDown:function(m){t.onQuarterKeyDown(m,d)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(d)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(d)}:void 0,className:t.getQuarterClassNames(d),"aria-selected":a?t.isSelectedQuarter(r,d,a):void 0,tabIndex:Number(t.getQuarterTabIndex(d)),"aria-current":t.isCurrentQuarter(r,d)?"date":void 0},t.getQuarterContent(d))}))},t.getClassNames=function(){var n=t.props,r=n.selectingDate,a=n.selectsStart,c=n.selectsEnd,d=n.showMonthYearPicker,p=n.showQuarterYearPicker,m=n.showWeekPicker;return bi("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(a||c)},{"react-datepicker__monthPicker":d},{"react-datepicker__quarterPicker":p},{"react-datepicker__weekPicker":m})},t}return e.prototype.getSelection=function(){var t=this.props,n=t.selected,r=t.selectedDates,a=t.selectsMultiple;if(a)return r;if(n)return[n]},e.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,r=t.showQuarterYearPicker,a=t.day,c=t.ariaLabelPrefix,d=c===void 0?"Month ":c,p=d?d.trim()+" ":"",m=Yr(a)?"".concat(p).concat(On(a,"MMMM, yyyy",this.props.locale)):"",w=n||r;return w?te.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":m,role:"listbox"},n?this.renderMonths():this.renderQuarters()):te.createElement("div",{role:"table"},this.props.dayNamesHeader&&te.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),this.props.monthHeader&&te.createElement("div",{role:"rowgroup"},this.props.monthHeader),te.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":m,role:"rowgroup"},this.renderWeeks()),this.props.monthFooter&&te.createElement("div",{role:"rowgroup"},this.props.monthFooter))},e})(P.Component),D7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(n){return t.props.month===n},t.handleOptionKeyDown=function(n,r){var a;switch(r.key){case"Enter":r.preventDefault(),t.onChange(n);break;case"Escape":r.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":{r.preventDefault();var c=(n+(r.key==="ArrowUp"?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;(a=t.monthOptionButtonsRef[c])===null||a===void 0||a.focus();break}}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(n,r){return te.createElement("div",{ref:function(a){t.monthOptionButtonsRef[r]=a,t.isSelectedMonth(r)&&a?.focus()},role:"button",tabIndex:0,className:t.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,r),onKeyDown:t.handleOptionKeyDown.bind(t,r),"aria-selected":t.isSelectedMonth(r)?"true":void 0},t.isSelectedMonth(r)?te.createElement("span",{className:"react-datepicker__month-option--selected"},"?"):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return e.prototype.render=function(){return te.createElement(Oy,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(P.Component),R7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(r,a){return te.createElement("option",{key:r,value:a},r)})},t.renderSelectMode=function(n){return te.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(r){return t.onChange(parseInt(r.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,r){return te.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},te.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),te.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[t.props.month]))},t.renderDropdown=function(n){return te.createElement(D7,Tt({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var r=t.state.dropdownVisible,a=[t.renderReadView(!r,n)];return r&&a.unshift(t.renderDropdown(n)),a},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return zO(a,t.props.locale)}:function(a){return FE(a,t.props.locale)}),r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(n);break;case"select":r=this.renderSelectMode(n);break}return te.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)},e})(P.Component),m1=5;function P7(i,e,t){for(var n=[],r=i??oc(t,m1),a=e??ta(t,m1),c=Po(r),d=Po(a);!Ro(c,d);)n.push(Gt(c)),c=ra(c,1);return n}var O7=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(r){var a=sb(r),c=Ia(n.props.date,r)&&br(n.props.date,r);return te.createElement("div",{className:c?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:n.onChange.bind(n,a),"aria-selected":c?"true":void 0},c?te.createElement("span",{className:"react-datepicker__month-year-option--selected"},"?"):"",On(r,n.props.dateFormat,n.props.locale))})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:P7(n.props.minDate,n.props.maxDate,n.props.date)},n}return e.prototype.render=function(){var t=bi({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return te.createElement(Oy,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(P.Component),g1=5,M7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n,r,a=(n=t.props.minDate)!==null&&n!==void 0?n:oc(t.props.date,g1),c=(r=t.props.maxDate)!==null&&r!==void 0?r:ta(t.props.date,g1),d=Po(a),p=Po(c),m=[];!Ro(d,p);){var w=sb(d);m.push(te.createElement("option",{key:w,value:w},On(d,t.props.dateFormat,t.props.locale))),d=ra(d,1)}return m},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return te.createElement("select",{value:sb(Po(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var r=On(t.props.date,t.props.dateFormat,t.props.locale);return te.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},te.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),te.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))},t.renderDropdown=function(){return te.createElement(O7,Tt({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,r=[t.renderReadView(!n)];return n&&r.unshift(t.renderDropdown()),r},t.onChange=function(n){t.toggleDropdown();var r=Gt(n);Ia(t.props.date,r)&&br(t.props.date,r)||t.props.onChange(r)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return te.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(P.Component),k7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,r,a;t.list&&(t.list.scrollTop=(a=t.centerLi&&e.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((r=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&r!==void 0?r:0):t.list.clientHeight,t.centerLi))!==null&&a!==void 0?a:0)})},t.handleClick=function(n){var r,a;(t.props.minTime||t.props.maxTime)&&a1(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&s1(n,t.props)||(a=(r=t.props).onChange)===null||a===void 0||a.call(r,n)},t.isSelectedTime=function(n){var r=lu(t.props.selected);return r&&YO(r,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&a1(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&s1(n,t.props)},t.liClasses=function(n){var r,a=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&a.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&a.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(sr(n)*3600+ar(n)*60+Jl(n))%(((r=t.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},t.handleOnKeyDown=function(n,r){var a,c;n.key===qe.Space&&(n.preventDefault(),n.key=qe.Enter),(n.key===qe.ArrowUp||n.key===qe.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===qe.ArrowDown||n.key===qe.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===qe.Enter&&t.handleClick(r),(c=(a=t.props).handleOnKeyDown)===null||c===void 0||c.call(a,n)},t.renderTimes=function(){for(var n,r=[],a=typeof t.props.format=="string"?t.props.format:"p",c=(n=t.props.intervals)!==null&&n!==void 0?n:e.defaultProps.intervals,d=lu(t.props.selected)||lu(t.props.openToDate)||Gt(),p=qf(d),m=t.props.injectTimes&&t.props.injectTimes.sort(function(R,k){return R.getTime()-k.getTime()}),w=60*S7(d),b=w/c,S=0;S<b;S++){var C=Tp(p,S*c);if(r.push(C),m){var N=T7(p,C,S,c,m);r=r.concat(N)}}var O=r.reduce(function(R,k){return k.getTime()<=d.getTime()?k:R},r[0]);return r.map(function(R){return te.createElement("li",{key:R.valueOf(),onClick:t.handleClick.bind(t,R),className:t.liClasses(R),ref:function(k){R===O&&(t.centerLi=k)},onKeyDown:function(k){t.handleOnKeyDown(k,R)},tabIndex:R===O?0:-1,role:"option","aria-selected":t.isSelectedTime(R)?"true":void 0,"aria-disabled":t.isDisabledTime(R)?"true":void 0},On(R,a,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?te.createElement(te.Fragment,null):te.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},te.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},e.prototype.updateContainerHeight=function(){if(this.props.monthRef&&this.header){var t=this.props.monthRef.clientHeight-this.header.clientHeight;this.state.height!==t&&this.setState({height:t})}},e.prototype.render=function(){var t=this,n,r=this.state.height;return te.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),te.createElement("div",{className:"react-datepicker__time"},te.createElement("div",{className:"react-datepicker__time-box"},te.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){t.list=a},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},e})(P.Component),_1=3,L7=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.YEAR_REFS=Ma([],Array(n.props.yearItemNumber),!0).map(function(){return P.createRef()}),n.isDisabled=function(r){return Ds(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return HE(r,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var r;return(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection},n.updateFocusOnPaginate=function(r){var a=function(){var c,d;(d=(c=n.YEAR_REFS[r])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus()};window.requestAnimationFrame(a)},n.handleYearClick=function(r,a){n.props.onDayClick&&n.props.onDayClick(r,a)},n.handleYearNavigation=function(r,a){var c,d,p,m,w=n.props,b=w.date,S=w.yearItemNumber;if(!(b===void 0||S===void 0)){var C=Ao(b,S).startPeriod;n.isDisabled(a)||n.isExcluded(a)||((d=(c=n.props).setPreSelection)===null||d===void 0||d.call(c,a),r-C<0?n.updateFocusOnPaginate(S-(C-r)):r-C>=S?n.updateFocusOnPaginate(Math.abs(S-(r-C))):(m=(p=n.YEAR_REFS[r-C])===null||p===void 0?void 0:p.current)===null||m===void 0||m.focus())}},n.isSameDay=function(r,a){return Lt(r,a)},n.isCurrentYear=function(r){return r===Dt(Gt())},n.isRangeStart=function(r){return n.props.startDate&&n.props.endDate&&Ia(Ca(Gt(),r),n.props.startDate)},n.isRangeEnd=function(r){return n.props.startDate&&n.props.endDate&&Ia(Ca(Gt(),r),n.props.endDate)},n.isInRange=function(r){return wg(r,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(r){var a=n.props,c=a.selectsStart,d=a.selectsEnd,p=a.selectsRange,m=a.startDate,w=a.endDate;return!(c||d||p)||!n.selectingDate()?!1:c&&w?wg(r,n.selectingDate(),w):d&&m||p&&m&&!w?wg(r,m,n.selectingDate()):!1},n.isSelectingRangeStart=function(r){var a;if(!n.isInSelectingRange(r))return!1;var c=n.props,d=c.startDate,p=c.selectsStart,m=Ca(Gt(),r);return p?Ia(m,(a=n.selectingDate())!==null&&a!==void 0?a:null):Ia(m,d??null)},n.isSelectingRangeEnd=function(r){var a;if(!n.isInSelectingRange(r))return!1;var c=n.props,d=c.endDate,p=c.selectsEnd,m=c.selectsRange,w=Ca(Gt(),r);return p||m?Ia(w,(a=n.selectingDate())!==null&&a!==void 0?a:null):Ia(w,d??null)},n.isKeyboardSelected=function(r){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var a=n.props,c=a.minDate,d=a.maxDate,p=a.excludeDates,m=a.includeDates,w=a.filterDate,b=a.selected,S=Yf(Ca(n.props.date,r)),C=(c||d||p||m||w)&&Wg(r,n.props),N=!!b&&Lt(S,Yf(b)),O=Lt(S,Yf(n.props.preSelection));return!n.props.inline&&!N&&O&&!C}},n.isSelectedYear=function(r){var a=n.props,c=a.selectsMultiple,d=a.selected,p=a.selectedDates;return c?p?.some(function(m){return r===Dt(m)}):!!d&&r===Dt(d)},n.onYearClick=function(r,a){var c=n.props.date;c!==void 0&&n.handleYearClick(Yf(Ca(c,a)),r)},n.onYearKeyDown=function(r,a){var c,d,p=r.key,m=n.props,w=m.date,b=m.yearItemNumber,S=m.handleOnKeyDown;if(p!==qe.Tab&&r.preventDefault(),!n.props.disabledKeyboardNavigation)switch(p){case qe.Enter:if(n.props.selected==null)break;n.onYearClick(r,a),(d=(c=n.props).setPreSelection)===null||d===void 0||d.call(c,n.props.selected);break;case qe.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(a+1,ta(n.props.preSelection,1));break;case qe.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(a-1,oc(n.props.preSelection,1));break;case qe.ArrowUp:{if(w===void 0||b===void 0||n.props.preSelection==null)break;var C=Ao(w,b).startPeriod,N=_1,O=a-N;if(O<C){var R=b%N;a>=C&&a<C+R?N=R:N+=R,O=a-N}n.handleYearNavigation(O,oc(n.props.preSelection,N));break}case qe.ArrowDown:{if(w===void 0||b===void 0||n.props.preSelection==null)break;var k=Ao(w,b).endPeriod,N=_1,O=a+N;if(O>k){var R=b%N;a<=k&&a>k-R?N=R:N+=R,O=a+N}n.handleYearNavigation(O,ta(n.props.preSelection,N));break}}S&&S(r)},n.getYearClassNames=function(r){var a=n.props,c=a.date,d=a.disabled,p=a.minDate,m=a.maxDate,w=a.excludeDates,b=a.includeDates,S=a.filterDate,C=a.yearClassName;return bi("react-datepicker__year-text","react-datepicker__year-".concat(r),c?C?.(Ca(c,r)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(r),"react-datepicker__year-text--disabled":(p||m||w||b||S||d)&&Wg(r,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(r),"react-datepicker__year-text--range-start":n.isRangeStart(r),"react-datepicker__year-text--range-end":n.isRangeEnd(r),"react-datepicker__year-text--in-range":n.isInRange(r),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(r),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(r),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(r),"react-datepicker__year-text--today":n.isCurrentYear(r)})},n.getYearTabIndex=function(r){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var a=Dt(n.props.preSelection),c=Wg(r,n.props);return r===a&&!c?"0":"-1"},n.getYearContent=function(r){return n.props.renderYearContent?n.props.renderYearContent(r):r},n}return e.prototype.render=function(){var t=this,n=[],r=this.props,a=r.date,c=r.yearItemNumber,d=r.onYearMouseEnter,p=r.onYearMouseLeave;if(a===void 0)return null;for(var m=Ao(a,c),w=m.startPeriod,b=m.endPeriod,S=function(O){n.push(te.createElement("div",{ref:C.YEAR_REFS[O-w],onClick:function(R){t.onYearClick(R,O)},onKeyDown:function(R){GO(R)&&(R.preventDefault(),R.key=qe.Enter),t.onYearKeyDown(R,O)},tabIndex:Number(C.getYearTabIndex(O)),className:C.getYearClassNames(O),onMouseEnter:C.props.usePointerEvent?void 0:function(R){return d(R,O)},onPointerEnter:C.props.usePointerEvent?function(R){return d(R,O)}:void 0,onMouseLeave:C.props.usePointerEvent?void 0:function(R){return p(R,O)},onPointerLeave:C.props.usePointerEvent?function(R){return p(R,O)}:void 0,key:O,"aria-current":C.isCurrentYear(O)?"date":void 0},C.getYearContent(O)))},C=this,N=w;N<=b;N++)S(N);return te.createElement("div",{className:"react-datepicker__year"},te.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},e})(P.Component);function j7(i,e,t,n){for(var r=[],a=0;a<2*e+1;a++){var c=i+e-a,d=!0;t&&(d=Dt(t)<=c),n&&d&&(d=Dt(n)>=c),d&&r.push(c)}return r}var V7=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(d,p){var m;switch(p.key){case"Enter":p.preventDefault(),n.onChange(d);break;case"Escape":p.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{p.preventDefault();var w=d+(p.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[w]&&((m=n.yearOptionButtonsRef[w])===null||m===void 0||m.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var d=n.props.year,p=n.state.yearsList.map(function(b){return te.createElement("div",{ref:function(S){n.yearOptionButtonsRef[b]=S,b===d&&S?.focus()},role:"button",tabIndex:0,className:d===b?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:b,onClick:n.onChange.bind(n,b),onKeyDown:n.handleOptionKeyDown.bind(n,b),"aria-selected":d===b?"true":void 0},d===b?te.createElement("span",{className:"react-datepicker__year-option--selected"},"?"):"",b)}),m=n.props.minDate?Dt(n.props.minDate):null,w=n.props.maxDate?Dt(n.props.maxDate):null;return(!w||!n.state.yearsList.find(function(b){return b===w}))&&p.unshift(te.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},te.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!m||!n.state.yearsList.find(function(b){return b===m}))&&p.push(te.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},te.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),p},n.onChange=function(d){n.props.onChange(d)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(d){var p=n.state.yearsList.map(function(m){return m+d});n.setState({yearsList:p})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var r=t.yearDropdownItemNumber,a=t.scrollableYearDropdown,c=r||(a?10:5);return n.state={yearsList:j7(n.props.year,c,n.props.minDate,n.props.maxDate)},n.dropdownRef=P.createRef(),n}return e.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,r=n?n.find(function(a){return a.ariaSelected}):null;t.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},e.prototype.render=function(){var t=bi({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return te.createElement(Oy,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(P.Component),U7=(function(i){qi(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Dt(t.props.minDate):1900,r=t.props.maxDate?Dt(t.props.maxDate):2100,a=[],c=n;c<=r;c++)a.push(te.createElement("option",{key:c,value:c},c));return a},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return te.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return te.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},te.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),te.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return te.createElement(V7,Tt({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,r=[t.renderReadView(!n)];return n&&r.unshift(t.renderDropdown()),r},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,r){var a;(a=t.onSelect)===null||a===void 0||a.call(t,n,r),t.setOpen()},t.onSelect=function(n,r){var a,c;(c=(a=t.props).onSelect)===null||c===void 0||c.call(a,n,r)},t.setOpen=function(){var n,r;(r=(n=t.props).setOpen)===null||r===void 0||r.call(n,!0)},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return te.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(P.Component),B7=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],WO="react-datepicker-ignore-onclickoutside",z7=function(i){var e=(i.className||"").split(/\s+/);return B7.some(function(t){return e.indexOf(t)>=0})},F7=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(r){n.props.onClickOutside(r)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(r){var a,c;z7(r.target)&&((c=(a=n.props).onDropdownFocus)===null||c===void 0||c.call(a,r))},n.getDateInView=function(){var r=n.props,a=r.preSelection,c=r.selected,d=r.openToDate,p=HO(n.props),m=qO(n.props),w=Gt(),b=d||c||a;return b||(p&&Oa(w,p)?p:m&&Ro(w,m)?m:w)},n.increaseMonth=function(){n.setState(function(r){var a=r.date;return{date:ra(a,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(r){var a=r.date;return{date:fu(a,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(r,a,c){n.props.onSelect(r,a,c),n.props.setPreSelection&&n.props.setPreSelection(r)},n.handleDayMouseEnter=function(r){n.setState({selectingDate:r}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(r,a){n.setState({selectingDate:Ca(Gt(),a)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(r,a)},n.handleYearMouseLeave=function(r,a){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(r,a)},n.handleYearChange=function(r){var a,c,d,p;(c=(a=n.props).onYearChange)===null||c===void 0||c.call(a,r),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(r),(p=(d=n.props).setOpen)===null||p===void 0||p.call(d,!0)),n.props.setPreSelection&&n.props.setPreSelection(r)},n.getEnabledPreSelectionDateForMonth=function(r){if(!Ds(r,n.props))return r;for(var a=Po(r),c=d7(r),d=b9(c,a),p=null,m=0;m<=d;m++){var w=ea(a,m);if(!Ds(w,n.props)){p=w;break}}return p},n.handleMonthChange=function(r){var a,c,d,p=(a=n.getEnabledPreSelectionDateForMonth(r))!==null&&a!==void 0?a:r;n.handleCustomMonthChange(p),n.props.adjustDateOnChange&&(n.props.onSelect(p),(d=(c=n.props).setOpen)===null||d===void 0||d.call(c,!0)),n.props.setPreSelection&&n.props.setPreSelection(p)},n.handleCustomMonthChange=function(r){var a,c;(c=(a=n.props).onMonthChange)===null||c===void 0||c.call(a,r),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(r){n.handleYearChange(r),n.handleMonthChange(r)},n.changeYear=function(r){n.setState(function(a){var c=a.date;return{date:Ca(c,Number(r))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(r){n.setState(function(a){var c=a.date;return{date:ls(c,Number(r))}},function(){var a,c;n.handleMonthChange(n.state.date),(c=(a=n.props).onMonthSelectedInChange)===null||c===void 0||c.call(a,0)})},n.changeMonthYear=function(r){n.setState(function(a){var c=a.date;return{date:Ca(ls(c,Gr(r)),Dt(r))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(r,a){if(r===void 0&&(r=n.state.date),a===void 0&&(a=0),!Yr(r))return[];var c=n.props.disabled,d=ec(r,n.props.locale,n.props.calendarStartDay),p=[];return n.props.showWeekNumbers&&p.push(te.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(c?"react-datepicker__day-name--disabled":""),role:"columnheader"},te.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),te.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),p.concat([0,1,2,3,4,5,6].map(function(m){var w=ea(d,m),b=n.formatWeekday(w,n.props.locale),S=On(w,"EEEE",n.props.locale),C=n.props.weekDayClassName?n.props.weekDayClassName(w):void 0;if(n.props.renderCustomDayName){var N=n.props.renderCustomDayName({day:w,shortName:b,fullName:S,locale:n.props.locale,customDayNameCount:a});return te.createElement("div",{key:m,role:"columnheader",className:bi("react-datepicker__day-name",C,c?"react-datepicker__day-name--disabled":"")},N)}return te.createElement("div",{key:m,role:"columnheader",className:bi("react-datepicker__day-name",C,c?"react-datepicker__day-name--disabled":"")},te.createElement("span",{className:"react-datepicker__sr-only"},S),te.createElement("span",{"aria-hidden":"true"},b))}))},n.formatWeekday=function(r,a){return n.props.formatWeekDay?h7(r,n.props.formatWeekDay,a):n.props.useWeekdaysShort?p7(r,a):f7(r,a)},n.decreaseYear=function(){n.setState(function(r){var a,c=r.date;return{date:oc(c,n.props.showYearPicker?(a=n.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var r,a,c;if(!n.props.renderCustomHeader){var d=(r=n.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,p=n.props.showPreviousMonths?d-1:0,m=(a=n.props.monthSelectedIn)!==null&&a!==void 0?a:p,w=fu(n.state.date,m),b;switch(!0){case n.props.disabled:b=!0;break;case n.props.showMonthYearPicker:b=c1(n.state.date,n.props);break;case n.props.showYearPicker:b=v7(n.state.date,n.props);break;case n.props.showQuarterYearPicker:b=_7(n.state.date,n.props);break;default:b=o1(w,n.props);break}if(!(!((c=n.props.forceShowMonthNavigation)!==null&&c!==void 0?c:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&b||n.props.showTimeSelectOnly)){var S=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],C=["react-datepicker__navigation","react-datepicker__navigation--previous"],N=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(N=n.decreaseYear),b&&n.props.showDisabledMonthNavigation&&(C.push("react-datepicker__navigation--previous--disabled"),N=void 0);var O=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,R=n.props,k=R.previousMonthButtonLabel,G=k===void 0?e.defaultProps.previousMonthButtonLabel:k,Z=R.previousYearButtonLabel,ne=Z===void 0?e.defaultProps.previousYearButtonLabel:Z,ee=n.props,de=ee.previousMonthAriaLabel,B=de===void 0?typeof G=="string"?G:"Previous Month":de,V=ee.previousYearAriaLabel,j=V===void 0?typeof ne=="string"?ne:"Previous Year":V;return te.createElement("button",{type:"button",className:C.join(" "),onClick:N,onKeyDown:n.props.handleOnKeyDown,"aria-label":O?j:B},te.createElement("span",{className:S.join(" ")},O?ne:G))}}},n.increaseYear=function(){n.setState(function(r){var a,c=r.date;return{date:ta(c,n.props.showYearPicker?(a=n.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var r;if(!n.props.renderCustomHeader){var a;switch(!0){case n.props.disabled:a=!0;break;case n.props.showMonthYearPicker:a=u1(n.state.date,n.props);break;case n.props.showYearPicker:a=w7(n.state.date,n.props);break;case n.props.showQuarterYearPicker:a=y7(n.state.date,n.props);break;default:a=l1(n.state.date,n.props);break}if(!(!((r=n.props.forceShowMonthNavigation)!==null&&r!==void 0?r:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&a||n.props.showTimeSelectOnly)){var c=["react-datepicker__navigation","react-datepicker__navigation--next"],d=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&c.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&c.push("react-datepicker__navigation--next--with-today-button");var p=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(p=n.increaseYear),a&&n.props.showDisabledMonthNavigation&&(c.push("react-datepicker__navigation--next--disabled"),p=void 0);var m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,w=n.props,b=w.nextMonthButtonLabel,S=b===void 0?e.defaultProps.nextMonthButtonLabel:b,C=w.nextYearButtonLabel,N=C===void 0?e.defaultProps.nextYearButtonLabel:C,O=n.props,R=O.nextMonthAriaLabel,k=R===void 0?typeof S=="string"?S:"Next Month":R,G=O.nextYearAriaLabel,Z=G===void 0?typeof N=="string"?N:"Next Year":G;return te.createElement("button",{type:"button",className:c.join(" "),onClick:p,onKeyDown:n.props.handleOnKeyDown,"aria-label":m?Z:k},te.createElement("span",{className:d.join(" ")},m?N:S))}}},n.renderCurrentMonth=function(r){r===void 0&&(r=n.state.date);var a=["react-datepicker__current-month"];return n.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),te.createElement("h2",{className:a.join(" ")},Yr(r)?On(r,n.props.dateFormat,n.props.locale):"")},n.renderYearDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showYearDropdown||r))return te.createElement(U7,Tt({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Dt(n.state.date)}))},n.renderMonthDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showMonthDropdown||r))return te.createElement(R7,Tt({},e.defaultProps,n.props,{month:Gr(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showMonthYearDropdown||r))return te.createElement(M7,Tt({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(r){n.props.onSelect(n1(),r),n.props.setPreSelection&&n.props.setPreSelection(n1())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return te.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(r,a){return a===void 0&&(a=0),te.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(r,a))},n.renderDefaultHeader=function(r){var a=r.monthDate,c=r.i,d=te.createElement("div",{className:bi("react-datepicker__header",{"react-datepicker__header--has-time-select":n.props.showTimeSelect,"react-datepicker__header--middle":n.props.monthHeaderPosition==="middle","react-datepicker__header--bottom":n.props.monthHeaderPosition==="bottom"})},n.renderCurrentMonth(a),te.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(c!==0),n.renderMonthYearDropdown(c!==0),n.renderYearDropdown(c!==0)));return n.props.monthHeaderPosition==="top"?d:te.createElement("div",{className:"react-datepicker__header-wrapper"},n.renderPreviousButton()||null,n.renderNextButton()||null,d)},n.renderCustomHeader=function(r){var a,c,d=r.monthDate,p=r.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var m=n.props,w=m.showYearPicker,b=m.yearItemNumber,S;if(w){var C=Ao(d,b),N=C.startPeriod,O=C.endPeriod;S={startYear:N,endYear:O}}var R=o1(n.state.date,n.props),k=l1(n.state.date,n.props),G=c1(n.state.date,n.props),Z=u1(n.state.date,n.props);return te.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(c=(a=n.props).renderCustomHeader)===null||c===void 0?void 0:c.call(a,Tt(Tt(Tt({},n.state),w&&{visibleYearsRange:S}),{customHeaderCount:p,monthDate:d,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:R,nextMonthButtonDisabled:k,prevYearButtonDisabled:G,nextYearButtonDisabled:Z})))},n.renderYearHeader=function(r){var a=r.monthDate,c=n.props,d=c.showYearPicker,p=c.yearItemNumber,m=p===void 0?e.defaultProps.yearItemNumber:p,w=Ao(a,m),b=w.startPeriod,S=w.endPeriod;return te.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},d?"".concat(b," - ").concat(S):Dt(a))},n.renderHeader=function(r){var a=r.monthDate,c=r.i,d=c===void 0?0:c,p={monthDate:a,i:d};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(p);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(p);default:return n.renderDefaultHeader(p)}},n.renderMonths=function(){var r,a;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var c=[],d=(r=n.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,p=n.props.showPreviousMonths?d-1:0,m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ta(n.state.date,p):fu(n.state.date,p),w=(a=n.props.monthSelectedIn)!==null&&a!==void 0?a:p,b=0;b<d;++b){var S=b-w+p,C=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ta(m,S):ra(m,S),N="month-".concat(b),O=b<d-1,R=b>0;c.push(te.createElement("div",{key:N,ref:function(k){n.monthContainer=k??void 0},className:"react-datepicker__month-container"},n.props.monthHeaderPosition==="top"&&n.renderHeader({monthDate:C,i:b}),te.createElement(N7,Tt({},e.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:C,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:b,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:O,monthShowsDuplicateDaysStart:R,dayNamesHeader:n.renderDayNamesHeader(C,b),monthHeader:n.props.monthHeaderPosition==="middle"?n.renderHeader({monthDate:C,i:b}):void 0,monthFooter:n.props.monthHeaderPosition==="bottom"?n.renderHeader({monthDate:C,i:b}):void 0}))))}return c}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return te.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),te.createElement(L7,Tt({},e.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return te.createElement(k7,Tt({},e.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var r,a;if(n.props.showTimeInput){if(n.props.selectsRange){var c=n.props,d=c.startDate,p=c.endDate,m=d?new Date(d):void 0,w=m&&Yr(m)&&!!d,b=w?"".concat(Sd(m.getHours()),":").concat(Sd(m.getMinutes())):"",S=p?new Date(p):void 0,C=S&&Yr(S)&&!!p,N=C?"".concat(Sd(S.getHours()),":").concat(Sd(S.getMinutes())):"";return te.createElement(te.Fragment,null,te.createElement(o0,Tt({},e.defaultProps,n.props,{date:m,timeString:b,onChange:function(G){var Z,ne;(ne=(Z=n.props).onTimeChange)===null||ne===void 0||ne.call(Z,G,"start")},timeInputLabel:((r=n.props.timeInputLabel)!==null&&r!==void 0?r:"Time")+" (Start)"})),te.createElement(o0,Tt({},e.defaultProps,n.props,{date:S,timeString:N,onChange:function(G){var Z,ne;(ne=(Z=n.props).onTimeChange)===null||ne===void 0||ne.call(Z,G,"end")},timeInputLabel:((a=n.props.timeInputLabel)!==null&&a!==void 0?a:"Time")+" (End)"})))}var O=n.props.selected?new Date(n.props.selected):void 0,R=O&&Yr(O)&&!!n.props.selected,k=R?"".concat(Sd(O.getHours()),":").concat(Sd(O.getMinutes())):"";return te.createElement(o0,Tt({},e.defaultProps,n.props,{date:O,timeString:k,onChange:function(G){var Z,ne;(ne=(Z=n.props).onTimeChange)===null||ne===void 0||ne.call(Z,G)}}))}},n.renderAriaLiveRegion=function(){var r;if(!Yr(n.state.date))return te.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var a=Ao(n.state.date,(r=n.props.yearItemNumber)!==null&&r!==void 0?r:e.defaultProps.yearItemNumber),c=a.startPeriod,d=a.endPeriod,p;return n.props.showYearPicker?p="".concat(c," - ").concat(d):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?p=Dt(n.state.date):p="".concat(FE(Gr(n.state.date),n.props.locale)," ").concat(Dt(n.state.date)),te.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&p)},n.renderChildren=function(){if(n.props.children)return te.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=P.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:WO,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Zp,monthHeaderPosition:"top"}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){t.setState({monthContainer:t.monthContainer})})())},e.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&Yr(this.props.preSelection)&&(!Lt(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var r=!br(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return r&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Lt(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var t=this.props.container||i7;return te.createElement(Oy,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},te.createElement("div",{style:{display:"contents"},ref:this.containerRef},te.createElement(t,{className:bi("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.props.monthHeaderPosition==="top"&&this.renderPreviousButton(),this.props.monthHeaderPosition==="top"&&this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(P.Component),H7=function(i){var e=i.icon,t=i.className,n=t===void 0?"":t,r=i.onClick,a="react-datepicker__calendar-icon";if(typeof e=="string")return te.createElement("i",{className:"".concat(a," ").concat(e," ").concat(n),"aria-hidden":"true",onClick:r});if(te.isValidElement(e)){var c=e;return te.cloneElement(c,{className:"".concat(c.props.className||""," ").concat(a," ").concat(n),onClick:function(d){typeof c.props.onClick=="function"&&c.props.onClick(d),typeof r=="function"&&r(d)}})}return te.createElement("svg",{className:"".concat(a," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},te.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},KO=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return iL.createPortal(this.props.children,this.el)},e})(P.Component),q7="[tabindex], a, button, input, select, textarea",Y7=function(i){return(i instanceof HTMLAnchorElement||!i.disabled)&&i.tabIndex!==-1},ZO=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.getTabChildren=function(){var r;return Array.prototype.slice.call((r=n.tabLoopRef.current)===null||r===void 0?void 0:r.querySelectorAll(q7),1,-1).filter(Y7)},n.handleFocusStart=function(){var r=n.getTabChildren();r&&r.length>1&&r[r.length-1].focus()},n.handleFocusEnd=function(){var r=n.getTabChildren();r&&r.length>1&&r[0].focus()},n.tabLoopRef=P.createRef(),n}return e.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:e.defaultProps.enableTabLoop)?te.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},te.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,te.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(P.Component);function G7(i){function e(t){var n,r=typeof t.hidePopper=="boolean"?t.hidePopper:!0,a=P.useRef(null),c=n7(Tt({open:!r,whileElementsMounted:Mq,placement:t.popperPlacement,middleware:Ma([Hq({padding:15}),Fq(10),qq({element:a})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),d=Tt(Tt({},t),{hidePopper:r,popperProps:Tt(Tt({},c),{arrowRef:a})});return te.createElement(i,Tt({},d))}return e.displayName="withFloating(".concat(i.displayName||i.name||"Component",")"),e}var W7=function(i){var e=i.className,t=i.wrapperClassName,n=i.hidePopper,r=n===void 0?!0:n,a=i.popperComponent,c=i.targetComponent,d=i.enableTabLoop,p=i.popperOnKeyDown,m=i.portalId,w=i.portalHost,b=i.popperProps,S=i.showArrow,C=i.popperTargetRef,N=i.monthHeaderPosition;P.useEffect(function(){C?.current&&b.refs.setPositionReference(C.current)},[C,b.refs]);var O=void 0;if(!r){var R=bi("react-datepicker-popper",!S&&"react-datepicker-popper-offset",N==="middle"&&"react-datepicker-popper--header-middle",N==="bottom"&&"react-datepicker-popper--header-bottom",e);O=te.createElement(ZO,{enableTabLoop:d},te.createElement("div",{ref:b.refs.setFloating,style:b.floatingStyles,className:R,"data-placement":b.placement,onKeyDown:p},a,S&&te.createElement(Zq,{ref:b.arrowRef,context:b.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}i.popperContainer&&(O=P.createElement(i.popperContainer,{},O)),m&&!r&&(O=te.createElement(KO,{portalId:m,portalHost:w},O));var k=bi("react-datepicker-wrapper",t);return te.createElement(te.Fragment,null,te.createElement("div",{ref:b.refs.setReference,className:k},c),O)},K7=G7(W7);function y1(i,e){return i&&e?Gr(i)!==Gr(e)||Dt(i)!==Dt(e):i!==e}var c0="Date input not valid.",Cp=(function(i){qi(e,i);function e(t){var n=i.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){var r=n.props.timeZone,a=n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Gt();return r?e1(a,r):a},n.modifyHolidays=function(){var r;return(r=n.props.holidays)===null||r===void 0?void 0:r.reduce(function(a,c){var d=Wc(c.date,"yyyy-MM-dd",void 0,!1);return d?Ma(Ma([],a,!0),[Tt(Tt({},c),{date:d})],!1):a},[])},n.calcInitialState=function(){var r=n.props.timeZone,a=n.getPreSelection(),c=HO(n.props),d=qO(n.props),p=c&&Oa(a,qf(c))?c:d&&Ro(a,i1(d))?d:a,m=n.props.selectsRange?n.props.startDate:n.props.selected;return m&&r&&(m=e1(m,r)),{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:m??p,highlightDates:d1(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var r,a=n.props,c=a.locale,d=a.startDate,p=a.endDate,m=a.rangeSeparator,w=a.selected,b=a.selectedDates,S=a.selectsMultiple,C=a.selectsRange,N=a.formatMultipleDates,O=a.value,R=(r=n.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,k=n.state.inputValue;if(typeof O=="string")return O;if(typeof k=="string")return k;if(C)return a7(d,p,{dateFormat:R,locale:c,rangeSeparator:m});if(S){if(N){var G=function(Z){return Hr(Z,{dateFormat:R,locale:c})};return N(b??[],G)}return o7(b??[],{dateFormat:R,locale:c})}return Hr(w,{dateFormat:R,locale:c})},n.resetHiddenStatus=function(){n.setState(Tt(Tt({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Tt(Tt({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var r,a;(a=(r=n.input)===null||r===void 0?void 0:r.focus)===null||a===void 0||a.call(r,{preventScroll:!0})},n.setBlur=function(){var r,a;(a=(r=n.input)===null||r===void 0?void 0:r.blur)===null||a===void 0||a.call(r),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(r,a){a===void 0&&(a=!1),n.setState({open:r,preSelection:r&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:u0},function(){r||n.setState(function(c){return{focused:a?c.focused:!1}},function(){!a&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Va(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(r){var a,c,d=n.state.wasHidden,p=d?n.state.open:!0;d&&n.resetHiddenStatus(),n.state.preventFocus||((c=(a=n.props).onFocus)===null||c===void 0||c.call(a,r),p&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(Tt(Tt({},n.state),{inputValue:null}))},n.handleBlur=function(r){var a,c;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((c=(a=n.props).onBlur)===null||c===void 0||c.call(a,r));var d=n.state.inputValue;if(typeof d=="string"&&d.length>0){var p=/[a-zA-Z0-9]/.test(d);!p&&n.props.selected&&n.setSelected(null,void 0,!0)}n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(r){var a,c;(c=(a=n.props).onClickOutside)===null||c===void 0||c.call(a,r),!n.props.inline&&!r.defaultPrevented&&n.setOpen(!1),n.props.withPortal&&r.preventDefault()},n.handleChange=function(){for(var r,a,c,d,p,m,w,b,S=[],C=0;C<arguments.length;C++)S[C]=arguments[C];var N=S[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,S),!N||typeof N.isDefaultPrevented!="function"||N.isDefaultPrevented()))){n.setState({inputValue:N?.target instanceof HTMLInputElement?N.target.value:null,lastPreSelectChange:Z7});var O=n.props,R=O.selectsRange,k=O.startDate,G=O.endDate,Z=(r=n.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,ne=(a=n.props.strictParsing)!==null&&a!==void 0?a:e.defaultProps.strictParsing,ee=N?.target instanceof HTMLInputElement?N.target.value:"";if(R){var de=n.props.rangeSeparator,B=de.trim(),V=ee.split(Z.includes(B)?de:B,2).map(function(le){return le.trim()}),j=V[0],F=V[1],q=Wc(j??"",Z,n.props.locale,ne),z=q?Wc(F??"",Z,n.props.locale,ne):null,H=((c=lu(k))===null||c===void 0?void 0:c.getTime())!==q?.getTime(),Re=((d=lu(G))===null||d===void 0?void 0:d.getTime())!==z?.getTime();if(!H&&!Re||q&&Ds(q,n.props)||z&&Ds(z,n.props))return;q&&n.setState({preSelection:q}),(m=(p=n.props).onChange)===null||m===void 0||m.call(p,[q,z],N)}else{var Ve=Wc(ee,Z,n.props.locale,ne,(w=n.props.selected)!==null&&w!==void 0?w:void 0);if(Ve||!ee)n.setSelected(Ve,N,!0);else if(!n.props.inline){var W=s7(ee,(b=n.state.preSelection)!==null&&b!==void 0?b:void 0);W&&(!n.props.minDate||!Oa(W,n.props.minDate))&&(!n.props.maxDate||!Ro(W,n.props.maxDate))&&n.setState({preSelection:W})}}}},n.handleSelect=function(r,a,c){var d;if(!n.props.readOnly){var p=n.props,m=p.selectsRange,w=p.startDate,b=p.endDate,S=p.locale,C=p.swapRange,N=(d=n.props.dateFormat)!==null&&d!==void 0?d:e.defaultProps.dateFormat,O=!m||w&&!b&&(C||!a0(r,w));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&O&&n.sendFocusBackToInput(),n.props.onChangeRaw){var R=Hr(r,{dateFormat:N,locale:S});n.props.onChangeRaw(a,{date:r,formattedDate:R})}n.setSelected(r,a,!1,c),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(r):O&&n.setOpen(!1)}},n.setSelected=function(r,a,c,d){var p,m,w=n.props.timeZone,b=r;if(b&&w&&(b=wo(b,w)),n.props.showYearPicker){if(b!==null&&Wg(Dt(b),n.props))return}else if(n.props.showMonthYearPicker){if(b!==null&&FO(b,n.props))return}else if(b!==null&&Ds(b,n.props))return;var S=n.props,C=S.onChange,N=S.selectsRange,O=S.startDate,R=S.endDate,k=S.selectsMultiple,G=S.selectedDates,Z=S.minTime,ne=S.swapRange;if(!cu(n.props.selected,b)||n.props.allowSameDay||N||k)if(b!==null&&(n.props.selected&&(!c||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(b=bo(b,{hour:sr(n.props.selected),minute:ar(n.props.selected),second:Jl(n.props.selected)})),!c&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&Z&&(b=bo(b,{hour:Z.getHours(),minute:Z.getMinutes(),second:Z.getSeconds()})),n.props.inline||n.setState({preSelection:b}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:d})),N){var ee=C,de=!O&&!R,B=O&&!R,V=!O&&!!R,j=O&&R;de?ee?.([b,null],a):B?b===null?ee?.([null,null],a):a0(b,O)?ee?.(ne?[b,O]:[b,null],a):ee?.([O,b],a):V&&(b&&a0(b,R)?ee?.([b,R],a):ee?.([b,null],a)),j&&ee?.([b,null],a)}else if(k){var F=C;if(b!==null)if(!G?.length)F?.([b],a);else{var q=G.some(function(H){return Lt(H,b)});if(q){var z=G.filter(function(H){return!Lt(H,b)});F?.(z,a)}else F?.(Ma(Ma([],G,!0),[b],!1),a)}}else C?.(b,a);c||((m=(p=n.props).onSelect)===null||m===void 0||m.call(p,b,a),n.setState({inputValue:null}))},n.setPreSelection=function(r){if(!n.props.readOnly){var a=Va(n.props.minDate),c=Va(n.props.maxDate),d=!0;if(r){var p=qf(r);if(a&&c)d=Xc(r,n.props.minDate,n.props.maxDate);else if(a){var m=qf(n.props.minDate);d=Ro(r,m)||cu(p,m)}else if(c){var w=i1(n.props.maxDate);d=Oa(r,w)||cu(p,w)}}d&&n.setState({preSelection:r})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(r,a){var c,d;if(!n.props.selectsMultiple){var p=n.props,m=p.selectsRange,w=p.startDate,b=p.endDate,S=p.onChange,C=p.timeZone;if(m){var N=S;if(a==="start"){if(w){var O=bo(w,{hour:sr(r),minute:ar(r)});n.setState({preSelection:O}),C&&(O=wo(O,C)),N?.([O,b?C?wo(b,C):b:null],void 0)}}else if(a==="end"){if(b){var R=bo(b,{hour:sr(r),minute:ar(r)});n.setState({preSelection:R}),C&&(R=wo(R,C)),N?.([w?C?wo(w,C):w:null,R],void 0)}}else{var k=w&&!b;if(k){var O=bo(w,{hour:sr(r),minute:ar(r)});n.setState({preSelection:O}),C&&(O=wo(O,C)),N?.([O,null],void 0)}else if(w&&b){var R=bo(b,{hour:sr(r),minute:ar(r)});n.setState({preSelection:R}),C&&(R=wo(R,C)),N?.([C?wo(w,C):w,R],void 0)}else{var G=bo(n.getPreSelection(),{hour:sr(r),minute:ar(r)});n.setState({preSelection:G})}}}else{var Z=n.props.selected?n.props.selected:n.getPreSelection(),G=n.props.selected?r:bo(Z,{hour:sr(r),minute:ar(r)});n.setState({preSelection:G}),G&&C&&(G=wo(G,C)),(d=(c=n.props).onChange)===null||d===void 0||d.call(c,G)}n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var r,a;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(a=(r=n.props).onInputClick)===null||a===void 0||a.call(r)},n.handleTimeOnlyArrowKey=function(r){var a,c,d,p,m=lu(n.props.selected)||n.state.preSelection||Gt(),w=(a=n.props.timeIntervals)!==null&&a!==void 0?a:30,b=(c=n.props.dateFormat)!==null&&c!==void 0?c:e.defaultProps.dateFormat,S=Array.isArray(b)?b[0]:b,C=qf(m),N=sr(m)*60+ar(m),O=1440-w,R;if(r===qe.ArrowUp){var k=Math.max(0,N-w);R=Tp(C,k)}else{var k=Math.min(O,N+w);R=Tp(C,k)}var G=On(R,S||e.defaultProps.dateFormat,n.props.locale);if(n.setState({preSelection:R,inputValue:G}),!(n.props.selectsRange||n.props.selectsMultiple)){var Z=n.props.selected?n.props.selected:n.getPreSelection(),ne=n.props.selected?R:bo(Z,{hour:sr(R),minute:ar(R)});(p=(d=n.props).onChange)===null||p===void 0||p.call(d,ne),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){n.scrollToTimeOption(R)})}},n.handleTimeOnlyEnterKey=function(r){var a,c,d,p,m=r.target,w=m.value,b=(a=n.props.dateFormat)!==null&&a!==void 0?a:e.defaultProps.dateFormat,S=n.props.timeFormat||"p",C=n.state.preSelection||lu(n.props.selected)||Gt(),N=Wc(w,b,n.props.locale,(c=n.props.strictParsing)!==null&&c!==void 0?c:!1,C),O=C;if(N&&Yr(N))O=N;else{var R=((d=n.calendar)===null||d===void 0?void 0:d.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(R instanceof HTMLElement){var k=(p=R.textContent)===null||p===void 0?void 0:p.trim();if(k){var G=Wc(k,S,n.props.locale,!1,C);G&&Yr(G)&&(O=G)}}}n.handleTimeChange(O),n.setOpen(!1),n.sendFocusBackToInput()},n.scrollToTimeOption=function(r){var a,c;if(!((a=n.calendar)===null||a===void 0)&&a.containerRef.current){for(var d=n.calendar.containerRef.current,p=Array.from(d.querySelectorAll(".react-datepicker__time-list-item")),m=null,w=1/0,b=n.props.timeFormat||"p",S=0,C=p;S<C.length;S++){var N=C[S],O=(c=N.textContent)===null||c===void 0?void 0:c.trim();if(O){var R=Wc(O,b,n.props.locale,!1,r);if(R&&Yr(R)){if(YO(R,r)){m=N;break}var k=Math.abs(R.getTime()-r.getTime());k<w&&(w=k,m=N)}}}m&&(p.forEach(function(G){G.setAttribute("tabindex","-1")}),m.setAttribute("tabindex","0"),m.scrollIntoView({behavior:"smooth",block:"center"}))}},n.onInputKeyDown=function(r){var a,c,d,p,m,w;(c=(a=n.props).onKeyDown)===null||c===void 0||c.call(a,r);var b=r.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(b===qe.ArrowDown||b===qe.ArrowUp||b===qe.Enter)&&((d=n.onInputClick)===null||d===void 0||d.call(n));return}if(n.state.open&&n.props.showTimeSelectOnly){if(b===qe.ArrowDown||b===qe.ArrowUp){r.preventDefault(),n.handleTimeOnlyArrowKey(b);return}if(b===qe.Enter){r.preventDefault(),n.handleTimeOnlyEnterKey(r);return}}if(n.state.open){if(b===qe.ArrowDown||b===qe.ArrowUp){r.preventDefault();var S=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',C=((p=n.calendar)===null||p===void 0?void 0:p.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(S);C instanceof HTMLElement&&C.focus({preventScroll:!0});return}var N=Gt(n.state.preSelection);b===qe.Enter?(r.preventDefault(),r.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===u0?(n.handleSelect(N,r),!n.props.shouldCloseOnSelect&&n.setPreSelection(N)):n.setOpen(!1)):b===qe.Escape?(r.preventDefault(),r.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):b===qe.Tab&&n.setOpen(!1),n.inputOk()||(w=(m=n.props).onInputError)===null||w===void 0||w.call(m,{code:1,msg:c0})}},n.onPortalKeyDown=function(r){var a=r.key;a===qe.Escape&&(r.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(r){var a,c,d,p,m,w,b=n.props,S=b.minDate,C=b.maxDate,N=b.disabledKeyboardNavigation,O=b.showWeekPicker,R=b.shouldCloseOnSelect,k=b.locale,G=b.calendarStartDay,Z=b.adjustDateOnChange,ne=b.inline;if((c=(a=n.props).onKeyDown)===null||c===void 0||c.call(a,r),!N){var ee=r.key,de=r.shiftKey,B=Gt(n.state.preSelection),V=function(q,z){var H=z;switch(q){case qe.ArrowRight:H=O?R_(z,1):ea(z,1);break;case qe.ArrowLeft:H=O?zI(z):b8(z);break;case qe.ArrowUp:H=zI(z);break;case qe.ArrowDown:H=R_(z,1);break;case qe.PageUp:H=de?oc(z,1):fu(z,1);break;case qe.PageDown:H=de?ta(z,1):ra(z,1);break;case qe.Home:H=ec(z,k,G);break;case qe.End:H=u7(z);break}return H},j=function(q,z){for(var H=40,Re=q,Ve=!1,W=0,le=V(q,z);!Ve;){if(W>=H){le=z;break}S&&le<S&&(Re=qe.ArrowRight,le=Ds(S,n.props)?V(Re,le):S),C&&le>C&&(Re=qe.ArrowLeft,le=Ds(C,n.props)?V(Re,le):C),Ds(le,n.props)?((Re===qe.PageUp||Re===qe.Home)&&(Re=qe.ArrowRight),(Re===qe.PageDown||Re===qe.End)&&(Re=qe.ArrowLeft),le=V(Re,le)):Ve=!0,W++}return le};if(ee===qe.Enter){r.preventDefault(),n.handleSelect(B,r),!R&&n.setPreSelection(B);return}else if(ee===qe.Escape){r.preventDefault(),n.setOpen(!1),n.inputOk()||(p=(d=n.props).onInputError)===null||p===void 0||p.call(d,{code:1,msg:c0});return}var F=null;switch(ee){case qe.ArrowLeft:case qe.ArrowRight:case qe.ArrowUp:case qe.ArrowDown:case qe.PageUp:case qe.PageDown:case qe.Home:case qe.End:F=j(ee,B);break}if(!F){(w=(m=n.props).onInputError)===null||w===void 0||w.call(m,{code:1,msg:c0});return}r.preventDefault(),n.setState({lastPreSelectChange:u0}),Z&&n.setSelected(F),n.setPreSelection(F),ne&&n.setState({shouldFocusDayInline:!0})}},n.onPopperKeyDown=function(r){var a=r.key;a===qe.Escape&&(r.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(r){r&&r.preventDefault&&r.preventDefault(),n.sendFocusBackToInput();var a=n.props,c=a.selectsRange,d=a.onChange;d?.(c?[null,null]:null,r),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(r){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(r.target===document||r.target===document.documentElement||r.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(r)&&n.setOpen(!1)},n.handleMonthSelectedInChange=function(r){n.setState({monthSelectedIn:r})},n.renderCalendar=function(){var r,a;return!n.props.inline&&!n.isCalendarOpen()?null:te.createElement(F7,Tt({showMonthYearDropdown:void 0,ref:function(c){n.calendar=c}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(r=n.props.dateFormatCalendar)!==null&&r!==void 0?r:e.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:E7(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(a=n.props.dropdownMode)!==null&&a!==void 0?a:e.defaultProps.dropdownMode,onMonthSelectedInChange:n.handleMonthSelectedInChange}),n.props.children)},n.renderAriaLiveRegion=function(){var r,a=n.props.locale,c=(r=n.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,d=n.props.showTimeInput||n.props.showTimeSelect,p=d?"PPPPp":"PPPP",m;return n.props.selectsRange?m="Selected start date: ".concat(Hr(n.props.startDate,{dateFormat:p,locale:a}),". ").concat(n.props.endDate?"End date: "+Hr(n.props.endDate,{dateFormat:p,locale:a}):""):n.props.showTimeSelectOnly?m="Selected time: ".concat(Hr(n.props.selected,{dateFormat:c,locale:a})):n.props.showYearPicker?m="Selected year: ".concat(Hr(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?m="Selected month: ".concat(Hr(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?m="Selected quarter: ".concat(Hr(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):m="Selected date: ".concat(Hr(n.props.selected,{dateFormat:p,locale:a})),te.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},m)},n.renderDateInput=function(){var r,a,c,d,p,m,w,b=bi(n.props.className,(r={},r[n.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=n.state.open,r)),S=n.props.customInput||te.createElement("input",{type:"text"}),C=n.props.customInputRef||"ref",N={},O=(c=n.props["aria-describedby"])!==null&&c!==void 0?c:n.props.ariaDescribedBy,R=(d=n.props["aria-invalid"])!==null&&d!==void 0?d:n.props.ariaInvalid,k=(p=n.props["aria-label"])!==null&&p!==void 0?p:n.props.ariaLabel,G=(m=n.props["aria-labelledby"])!==null&&m!==void 0?m:n.props.ariaLabelledBy,Z=(w=n.props["aria-required"])!==null&&w!==void 0?w:n.props.ariaRequired;return O!=null&&(N["aria-describedby"]=O),R!=null&&(N["aria-invalid"]=R),k!=null&&(N["aria-label"]=k),G!=null&&(N["aria-labelledby"]=G),Z!=null&&(N["aria-required"]=Z),P.cloneElement(S,Tt((a={},a[C]=function(ne){n.input=ne},a.value=n.getInputValue(),a.onBlur=n.handleBlur,a.onChange=n.handleChange,a.onClick=n.onInputClick,a.onFocus=n.handleFocus,a.onKeyDown=n.onInputKeyDown,a.id=n.props.id,a.name=n.props.name,a.form=n.props.form,a.autoFocus=n.props.autoFocus,a.placeholder=n.props.placeholderText,a.disabled=n.props.disabled,a.autoComplete=n.props.autoComplete,a.className=bi(S.props.className,b),a.title=n.props.title,a.readOnly=n.props.readOnly,a.required=n.props.required,a.tabIndex=n.props.tabIndex,a),N))},n.renderClearButton=function(){var r=n.props,a=r.isClearable,c=r.disabled,d=r.selected,p=r.startDate,m=r.endDate,w=r.clearButtonTitle,b=r.clearButtonClassName,S=b===void 0?"":b,C=r.ariaLabelClose,N=C===void 0?"Close":C,O=r.selectedDates,R=r.readOnly;return a&&!R&&(d!=null||p!=null||m!=null||O?.length)?te.createElement("button",{type:"button",className:bi("react-datepicker__close-icon",S,{"react-datepicker__close-icon--disabled":c}),disabled:c,"aria-label":N,onClick:n.onClearClick,title:w,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:WO,readOnly:!1,rangeSeparator:BO,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Zp,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(t,n){var r,a,c,d;this.props.selectsRange&&y1(t.startDate,this.props.startDate)?this.setPreSelection(this.props.startDate):y1(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&n.open===!1&&this.state.open===!0&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:d1(this.props.highlightDates)}),!n.focused&&!cu(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((a=(r=this.props).onCalendarOpen)===null||a===void 0||a.call(r)),n.open===!0&&this.state.open===!1&&((d=(c=this.props).onCalendarClose)===null||d===void 0||d.call(c)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,r=t.icon,a=t.calendarIconClassname,c=t.calendarIconClassName,d=t.toggleCalendarOnIconClick,p=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),te.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&te.createElement(H7,Tt({icon:r,className:bi(c,!c&&a,p&&"react-datepicker-ignore-onclickoutside")},d?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?te.createElement(ZO,{enableTabLoop:this.props.enableTabLoop},te.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=te.createElement(KO,Tt({portalId:this.props.portalId},this.props),n)),te.createElement(te.Fragment,null,this.renderInputContainer(),n)}return te.createElement(K7,Tt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow,monthHeaderPosition:this.props.monthHeaderPosition}))},e})(P.Component),Z7="input",u0="navigate";const $O=({isOpen:i,onClose:e,filters:t,onFilterChange:n,onApply:r,onReset:a,mapInstance:c})=>{const{distanceUnit:d}=Yo(),[p,m]=P.useState(t);te.useEffect(()=>{m(t)},[t]);const w=(C,N)=>{const O={...p,[C]:N};m(O)},b=()=>{n(p),r&&r(p),e()};te.useEffect(()=>{if(!i||!window.google?.maps?.places)return;const C=setTimeout(()=>{const N=document.getElementById("filter-location-input");if(N){const O={types:["(regions)"]},R=new window.google.maps.places.Autocomplete(N,O);c&&R.bindTo("bounds",c),R.addListener("place_changed",()=>{const k=R.getPlace();k&&k.formatted_address&&w("location",k.formatted_address)})}},100);return()=>clearTimeout(C)},[i,c]);const S=()=>{const C={location:"",radius:10,unit:d,type:"",date:null,keyword:""};m(C),n(C),a&&a(C)};return i?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"filter-menu-overlay",onClick:e}),_.jsxs("div",{className:`filter-menu-panel ${i?"open":""}`,children:[_.jsxs("div",{className:"filter-menu-header",children:[_.jsx("h2",{className:"filter-menu-title",children:"SEARCH FILTERS"}),_.jsx("button",{className:"filter-menu-close",onClick:e,children:"?"})]}),_.jsxs("div",{className:"filter-menu-content",children:[_.jsxs("div",{className:"filter-group",children:[_.jsx("label",{children:"Location (City or Postal Code)"}),_.jsx("input",{id:"filter-location-input",type:"text",className:"filter-input",placeholder:"Enter location...",value:p.location,onChange:C=>w("location",C.target.value)})]}),_.jsxs("div",{className:"filter-group",children:[_.jsxs("label",{children:["Distance (",p.unit,")"]}),_.jsxs("div",{className:"distance-control-row",children:[_.jsx("input",{type:"range",min:"1",max:"100",className:"filter-range",value:p.radius,onChange:C=>w("radius",parseInt(C.target.value))}),_.jsx("span",{className:"range-display",children:p.radius})]}),_.jsxs("div",{className:"unit-toggle",children:[_.jsx("button",{className:`unit-btn ${p.unit==="miles"?"active":""}`,onClick:()=>w("unit","miles"),children:"MILES"}),_.jsx("button",{className:`unit-btn ${p.unit==="km"?"active":""}`,onClick:()=>w("unit","km"),children:"KM"})]})]}),_.jsxs("div",{className:"filter-group",children:[_.jsx("label",{children:"Pin Type"}),_.jsxs("select",{className:"filter-select",value:p.type,onChange:C=>w("type",C.target.value),children:[_.jsx("option",{value:"",children:"All Types"}),_.jsx("option",{value:"Woman for Man",children:"Woman for Man"}),_.jsx("option",{value:"Man for Woman",children:"Man for Woman"}),_.jsx("option",{value:"Woman for Woman",children:"Woman for Woman"}),_.jsx("option",{value:"Man for Man",children:"Man for Man"}),_.jsx("option",{value:"Other",children:"Other"})]})]}),_.jsxs("div",{className:"filter-group",children:[_.jsx("label",{children:"Date"}),_.jsx(Cp,{selected:p.date,onChange:C=>w("date",C),placeholderText:"Select a date...",className:"filter-input",isClearable:!0})]}),_.jsxs("div",{className:"filter-group",children:[_.jsx("label",{children:"Keyword in Post"}),_.jsx("input",{type:"text",className:"filter-input",placeholder:"Search word...",value:p.keyword,onChange:C=>w("keyword",C.target.value)})]})]}),_.jsxs("div",{className:"filter-menu-footer",children:[_.jsx("button",{className:"filter-btn-reset",onClick:S,children:"RESET ALL"}),_.jsx("button",{className:"filter-btn-apply",onClick:b,children:"FIND CONNECTIONS"})]})]})]}):null},My=({isOpen:i,title:e,message:t,onConfirm:n,onCancel:r,confirmText:a="CONFIRM",cancelText:c="CANCEL",type:d="danger"})=>i?_.jsx("div",{className:"confirm-modal-overlay",children:_.jsxs("div",{className:`confirm-modal-card ${d}`,children:[_.jsxs("div",{className:"confirm-modal-header",children:[_.jsx("div",{className:"confirm-icon",children:d==="danger"?"??":"??"}),_.jsx("h2",{className:"confirm-modal-title",children:e})]}),_.jsx("p",{className:"confirm-modal-text",children:t}),_.jsxs("div",{className:"confirm-modal-actions",children:[_.jsx("button",{className:"confirm-modal-btn confirm-btn",onClick:n,children:a}),_.jsx("button",{className:"confirm-modal-btn cancel-btn",onClick:r,children:c})]})]})}):null,$7=({onMenuClick:i,onFilterClick:e,isFilterActive:t})=>{const n=Hi();return _.jsxs("header",{className:"map-header-overlay",children:[_.jsx("div",{className:"map-header-left",children:_.jsxs("button",{className:"map-header-btn hamburger",onClick:i,children:[_.jsx("div",{className:"hamburger-line"}),_.jsx("div",{className:"hamburger-line"}),_.jsx("div",{className:"hamburger-line"})]})}),_.jsxs("div",{className:"map-header-center",onClick:()=>n("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"map-header-logo"}),_.jsx("h1",{className:"map-header-title",children:"MISS ME CONNECT"})]}),_.jsx("div",{className:"map-header-right",children:_.jsxs("button",{className:`map-header-btn filter ${t?"active":""}`,onClick:e,children:[_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"white",children:_.jsx("path",{d:"M3 17h18v2H3v-2zm0-7h18v2H3v-2zm0-7h18v2H3V3zM5 5v2h2V5H5zm0 7v2h2v-2H5zm12 7v2h2v-2h-2z"})}),t&&_.jsx("span",{className:"filter-dot"})]})})]})},Q7="AIzaSyDQDYXvkjkpR7_n2PzLTbsgUNFocb2MpOY",X7=[{elementType:"geometry",stylers:[{color:"#1d1d1b"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#8e8e93"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1d1d1b"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#333333"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#1a1a1b"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#303030"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#4a4a4a"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1a1a"}]}],J7=()=>{const i=Hi(),{user:e,pins:t,isLoggedIn:n,loading:r,signup:a,login:c,addPin:d,removePin:p,hidePin:m,hiddenPins:w,formatDate:b,formatRelativeTime:S,mapMode:C,getAverageRating:N,reportPin:O,distanceUnit:R,ratings:k,isSuspended:G,hasProbation:Z,setVisiblePinIds:ne,activeFilters:ee,setActiveFilters:de}=Yo(),[B,V]=P.useState(!1),[j,F]=P.useState(!1),[q,z]=P.useState(null),[H,Re]=P.useState(!0),[Ve,W]=P.useState(13),[le,se]=P.useState(null),[je,Ce]=P.useState([]),[K,fe]=P.useState(0),[we,$]=P.useState(null),[ye,be]=P.useState(!1),[Fe,it]=P.useState(!1),et=150,[ft,qt]=P.useState(null),[Wt,Mn]=P.useState(null),[Wn,dr]=P.useState(!1),[Oi,Mi]=P.useState(!1),[oi,rn]=P.useState(!1),[Kt,kn]=P.useState(null),[hr,ki]=P.useState(""),[he,Te]=P.useState(""),[Me,Pe]=P.useState(""),[ke,Ze]=P.useState(null),[ct,xt]=P.useState(""),[Ut,Rt]=P.useState(new Date),[Pt,Cn]=P.useState(null),[wt,Ln]=P.useState(""),[sn,Cr]=P.useState(!1),[ei,ti]=P.useState(""),[Bt,li]=P.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"info"}),Li=P.useRef(!1),gn=P.useRef(!1),Ar=P.useRef(null),gs=P.useRef(new Map);P.useEffect(()=>{gt.startTimer("map_load")},[]);const Yi=P.useCallback(Se=>{$(Se),gt.endTimer("map_load")},[]),fr=P.useCallback((Se,Be)=>{Se?gs.current.set(Be,Se):gs.current.delete(Be)},[]),De=P.useMemo(()=>{const Se=new Date;Se.setDate(Se.getDate()-30);let Be=(t||[]).filter(Ae=>!(w.includes(Ae.id)||Ae.isReported||Ae.status==="hidden"&&Ae.ownerUid!==e?.uid&&!e?.isAdmin||Ae.createdAt&&(Ae.createdAt?.toDate?Ae.createdAt.toDate():new Date(Ae.createdAt))<Se));if(ft&&(Be=Be.filter(Ae=>{const ot=Hf(ft.lat,ft.lng,Ae.lat,Ae.lng);return(ee.unit==="km"?ot/1e3:ot/1609.34)<=ee.radius})),ee.type&&(Be=Be.filter(Ae=>Ae.type===ee.type)),ee.date)try{const Ae=ee.date.toISOString().split("T")[0];Be=Be.filter(ot=>{if(!ot.date)return!1;try{return new Date(ot.date).toISOString().split("T")[0]===Ae}catch{return!1}})}catch(Ae){console.error("Date filter error:",Ae)}if(ee.keyword){const Ae=ee.keyword.toLowerCase();Be=Be.filter(ot=>ot.title?.toLowerCase().includes(Ae)||ot.description?.toLowerCase().includes(Ae))}return console.log(`?? MAP DEBUG: filteredPins count: ${Be.length} (total pins: ${t.length})`),Be},[t,ft,ee,w]),_n=P.useMemo(()=>{const Se=[];(De||[]).forEach(Ae=>{if(typeof Ae.lat!="number"||typeof Ae.lng!="number")return;let ot=null;if(Ae.placeId&&(ot=Se.find(Xe=>Xe.placeId===Ae.placeId)),!ot)for(const Xe of Se){if(Ae.placeId&&Xe.placeId&&Ae.placeId!==Xe.placeId)continue;if(Hf(Ae.lat,Ae.lng,Xe.lat,Xe.lng)<=et){ot=Xe;break}}if(ot)ot.pins.push(Ae);else{const Xe=Ae.placeId?`place:${Ae.placeId}`:`${Ae.lat.toFixed(5)}_${Ae.lng.toFixed(5)}_${Se.length}`;Se.push({key:Xe,lat:Ae.lat,lng:Ae.lng,pins:[Ae],placeId:Ae.placeId||null})}});const Be=Object.fromEntries(Se.map(Ae=>[Ae.key,Ae.pins]));return ru("?? MAP DEBUG: Venue groups:",Object.keys(Be).length),Be},[De]);P.useEffect(()=>{ru("?? MAP DEBUG: Total pins loaded from Firebase:",t.length)},[t]),P.useEffect(()=>{de(Se=>({...Se,unit:R}))},[R]),P.useEffect(()=>{const Se=setTimeout(()=>{be(!0)},1500);return()=>clearTimeout(Se)},[]),P.useEffect(()=>{console.log("?? [DIAGNOSTICS] Map Initializing:",{userUid:e?.uid,profileZip:e?.postalCode,hasGeo:!!navigator.geolocation,currentCenter:q?`${q.lat}, ${q.lng}`:"null"})},[e?.uid,e?.postalCode]);const En=P.useCallback(Se=>{console.log(`?? [FALLBACK] Triggered: ${Se}. Using Nationwide View.`),z({lat:39.8283,lng:-98.5795}),W(4),it(!0),Re(!1),gn.current=!0},[]),Gi=P.useCallback(Se=>{if(console.log(`?? [GEO] Attempting ZIP Geocode: ${Se}`),!window.google?.maps?.Geocoder){console.warn("?? [GEO] Google Geocoder not available yet.");return}new window.google.maps.Geocoder().geocode({address:Se},(Ae,ot)=>{if(ot==="OK"&&Ae?.[0]){const Xe=Ae[0].geometry.location,Fn={lat:Xe.lat(),lng:Xe.lng()};console.log("?? [GEO] ZIP Success:",Fn),z(Fn),it(!1),Re(!1),gn.current=!0}else console.error("?? [GEO] ZIP Geocode Failed:",ot),En("Zip Geocode Failed")})},[En]);P.useEffect(()=>{if(r){console.log("?? [GEO] Waiting for auth loading...");return}if(H){if(!window.google?.maps?.Geocoder){const Se=setTimeout(()=>{},500);return()=>clearTimeout(Se)}if(e?.postalCode){console.log("?? [GEO] Profile ZIP found:",e.postalCode),Gi(e.postalCode);return}navigator.geolocation?(console.log("?? [GEO] Requesting navigator.geolocation..."),navigator.geolocation.getCurrentPosition(Se=>{const Be={lat:Se.coords.latitude,lng:Se.coords.longitude};Mn(Be),z(Be),it(!1),Re(!1),gn.current=!0,W(15)},Se=>{console.warn("?? [GEO] GPS Error:",Se.code,Se.message),En("GPS Denied/Error")},{timeout:1e4,enableHighAccuracy:!0})):(console.warn("?? [GEO] No navigator.geolocation support."),En("No Geo Support"))}},[H,e,r,Gi,En]);const yn=()=>{if(we){const Se=we.getZoom()||13;we.setZoom(Se+1)}},Ge=()=>{if(we){const Se=we.getZoom()||13;we.setZoom(Se-1)}};P.useEffect(()=>{const Se=setTimeout(()=>{H&&(console.warn("?? [GEO] Global timeout - forcing map open."),q?Re(!1):En("Global Timeout"))},1e4);return()=>clearTimeout(Se)},[H,q,En]),P.useEffect(()=>{if(!we||!window.google?.maps?.Marker||!window.google?.maps?.Size)return;Ar.current||(Ar.current=new uV({map:we,renderer:{render:({count:Ae,position:ot})=>new window.google.maps.Marker({position:ot,icon:{url:`data:image/svg+xml;base64,${btoa(`
C:\Users\Michele\MMCPlayground\missmeconnection\dist\assets\index-8dqtjp19.js:68:                                `)}`,scaledSize:new window.google.maps.Size(40,40),anchor:new window.google.maps.Point(20,20)}})}}));const Be=setTimeout(()=>{Ar.current&&(Ar.current.clearMarkers(),Ar.current.addMarkers(Array.from(gs.current.values())))},150);return()=>clearTimeout(Be)},[we,De]),P.useEffect(()=>{if(!ee.location||!window.google?.maps?.Geocoder){qt(null);return}console.log("?? FILTER: Geocoding location:",ee.location),new window.google.maps.Geocoder().geocode({address:ee.location},(Be,Ae)=>{if(Ae==="OK"&&Be[0]){const ot=Be[0].geometry.location,Xe={lat:ot.lat(),lng:ot.lng()};console.log("?? FILTER: Center found:",Xe),qt(Xe),gn.current=!0,z(Xe)}else console.error("?? FILTER: Geocoding failed:",Ae)})},[ee.location,window.google?.maps?.Geocoder]);const Ka=({center:Se,zoom:Be})=>{const Ae=G_();return P.useEffect(()=>{Ae&&$(Ae)},[Ae]),P.useEffect(()=>{Ae&&Se&&gn.current&&(Ae.panTo(Se),Be!==void 0&&Ae.setZoom(Be),gn.current=!1)},[Ae,Se,Be]),null};P.useEffect(()=>{if(!Oi||!window.google?.maps?.places)return;const Se=document.getElementById("post-location-input");if(!Se)return;const Be={types:["geocode","establishment"]},Ae=new window.google.maps.places.Autocomplete(Se,Be);we&&Ae.bindTo("bounds",we),Ae.addListener("place_changed",async()=>{const ot=Ae.getPlace();if(ot&&ot.geometry){Pe("Processing privacy...");const Xe=await tb(ot);Xe&&(kn(Xe.coords),Pe(Xe.label),xt(Xe.secondaryLabel||""),Ze(Xe.placeId||null))}})},[Oi,window.google?.maps?.places]),P.useEffect(()=>{if(!we||!window.google?.maps?.places)return;const Se=document.getElementById("map-jump-search");if(!Se)return;const Be=new window.google.maps.places.Autocomplete(Se,{types:["(regions)"]});Be.addListener("place_changed",()=>{const Ae=Be.getPlace();Ae.geometry&&Ae.geometry.location&&(we.panTo(Ae.geometry.location),we.setZoom(12),gn.current=!0,z({lat:Ae.geometry.location.lat(),lng:Ae.geometry.location.lng()}),Se.value="")})},[we]);const Wi=Se=>Se?Se.replace(/^\d+[\s,.]*/,"").trim()||"Public Area":"",Ki=(Se,Be)=>{const Ae=Se?.[0];if(!Ae)return;const Xe=[...(t||[]).filter(Jt=>typeof Jt.lat!="number"||typeof Jt.lng!="number"||w.includes(Jt.id)||Jt.isReported?!1:Ae.placeId&&Jt.placeId?Ae.placeId===Jt.placeId:Hf(Ae.lat,Ae.lng,Jt.lat,Jt.lng)<=et)].sort((Jt,ji)=>(Jt.date||"").localeCompare(ji.date||""));Ce(Xe);const Fn=Math.max(0,Xe.findIndex(Jt=>Jt.id===Be));fe(Fn),se(Xe[Fn]),se(Xe[Fn]),we&&Ae&&(we.panTo({lat:Ae.lat+.005,lng:Ae.lng}),gn.current=!0),ru(`?? Marker Click: venuePins length = ${Xe.length} (expanded from ${Se.length})`)},In=()=>{const Se=(K+1)%je.length;fe(Se),se(je[Se])},jn=()=>{const Se=(K-1+je.length)%je.length;fe(Se),se(je[Se])},pr=()=>{se(null)},Zi=async()=>{if(!n){i("/login");return}if(G()){li({isOpen:!0,title:"ACCOUNT ON HOLD",message:"Your account is currently on hold. You cannot post new pins during this time.",onConfirm:()=>li(ot=>({...ot,isOpen:!1})),confirmText:"OK",type:"info"});return}if(!we)return;const Se=we.getCenter(),Be={lat:Se.lat(),lng:Se.lng()};if(Mi(!0),Pe("Identifying location..."),!window.google?.maps?.Geocoder){Pe("Public Area");return}new window.google.maps.Geocoder().geocode({location:Be},async(ot,Xe)=>{if(Xe!=="OK"||!ot?.[0]){const Jt=100+Math.random()*100,ji=Math.random()*Math.PI*2;kn({lat:Be.lat+Math.sin(ji)*Jt/111111,lng:Be.lng+Math.cos(ji)*Jt/(111111*Math.cos(Be.lat*Math.PI/180))}),Pe("Public Area");return}const Fn=await tb(ot[0]);Fn&&(kn(Fn.coords),Pe(Fn.label),xt(Fn.secondaryLabel||""),Ze(Fn.placeId||null))})},Wo=async Se=>{if(Se.preventDefault(),oi)return;ru("SAVE newDate local:",Ut?.toString?.()),ru("SAVE newDate iso:",Ut?.toISOString?.());const Be=new Date(Ut.getFullYear(),Ut.getMonth(),Ut.getDate()),Ae=`${Be.getFullYear()}-${String(Be.getMonth()+1).padStart(2,"0")}-${String(Be.getDate()).padStart(2,"0")}`,ot={id:Date.now().toString(),lat:Kt.lat,lng:Kt.lng,type:hr,title:he.toUpperCase(),location:Wi(Me),date:Ae,encounterDate:Ae,time:Pt?Pt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",description:wt,ownerEmail:e?.email,address:ct,placeId:ke};try{rn(!0),await d(ot),Mi(!1),kn(null),ki(""),Te(""),Pe(""),xt(""),Ze(null),Rt(new Date),Cn(null),Ln("")}catch(Xe){console.error("Failed to save pin:",Xe)}finally{rn(!1)}},Za=()=>{Mi(!1),kn(null),Rt(new Date),Cn(null),Ze(null)},Ko=()=>{!ei.trim()||!le||(O(le.id,ei),Cr(!1),ti(""),se(null),li({isOpen:!0,title:"REPORT SUBMITTED",message:"PIN REPORTED TO ADMIN AND TEMPORARILY HIDDEN FROM YOUR VIEW.",onConfirm:()=>li(Se=>({...Se,isOpen:!1})),confirmText:"OK",type:"info"}))},Ir=async()=>{try{if((await t0.checkPermissions()).location!=="granted"&&(await t0.requestPermissions()).location!=="granted"){alert("Please enable location permissions to use this feature.");return}const Be=await t0.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4}),Ae={lat:Be.coords.latitude,lng:Be.coords.longitude};Mn(Ae),z(Ae),W(16),gn.current=!0,dr(!1)}catch(Se){console.error("Recenter failed:",Se),navigator.geolocation?navigator.geolocation.getCurrentPosition(Be=>{const Ae={lat:Be.coords.latitude,lng:Be.coords.longitude};z(Ae),Mn(Ae),W(16),gn.current=!0,dr(!1)},Be=>{alert("Could not retrieve location. Please check GPS settings.")}):alert("Location services unavailable.")}},aa=q||{lat:39.8283,lng:-98.5795};return _.jsx(W1,{apiKey:Q7,libraries:["places","geometry"],children:H||!ye?_.jsx("div",{className:"map-loading-screen",children:_.jsxs("div",{className:"loading-content",children:[_.jsxs("div",{className:"loading-hearts",children:[_.jsx("img",{src:xr,className:"heart-main-asset",alt:""}),_.jsx("span",{className:"heart-sub-1",children:"??"}),_.jsx("span",{className:"heart-sub-2",children:"??"})]}),_.jsx("p",{children:"LOCATING CONNECTIONS..."})]})}):_.jsxs("div",{className:"map-view-container",children:[Fe&&_.jsx("div",{className:"map-fallback-banner",children:"SHOWING NATIONWIDE CONNECTIONS. ENABLE LOCATION FOR LOCAL RESULTS."}),_.jsx(mu,{isOpen:B,onClose:()=>V(!1)}),_.jsx($7,{onMenuClick:()=>V(!0),onFilterClick:()=>F(!0),isFilterActive:!!(ee.location||ee.type||ee.date||ee.keyword)}),_.jsx($O,{isOpen:j,onClose:()=>F(!1),filters:ee,onFilterChange:de,mapInstance:we}),Wn&&_.jsx("button",{className:"recenter-fab",onClick:Ir,children:"??"}),_.jsxs("div",{className:"emulator-zoom-controls",children:[_.jsx("button",{className:"zoom-btn-fab",onClick:yn,children:"+"}),_.jsx("button",{className:"zoom-btn-fab",onClick:Ge,children:"-"})]}),_.jsx("div",{className:"map-canvas",children:_.jsxs(eN,{defaultCenter:aa,defaultZoom:13,gestureHandling:"greedy",disableDefaultUI:!1,zoomControl:!1,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,styles:n&&C==="dark"?X7:[],onClick:pr,onDragStart:()=>Li.current=!0,onDragEnd:()=>setTimeout(()=>Li.current=!1,50),onCameraChanged:Se=>{if(W(Se.detail.zoom),gn.current&&(gn.current=!1),Wt){const Be=Se.detail.center,Ae=Hf(Be.lat,Be.lng,Wt.lat,Wt.lng);dr(Ae>50)}if(Se.detail.bounds){const{north:Be,south:Ae,east:ot,west:Xe}=Se.detail.bounds,Fn=(t||[]).filter(Jt=>Jt.lat>=Ae&&Jt.lat<=Be&&Jt.lng>=Xe&&Jt.lng<=ot).map(Jt=>Jt.id);ne(Fn)}},onLoad:Yi,children:[_.jsx(Ka,{center:q,zoom:Ve}),Object.entries(_n).map(([Se,Be])=>{const Ae=Be[0];return _.jsx(m0,{position:{lat:Ae.lat,lng:Ae.lng},ref:ot=>fr(ot,Se),onClick:()=>Ki(Be,Ae.id),icon:{url:"/assets/heart-logo.svg",scaledSize:{width:44,height:44},anchor:{x:22,y:44}},label:Be.length>1?{text:String(Be.length),color:"white",className:"marker-count-label"}:Ve>=14&&Ae.title?{text:Ae.title.toString().toUpperCase(),color:"white",className:"legacy-marker-label"}:null},Se)}),le&&typeof le.lat=="number"&&typeof le.lng=="number"&&_.jsx(hj,{position:{lat:le.lat,lng:le.lng},onCloseClick:()=>{se(null),Ce([])},headerDisabled:!0,children:_.jsxs("div",{className:"google-popup-content",children:[_.jsxs("div",{className:"popup-carousel-controls",children:[je.length>1&&_.jsxs("div",{className:"carousel-nav-group",children:[_.jsx("button",{className:"carousel-arrow",onClick:jn,children:"?"}),_.jsxs("span",{className:"carousel-counter",children:[K+1," of ",je.length]}),_.jsx("button",{className:"carousel-arrow",onClick:In,children:"?"})]}),_.jsx("button",{className:"popup-close-btn-custom",onClick:()=>{se(null),Ce([])},children:"?"})]}),_.jsx("span",{className:"popup-category-badge",children:le.type||"Man for Woman"}),_.jsxs("div",{className:"popup-rating-row",children:[_.jsx("div",{className:"popup-hearts readonly",children:[1,2,3,4,5].map(Se=>_.jsx("span",{className:`popup-heart ${Se<=Math.round(N(le.id))?"filled":""}`,children:"??"},Se))}),_.jsxs("span",{className:"popup-avg-text",children:["AVG: ",N(le.id)]})]}),_.jsx("div",{className:"popup-rating-disclaimer",children:"CAN ONLY RATE PIN FROM DETAILS PAGE"}),_.jsx("h2",{className:"popup-title",children:le.title}),_.jsxs("div",{className:"popup-location-stack",children:[_.jsx("p",{className:"popup-location-main",children:le.location}),le.address&&_.jsx("p",{className:"popup-location-sub",children:le.address})]}),_.jsx("div",{className:"popup-meta-row",children:_.jsxs("p",{className:"popup-meta",children:["ENCOUNTER: ",b(le.encounterDate||le.date)]})}),_.jsx("p",{className:"popup-description",children:le.description}),_.jsxs("div",{className:"popup-footer",children:[_.jsx("button",{className:"popup-details-link-btn",onClick:()=>i(`/browse/${le.id}`),children:"View Details "}),_.jsxs("div",{className:"popup-footer-right",children:[_.jsx("button",{className:"popup-its-not-me-btn",onClick:()=>{m(le.id),se(null),Ce([])},children:"IT'S NOT ME."}),_.jsx("button",{className:"popup-report-btn",onClick:()=>Cr(!0),children:"REPORT"}),(le.ownerUid===e?.uid||le.ownerEmail===e?.email||e?.isAdmin)&&_.jsxs("div",{className:"owner-actions-row",children:[_.jsx("button",{className:`popup-hide-btn ${le.status==="hidden"?"is-hidden":""}`,onClick:async()=>{const Se=le.status==="hidden"?"public":"hidden";await updatePin(le.id,{status:Se}),se(Be=>({...Be,status:Se}))},children:le.status==="hidden"?"Unhide":"Hide"}),_.jsx("button",{className:"popup-delete-btn",onClick:()=>{console.log("??? Deleting pin ID:",le.id),p(le.id),se(null),Ce([])},children:"Delete"})]})]})]})]})}),Kt&&_.jsx(m0,{position:Kt,icon:{url:"/assets/heart-logo.svg",scaledSize:{width:44,height:44},anchor:{x:22,y:44},opacity:.6}})]})}),Oi&&_.jsx("div",{className:"post-modal-overlay",children:_.jsxs("div",{className:"post-modal-card",children:[_.jsx("button",{className:"post-modal-close",onClick:Za,children:"?"}),n?_.jsxs("form",{className:"post-form",onSubmit:Wo,children:[_.jsx("div",{className:"safety-badge",children:"??? PRIVACY PROTECTED"}),_.jsx("h2",{className:"post-modal-title",children:"ADD MISSED CONNECTION"}),_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"Type"}),_.jsxs("select",{className:"post-select",value:hr,onChange:Se=>ki(Se.target.value),required:!0,children:[_.jsx("option",{value:"",children:"Select option"}),_.jsx("option",{value:"Man for Woman",children:"Man for Woman"}),_.jsx("option",{value:"Man for Man",children:"Man for Man"}),_.jsx("option",{value:"Woman for Man",children:"Woman for Man"}),_.jsx("option",{value:"Woman for Woman",children:"Woman for Woman"})]})]}),_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"Title"}),_.jsx("input",{type:"text",className:"post-input",placeholder:"Enter title",value:he,onChange:Se=>Te(Se.target.value),required:!0})]}),_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"Location"}),_.jsxs("div",{className:"location-input-wrapper",children:[_.jsx("input",{id:"post-location-input",type:"text",className:"post-input",placeholder:"Venue or street",value:Me,onChange:Se=>Pe(Se.target.value),required:!0}),_.jsx("button",{type:"button",className:"location-refresh-btn",onClick:Zi,children:"??"})]})]}),_.jsxs("div",{className:"date-time-inputs",children:[_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"Date"}),_.jsx(Cp,{selected:Ut,onChange:Se=>{if(!Se)return;const Be=new Date(Se.getFullYear(),Se.getMonth(),Se.getDate());Rt(Be)},className:"post-input",placeholderText:"When?",dateFormat:"MM/dd/yyyy",required:!0})]}),_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"Time (Optional)"}),_.jsx(Cp,{selected:Pt,onChange:Se=>Cn(Se),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa",className:"post-input",placeholderText:"Time (Optional)",isClearable:!0})]})]}),_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"Description"}),_.jsx("textarea",{className:"post-textarea",placeholder:"Tell your story...",value:wt,onChange:Se=>Ln(Se.target.value),required:!0})]}),_.jsxs("div",{className:"post-modal-actions",children:[_.jsx("button",{type:"button",className:"btn-cancel",onClick:Za,children:"CANCEL"}),_.jsx("button",{type:"submit",className:"btn-submit",disabled:oi,children:oi?"SAVING...":"POST"})]})]}):_.jsxs("div",{className:"post-login-prompt",children:[_.jsx("h2",{className:"post-modal-title",children:"WAIT A MINUTE!"}),_.jsx("p",{className:"post-modal-text",children:"YOU NEED TO BE SIGNED IN TO POST A CONNECTION."}),_.jsx("button",{className:"post-modal-submit",onClick:()=>i("/login"),children:"SIGN IN TO POST"})]})]})}),sn&&_.jsx("div",{className:"post-modal-overlay",children:_.jsxs("div",{className:"post-modal-card report-modal",children:[_.jsxs("div",{className:"report-warning-box",children:[_.jsx("span",{className:"warning-emoji",children:"??"}),_.jsx("h2",{className:"post-modal-title",children:"REPORT PIN"}),_.jsxs("p",{className:"warning-text",children:["If you falsely claim what we deem a ",_.jsx("strong",{children:"Good Pin"})," your account will be suspended for 48 hours your first strike."]})]}),_.jsxs("div",{className:"post-input-group",children:[_.jsx("label",{children:"REASON FOR REPORTING"}),_.jsx("textarea",{className:"post-textarea",placeholder:"Example: Offensive language, fake location, etc.",value:ei,onChange:Se=>ti(Se.target.value)})]}),_.jsxs("div",{className:"post-modal-actions",children:[_.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>Cr(!1),children:"CANCEL"}),_.jsx("button",{type:"button",className:"btn-submit report-submit",onClick:Ko,children:"SUBMIT REPORT"})]})]})}),_.jsx(My,{isOpen:Bt.isOpen,title:Bt.title,message:Bt.message,onConfirm:Bt.onConfirm,onCancel:()=>li(Se=>({...Se,isOpen:!1})),confirmText:Bt.confirmText,cancelText:Bt.cancelText,type:Bt.type}),_.jsx(ac,{onAddClick:Zi,showAddButton:!0})]})})},eY=()=>{const i=Hi(),{pins:e,user:t,hiddenPins:n,getAverageRating:r,isLoggedIn:a,visiblePinIds:c,activeFilters:d,setActiveFilters:p,formatDate:m,formatRelativeTime:w}=Yo(),[b,S]=P.useState(!1),[C,N]=P.useState(!1),[O,R]=P.useState(!1),[k,G]=P.useState(!!c),Z=te.useRef(null),ne=j=>{if(Z.current){const{current:F}=Z,q=F.offsetWidth/2;j==="left"?F.scrollBy({left:-q,behavior:"smooth"}):F.scrollBy({left:q,behavior:"smooth"})}},ee=j=>j?j.replace(/^\d+[\s,.]*/,"").trim()||"Public Area":"",de=P.useMemo(()=>{let j=(e||[]).filter(F=>{const q=n.includes(F.id),z=F.isReported,H=F.ownerEmail===t?.email,Re=t?.isAdmin;return!(q&&!Re||z&&!H&&!Re||F.status==="hidden"&&!H&&!Re)});if(k&&c&&c.length>0&&(j=j.filter(F=>c.includes(F.id))),d.location){const F=d.location.toLowerCase();j=j.filter(q=>q.location?.toLowerCase().includes(F))}if(d.type&&(j=j.filter(F=>F.type===d.type)),d.keyword){const F=d.keyword.toLowerCase();j=j.filter(q=>q.title?.toLowerCase().includes(F)||q.description?.toLowerCase().includes(F)||q.location?.toLowerCase().includes(F))}return O&&t?.postalCode&&(j=j.filter(F=>F.postalCode===t.postalCode)),j},[e,d,O,k,t,n,c]),B=P.useMemo(()=>!a||!t?[]:e.filter(j=>j.ownerUid===t.uid),[e,t,a]),V=!!(d.location||d.type||d.date||d.keyword);return P.useEffect(()=>{a||gt.trackEvent("logged_out_browse_cta_view")},[a]),_.jsxs("div",{className:"browse-container",children:[_.jsx(mu,{isOpen:b,onClose:()=>S(!1)}),_.jsx($O,{isOpen:C,onClose:()=>N(!1),filters:d,onFilterChange:p}),_.jsxs("header",{className:"browse-hero",style:{backgroundImage:`url(${Y_})`},children:[_.jsxs("div",{className:"browse-top-bar",children:[_.jsx("div",{className:"top-bar-left",children:_.jsxs("button",{className:"map-hamburger-btn",onClick:()=>S(!0),children:[_.jsx("div",{className:"hamburger-line-small"}),_.jsx("div",{className:"hamburger-line-small"}),_.jsx("div",{className:"hamburger-line-small"})]})}),_.jsxs("div",{className:"browse-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"header-heart-logo-browse"}),_.jsx("h1",{className:"browse-logo-text",children:"MISS ME CONNECTIONS"})]}),_.jsxs("div",{className:"top-bar-right",children:[_.jsx("button",{className:`browse-filter-btn ${V?"active":""}`,onClick:()=>N(!0),children:_.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"white",children:_.jsx("path",{d:"M3 17h18v2H3v-2zm0-7h18v2H3v-2zm0-7h18v2H3V3zM5 5v2h2V5H5zm0 7v2h2v-2H5zm12 7v2h2v-2h-2z"})})}),_.jsx("button",{className:"browse-close-btn",onClick:()=>i("/map"),children:_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),!a&&_.jsx("div",{className:"browse-join-banner-container",children:_.jsxs("div",{className:"browse-join-banner-content",children:[_.jsx("h2",{className:"join-banner-title",children:"JOIN MISS ME CONNECTION"}),_.jsx("p",{className:"join-banner-subtitle",children:"Create an account to save connections, message, and get notified."}),_.jsxs("div",{className:"join-banner-actions",children:[_.jsx("button",{className:"join-btn-primary",onClick:()=>{gt.trackEvent("join_now_click",{source:"browse_banner"}),i("/login",{state:{mode:"signup"}})},children:"JOIN NOW"}),_.jsx("button",{className:"join-btn-secondary",onClick:()=>{gt.trackEvent("login_click",{source:"browse_banner"}),i("/login",{state:{mode:"login"}})},children:"LOG IN"})]})]})}),a&&_.jsxs("div",{className:"my-connections-section",children:[_.jsx("h2",{className:"section-heading",children:"MY MISSED CONNECTIONS"}),_.jsxs("div",{className:"horizontal-scroll-container",children:[_.jsx("button",{className:"scroll-btn left",onClick:()=>ne("left"),children:_.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"15 18 9 12 15 6"})})}),_.jsx("div",{className:"horizontal-scroll-wrap",ref:Z,children:B.length===0?_.jsx("div",{className:"no-my-pins",children:"No posts from you yet."}):B.map(j=>_.jsxs("div",{className:`mini-card ${j.status==="hidden"?"is-private":""}`,onClick:()=>i(`/browse/${j.id}`),children:[_.jsx("h3",{className:"mini-card-title",children:j.title}),_.jsx("p",{className:"mini-card-location",children:ee(j.location)}),j.status==="hidden"&&_.jsx("span",{className:"mini-private-badge",children:"PRIVATE"})]},j.id))}),_.jsx("button",{className:"scroll-btn right",onClick:()=>ne("right"),children:_.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]})]}),_.jsxs("div",{className:"search-filter-block",children:[_.jsxs("div",{className:"search-input-wrap",children:[_.jsx("input",{type:"text",className:"browse-search-bar",placeholder:"Search for a connection...",value:d.keyword||"",onChange:j=>p(F=>({...F,keyword:j.target.value}))}),_.jsx("button",{className:"browse-search-btn",children:_.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[_.jsx("circle",{cx:"11",cy:"11",r:"8"}),_.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]}),_.jsx("div",{className:"filter-options-row",children:_.jsxs("div",{className:"toggle-group",children:[_.jsxs("label",{className:"switch",children:[_.jsx("input",{type:"checkbox",checked:k,onChange:()=>G(!k)}),_.jsx("span",{className:"slider round"})]}),_.jsx("span",{className:"toggle-label text-white",children:"Map Area only"})]})})]}),_.jsx("main",{className:"browse-feed",children:de.filter(j=>!a||j.ownerUid!==t?.uid).length===0?_.jsxs("div",{className:"empty-state",children:[_.jsx("p",{children:"No connections found matching your filters."}),_.jsx("button",{className:"reset-filter-btn",onClick:()=>{p({location:"",radius:10,unit:d.unit,type:"",date:null,keyword:""}),R(!1),G(!1)},children:"Clear Filters"})]}):de.filter(j=>!a||j.ownerUid!==t?.uid).map(j=>_.jsxs("div",{className:"connection-card-premium",onClick:()=>i(`/browse/${j.id}`),children:[_.jsx("span",{className:"premium-card-badge",children:j.type||"Missed Connection"}),_.jsxs("div",{className:"p-card-content",children:[_.jsx("h3",{className:"p-card-title",children:j.title}),_.jsxs("div",{className:"p-card-loc-date",children:[_.jsxs("span",{className:"p-card-loc",children:[ee(j.location),j.address&&j.address!==j.location&&_.jsxs("span",{style:{opacity:.7,marginLeft:"8px",fontWeight:400},children:[" ",j.address.replace(", USA","")]})]}),j.date&&_.jsx("span",{className:"p-card-date",children:m(j.date)})]}),_.jsx("p",{className:"p-card-desc",children:j.description}),_.jsxs("div",{className:"p-card-footer-badges",children:[j.isReported&&_.jsx("span",{className:"reported-badge-mini",children:"UNDER REVIEW"}),j.status==="hidden"&&_.jsx("span",{className:"private-badge-mini",children:"HIDDEN FROM MAP"}),_.jsx("span",{className:"p-card-posted-time",children:w(j.createdAt)})]})]})]},j.id))}),_.jsx(ac,{})]})},qE=({onClose:i,title:e,message:t})=>{const n=Hi(),r=e||"CREATE AN ACCOUNT TO CONTINUE",a=t||"Create an account to save connections, message, and get notified.",c=()=>{gt.trackEvent("join_now_click",{source:"auth_modal"}),n("/login",{state:{mode:"signup"}})},d=()=>{gt.trackEvent("login_click",{source:"auth_modal"}),n("/login",{state:{mode:"login"}})},p=()=>{i?i():n(-1)};return te.useEffect(()=>(document.body.classList.add("modal-open"),()=>{document.body.classList.remove("modal-open")}),[]),_.jsx("div",{className:"auth-modal-overlay",children:_.jsxs("div",{className:"auth-modal-card",children:[_.jsxs("div",{className:"auth-modal-header",children:[_.jsx("div",{className:"alert-icon",children:"??"}),_.jsx("h2",{className:"auth-modal-title",children:r})]}),_.jsx("p",{className:"auth-modal-text",children:a}),_.jsxs("div",{className:"auth-modal-actions",children:[_.jsx("button",{className:"auth-modal-btn login-btn-cyan",onClick:c,children:"JOIN NOW"}),_.jsx("button",{className:"auth-modal-btn exit-btn-outline",onClick:d,children:"LOG IN"}),_.jsx("button",{className:"auth-modal-text-link",onClick:p,children:"Cancel"})]})]})})},tY="AIzaSyDQDYXvkjkpR7_n2PzLTbsgUNFocb2MpOY",nY=()=>{const{id:i}=c2(),e=Hi(),t=Ya(),{user:n,pins:r,threads:a,addReply:c,updateReply:d,ratings:p,ratePin:m,getAverageRating:w,hidePin:b,updatePin:S,removePin:C,formatDate:N,formatRelativeTime:O,hiddenPins:R,loading:k,isSuspended:G,canStartNewThread:Z,subscribeToThread:ne,addPin:ee,mapMode:de,reportPin:B,distanceUnit:V,blockUser:j,hasProbation:F,setVisiblePinIds:q,activeFilters:z,setActiveFilters:H,isLoggedIn:Re,setThreadNickname:Ve}=Yo(),W=r.find(De=>String(De.id)===String(i)),le=p[W?.id]||[],se=n?le.find(De=>De.userId===n.uid):null,je=se?se.rating:0,[Ce,K]=te.useState(""),[fe,we]=te.useState(!1),[$,ye]=te.useState(null),[be,Fe]=te.useState([]),[it,et]=te.useState(!1),ft=P.useRef(null),[qt,Wt]=te.useState(!1),[Mn,Wn]=te.useState(""),[dr,Oi]=te.useState(!1),[Mi,oi]=te.useState(!1),[rn,Kt]=te.useState(""),[kn,hr]=te.useState(!1),[ki,he]=te.useState(""),[Te,Me]=te.useState(""),[Pe,ke]=te.useState(new Date),[Ze,ct]=te.useState(null),[xt,Ut]=te.useState(""),[Rt,Pt]=te.useState(""),[Cn,wt]=te.useState(null),[Ln,sn]=te.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"}),Cr=De=>{if(!n){setShowAuthModal(!0);return}if(G()){sn({isOpen:!0,title:"ACCOUNT ON HOLD",message:"Your account is currently on hold. You cannot rate pins until the review period ends.",onConfirm:()=>sn(_n=>({..._n,isOpen:!1})),cancelText:"CLOSE",confirmText:"OK",type:"info"});return}W&&m(W.id,De)},ei=W&&n?a.find(De=>String(De.pinId)===String(W.id)&&De.responderUid===n.uid):null;P.useEffect(()=>{if(!W||!n)return;let De=null;if($&&W.ownerUid===n.uid?De=`${W.id}_${$}`:W.ownerUid!==n.uid?De=`${W.id}_${n.uid}`:De=null,!De){Fe([]);return}const _n=ne(De,Fe);return()=>_n()},[W?.id,W?.ownerUid,n?.uid,$]);const ti=(De=null)=>{if(console.log(`?? handleReplyClick called. responderUid: ${De}, user: ${n?.uid}`),!n){setShowAuthModal(!0);return}ye(De),we(!0)},Bt=()=>{we(!1),ye(null),t.state?.fromMessages&&e("/messages")},li=async()=>{const De=W.ownerUid===n.uid?$:W.ownerUid;if(!De){sn({isOpen:!0,title:"CANNOT BLOCK",message:"We couldn't identify the other user in this conversation.",onConfirm:()=>sn(_n=>({..._n,isOpen:!1})),confirmText:"OK",type:"info"});return}sn({isOpen:!0,title:"BAR THIS USER FOREVER?",message:"THIS REPLIER WILL NOT ONLY BE BARRED FROM THIS CONVERSATION BUT ALL CONVERSATIONS. THIS CANNOT BE UNDONE.",onConfirm:async()=>{await j(De),we(!1),sn(_n=>({..._n,isOpen:!1})),e(t.state?.fromMessages?"/messages":"/map")},confirmText:"BAR FOREVER",cancelText:"CANCEL",type:"danger"})};P.useEffect(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},[be,fe]),P.useEffect(()=>{t.state?.openReply&&W&&n&&ti(t.state.responderUid)},[W,n,t.state]);const Li=()=>{W&&(b(W.id),e(t.state?.fromMessages?"/messages":"/map"))},gn=()=>{navigator.share?navigator.share({title:W?.title,text:`Check out this missed connection: ${W?.description}`,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},Ar=async()=>{if(W){if(console.log("?? DELETE BUTTON CLICKED for pin:",W.id),W.isReported&&!n?.isAdmin){sn({isOpen:!0,title:"PIN UNDER REVIEW",message:"THIS PIN IS UNDER REVIEW AND CANNOT BE DELETED BY THE OWNER AT THIS TIME.",onConfirm:()=>sn(De=>({...De,isOpen:!1})),cancelText:"CLOSE",confirmText:"UNDERSTOOD",type:"info"});return}sn({isOpen:!0,title:"DELETE POST?",message:"ARE YOU SURE YOU WANT TO DELETE THIS POST FOREVER? THIS CANNOT BE UNDONE.",onConfirm:async()=>{console.log("?? CONFIRMED: Calling removePin with ID:",W.id),sn(De=>({...De,isOpen:!1})),await C(W.id,"User self-deleted"),e(t.state?.fromMessages?"/messages":"/map")},onCancel:()=>sn(De=>({...De,isOpen:!1})),confirmText:"DELETE FOREVER",cancelText:"KEEP POST",type:"danger"})}},gs=()=>{if(W){if(W.isReported&&!n?.isAdmin){sn({isOpen:!0,title:"PIN UNDER REVIEW",message:"THIS PIN IS UNDER REVIEW AND CANNOT BE EDITED BY THE OWNER AT THIS TIME.",onConfirm:()=>sn(De=>({...De,isOpen:!1})),confirmText:"OK",type:"info"});return}if(he(W.title),Me(W.description),ke(W.date?new Date(W.date):new Date),W.time)try{const[De,_n]=W.time.split(" ");let[En,Gi]=De.split(":");En==="12"&&_n==="AM"?En="00":En!=="12"&&_n==="PM"?En=parseInt(En,10)+12:En==="12"&&_n==="PM"&&(En="12");const yn=new Date;yn.setHours(parseInt(En,10),parseInt(Gi,10),0,0),ct(yn)}catch(De){console.error("Time parse error:",De),ct(null)}else ct(null);Ut(W.location||""),Pt(W.address||""),wt({lat:W.lat,lng:W.lng}),hr(!0)}},Yi=async()=>{!W||!ki.trim()||!Te.trim()||(await S(W.id,{title:ki.toUpperCase(),description:Te,location:xt,address:Rt,lat:Cn?.lat||W.lat,lng:Cn?.lng||W.lng,date:`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}-${String(Pe.getDate()).padStart(2,"0")}`,time:Ze?Ze.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),hr(!1))},fr=()=>{!W||!Mn.trim()||(B(W.id,Mn),Wt(!1),sn({isOpen:!0,title:"REPORT SUBMITTED",message:"PIN REPORTED TO ADMIN AND TEMPORARILY HIDDEN FROM YOUR VIEW.",onConfirm:()=>{sn(De=>({...De,isOpen:!1})),e("/map")},confirmText:"OK",type:"info"}))};return P.useEffect(()=>{console.log(`MMC DEBUG: ConnectionDetail active. ID from params: "${i}"`),r&&r.length>0&&console.log("MMC DEBUG: Available Pin IDs:",r.map(De=>De.id))},[i,r]),P.useEffect(()=>{showAuthModal&&gt.trackEvent("auth_wall_shown",{source:"connection_detail"})},[showAuthModal]),te.useEffect(()=>{if(!kn||!window.google||!window.google.maps||!window.google.maps.places||!W)return;const De=setTimeout(()=>{const _n=document.getElementById("edit-location-input");if(!_n)return;const En=new window.google.maps.places.Autocomplete(_n,{types:["geocode","establishment"],locationBias:{lat:W.lat,lng:W.lng},radius:5e3});En.addListener("place_changed",async()=>{const Gi=En.getPlace();if(Gi&&Gi.geometry){Ut("Processing privacy...");const yn=await tb(Gi);yn&&(wt(yn.coords),Ut(yn.label),Pt(yn.secondaryLabel||""))}})},300);return()=>clearTimeout(De)},[kn,W]),k?_.jsx("div",{className:"detail-loading",children:"LOADING CONNECTION..."}):!W||R.includes(W.id)&&!n?.isAdmin?_.jsxs("div",{className:"detail-container",children:[_.jsx("header",{className:"detail-header-minimal",children:_.jsx("button",{className:"back-link-btn",onClick:()=>e("/map"),children:"? BACK TO MAP"})}),_.jsxs("div",{className:"detail-not-found",children:[_.jsx("h1",{className:"error-title",children:"CONNECTION NOT FOUND"}),_.jsx("p",{children:"This post might have been removed or the link is incorrect."}),_.jsx("button",{className:"btn-return",onClick:()=>e("/map"),children:"GO TO MAP"})]}),_.jsx(ac,{})]}):_.jsx(W1,{apiKey:tY,libraries:["places"],children:_.jsxs("div",{className:"detail-page-wrapper",children:[_.jsxs("header",{className:"detail-top-nav",children:[_.jsxs("button",{className:"nav-back-arrow",onClick:()=>t.state?.fromMessages?e("/messages"):e(-1),children:[_.jsx("span",{className:"arrow-icon",children:"?"})," BACK"]}),_.jsxs("div",{className:"detail-logo-group",onClick:()=>e("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"header-heart-logo-detail"}),_.jsx("span",{className:"logo-text-bangers",children:"MISS ME CONNECTION"})]}),_.jsx("button",{className:"nav-close-x",onClick:()=>t.state?.fromMessages?e("/messages"):e("/browse"),children:_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),G()&&_.jsx("div",{className:"suspension-banner",children:"?? YOUR ACCOUNT IS ON HOLD FOR 48 HOURS. YOU CAN ONLY REPLY TO ONGOING CHATS."}),_.jsx("main",{className:"detail-content-area",children:_.jsxs("div",{className:`premium-detail-card ${W.isReported?"reported-lockdown":""}`,children:[W.isReported&&_.jsxs("div",{className:"lockdown-notice",children:[_.jsx("span",{className:"lockdown-icon",children:"??"}),_.jsxs("div",{className:"lockdown-text",children:[_.jsx("h3",{children:"UNDER REVIEW"}),_.jsx("p",{children:"This pin is temporarily down until an admin reviews the report."})]})]}),_.jsxs("div",{className:"badge-row",children:[_.jsx("span",{className:"type-badge",children:W.type||"Man for Woman"}),w(W.id)>0&&_.jsxs("span",{className:"avg-rating-badge",children:["?? ",w(W.id)]})]}),_.jsx("h1",{className:"detail-hero-title",children:W.title}),_.jsxs("div",{className:"detail-meta-grid",children:[_.jsxs("div",{className:"meta-block",children:[_.jsx("span",{className:"meta-label",children:"DATE OF ENCOUNTER"}),_.jsx("span",{className:"meta-value",children:N(W.date)||"Unknown"})]}),_.jsxs("div",{className:"meta-block",children:[_.jsx("span",{className:"meta-label",children:"TIME"}),_.jsx("span",{className:"meta-value",children:W.time||"Not specified"})]})]}),_.jsx("div",{className:"detail-divider"}),_.jsxs("div",{className:"detail-location-block",children:[_.jsx("span",{className:"meta-label",children:"LOCATION"}),_.jsxs("div",{className:"location-display",children:[_.jsx("span",{className:"location-pin-icon",children:"??"}),_.jsxs("div",{className:"location-texts",children:[_.jsx("span",{className:"loc-main",children:W.location||"Unknown Point"}),_.jsx("span",{className:"loc-sub",children:W.address||W.location||"Unknown Address"})]})]})]}),_.jsx("div",{className:"detail-description-section",children:_.jsx("p",{className:"description-text",children:W.description})}),_.jsxs("div",{className:"detail-rating-section",children:[_.jsx("span",{className:"rating-label",children:"RATE THIS CONNECTION"}),_.jsx("div",{className:"heart-rating-group",children:[1,2,3,4,5].map(De=>_.jsx("button",{className:`heart-btn ${De<=je?"filled":""}`,onClick:()=>Cr(De),children:"??"},De))}),_.jsx("span",{className:"rating-helper",children:je===0?"What do you think?":je===5?"SO GOOD! WE CAN FIND THIS PERSON!":je===1?"Not many details...":"Keep searching!"})]}),W.ownerUid===n?.uid&&_.jsxs("div",{className:"owner-replies-section",children:[_.jsxs("h3",{className:"section-title-mini",children:["CONVERSATIONS (",a.filter(De=>String(De.pinId)===String(W.id)).length,")"]}),_.jsxs("div",{className:"replies-list-mini",children:[a.filter(De=>String(De.pinId)===String(W.id)).map(De=>_.jsxs("div",{className:"reply-card-mini",style:{borderLeft:De.lastSenderUid!==n.uid?"3px solid var(--missme-cyan)":"3px solid #333"},children:[_.jsxs("div",{className:"reply-header",children:[_.jsx("span",{className:"reply-sender",children:De.lastSenderUid===n.uid?"YOU":"POTENTIAL MISSED CONNECTION"}),_.jsx("span",{className:"reply-date",children:N(De.lastMessageAt)})]}),_.jsxs("p",{className:"reply-text",style:{fontStyle:"italic",color:"#888"},children:['"',De.lastMessagePreview,'..."']}),_.jsx("button",{className:"reply-back-btn-mini",onClick:()=>ti(De.responderUid),children:"OPEN CONVERSATION"})]},De.id)),a.filter(De=>String(De.pinId)===String(W.id)).length===0&&_.jsx("p",{style:{color:"#666",fontSize:"0.8rem",textAlign:"center",padding:"20px"},children:"No replies yet."})]})]}),W.ownerUid!==n?.uid&&be.length>0&&_.jsxs("div",{className:"owner-replies-section",children:[_.jsx("h3",{className:"section-title-mini",children:"CONVERSATION HISTORY"}),_.jsx("div",{className:"replies-list-mini",children:be.map(De=>_.jsxs("div",{className:`reply-card-mini ${De.senderUid===n?.uid?"my-reply":"owner-reply"}`,style:{borderLeft:De.senderUid===W.ownerUid?"3px solid var(--missme-cyan)":"3px solid #666"},children:[_.jsxs("div",{className:"reply-header",children:[_.jsx("span",{className:"reply-sender",style:{color:De.senderUid===W.ownerUid?"var(--missme-cyan)":"white"},children:De.senderUid===n?.uid?"YOU":"OWNER"}),_.jsx("span",{className:"reply-date",children:N(De.createdAt)})]}),_.jsx("p",{className:"reply-text",children:De.content})]},De.id))})]}),_.jsxs("div",{className:"detail-cta-group",children:[W.ownerUid===n?.uid||(W.ownerEmail||"").toLowerCase()===(n?.email||"").toLowerCase()?_.jsxs("div",{className:`owner-buttons-stack ${W.isReported?"disabled-controls":""}`,children:[_.jsx("button",{className:"btn-cyan-glow-reply",onClick:()=>e("/messages"),children:"VIEW REPLIES"}),_.jsx("button",{className:`btn-hide-post-detail ${W.status==="hidden"?"is-private":""}`,onClick:async()=>{const De=W.status==="hidden"?"public":"hidden";await S(W.id,{status:De})},children:W.status==="hidden"?"UNHIDE FROM PUBLIC MAP":"HIDE FROM PUBLIC MAP"}),_.jsx("button",{className:"btn-edit-post-detail",onClick:gs,children:"EDIT POST"}),_.jsx("button",{className:"btn-delete-post-detail",onClick:Ar,children:"DELETE POST"})]}):_.jsxs(_.Fragment,{children:[_.jsx("button",{className:"btn-cyan-glow-reply",onClick:()=>ti(),children:ei?"REPLY TO CONVERSATION":"REPLY TO PIN"}),n?.isAdmin&&_.jsxs("div",{className:"admin-moderation-stack",style:{marginTop:"20px",borderTop:"1px solid #333",paddingTop:"15px"},children:[_.jsx("h4",{style:{color:"#666",fontSize:"0.8rem",marginBottom:"10px",textAlign:"center"},children:"ADMIN MODERATION"}),_.jsxs("div",{className:"owner-buttons-stack",children:[_.jsx("button",{className:`btn-hide-post-detail ${W.status==="hidden"?"is-private":""}`,onClick:async()=>{const De=W.status==="hidden"?"public":"hidden";await S(W.id,{status:De})},children:W.status==="hidden"?"UNHIDE (ADMIN)":"HIDE (ADMIN)"}),_.jsx("button",{className:"btn-delete-post-detail",onClick:Ar,children:"DELETE POST (ADMIN)"})]})]})]}),_.jsxs("div",{className:"secondary-row",children:[_.jsx("button",{className:"btn-dark-outline",onClick:Li,children:"IT'S NOT ME"}),_.jsx("button",{className:"btn-dark-outline",onClick:gn,children:"SHARE POST"})]})]}),_.jsxs("div",{className:"detail-footer-meta",children:[_.jsxs("span",{className:"posted-time",children:["POSTED ",N(W.createdAt)," (",O(W.createdAt),")"]}),!W.isReported&&_.jsx("button",{className:"report-link",onClick:()=>Wt(!0),children:"REPORT POST"})]})]})}),kn&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"mmc-modal-card edit-pin-modal",children:[_.jsx("h2",{className:"modal-title",children:"EDIT YOUR POST"}),_.jsxs("div",{className:"edit-form",children:[_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"TITLE"}),_.jsx("input",{type:"text",className:"edit-input",value:ki,onChange:De=>he(De.target.value),required:!0})]}),_.jsxs("div",{className:"edit-row",children:[_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"DATE"}),_.jsx(Cp,{selected:Pe,onChange:De=>{if(!De)return;const _n=new Date(De.getFullYear(),De.getMonth(),De.getDate());ke(_n)},className:"edit-input",dateFormat:"MM/dd/yyyy",required:!0})]}),_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"TIME"}),_.jsx(Cp,{selected:Ze,onChange:De=>ct(De),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa",className:"edit-input",placeholderText:"Time (Optional)",isClearable:!0})]})]}),_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"SEARCH NEW LOCATION (Auto-fills Address)"}),_.jsx("input",{id:"edit-location-input",type:"text",className:"edit-input",placeholder:"Search for a business or area...",defaultValue:xt}),xt&&_.jsxs("div",{className:"location-preview-mini",children:[_.jsx("span",{className:"preview-label",children:xt}),Rt&&_.jsx("span",{className:"preview-address",children:Rt})]})]}),_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"DESCRIPTION"}),_.jsx("textarea",{className:"edit-textarea",value:Te,onChange:De=>Me(De.target.value),required:!0})]})]}),_.jsxs("div",{className:"modal-actions",children:[_.jsx("button",{className:"modal-btn-cancel",onClick:()=>hr(!1),children:"CANCEL"}),_.jsx("button",{className:"modal-btn-confirm",onClick:Yi,children:"SAVE CHANGES"})]})]})}),fe&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"expansive-reply-panel",children:[_.jsxs("div",{className:"modal-header-row",children:[_.jsx("button",{className:"block-user-btn",onClick:li,title:"Bar this user forever",children:"BAR USER"}),_.jsx("h2",{className:"modal-title",children:"MESSAGE"}),_.jsx("button",{className:"close-modal-btn",onClick:Bt,children:"?"})]}),_.jsxs("div",{className:"correspondence-history",ref:ft,children:[be.map(De=>_.jsxs("div",{className:`letter-message ${De.senderUid===n?.uid?"sent":"received"}`,children:[_.jsxs("div",{className:"letter-header",children:[_.jsx("span",{className:"letter-from",children:De.senderUid===n?.uid?"FROM: YOU":`FROM: ${n.nicknames?.[$?`${W.id}_${$}`:`${W.id}_${n.uid}`]||(De.senderUid===W.ownerUid?"PIN OWNER":"POTENTIAL MISSED CONNECTION")}`}),_.jsxs("span",{className:"letter-date",children:[N(De.createdAt)," (",O(De.createdAt),")"]})]}),_.jsx("div",{className:"letter-body",children:De.content})]},De.id)),be.length===0&&_.jsx("div",{className:"letter-note",children:"No previous correspondence. Write your first message below."})]}),_.jsxs("div",{className:"letter-composer-area",children:[_.jsxs("div",{className:"composer-header",children:[_.jsx("span",{children:"REPLY TO THIS CONNECTION"}),n&&_.jsx("div",{className:"nickname-composer-integration",children:Mi?_.jsxs("div",{className:"nickname-input-group",children:[_.jsx("input",{type:"text",className:"nickname-input",placeholder:"Rename...",value:rn,onChange:De=>Kt(De.target.value),autoFocus:!0}),_.jsx("button",{className:"nickname-save-btn",onClick:async()=>{const De=$?`${W.id}_${$}`:`${W.id}_${n.uid}`;await Ve(De,rn),oi(!1)},children:"SAVE"}),_.jsx("button",{className:"rename-btn-mini",onClick:()=>oi(!1),children:"CANCEL"})]}):_.jsxs("div",{className:"nickname-display",children:[_.jsx("span",{className:"nickname-label",children:"PRIVATE NICKNAME:"}),_.jsx("span",{className:"nickname-text",onClick:()=>{Kt(n.nicknames?.[$?`${W.id}_${$}`:`${W.id}_${n.uid}`]||""),oi(!0)},title:"Click to rename",children:n.nicknames?.[$?`${W.id}_${$}`:`${W.id}_${n.uid}`]||"NOT SET"})]})})]}),_.jsx("textarea",{className:"letter-textarea",placeholder:"Start writing your message here...",value:Ce,onChange:De=>K(De.target.value),autoFocus:!0}),_.jsxs("div",{className:"composer-actions",children:[_.jsx("button",{className:"letter-cancel-btn",onClick:Bt,children:"CANCEL"}),_.jsx("button",{className:"letter-send-btn",onClick:async()=>{if(!it&&Ce.trim())try{et(!0);const De=Ce;K(""),await c(W.id,De,$)}catch(De){console.error("Reply failed:",De),alert("Failed to send message: "+De.message)}finally{et(!1)}},disabled:!Ce.trim()||it,children:"SEND MESSAGE"})]})]})]})}),qt&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"mmc-modal-card report-modal",children:[_.jsxs("div",{className:"report-warning-box",children:[_.jsx("span",{className:"warning-emoji",children:"??"}),_.jsx("h2",{className:"modal-title",children:"REPORT PIN"}),_.jsxs("p",{className:"warning-text",children:["If you falsely claim what we deem a ",_.jsx("strong",{children:"Good Pin"})," your account will be suspended for 48 hours your first strike."]})]}),_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"REASON FOR REPORTING"}),_.jsx("textarea",{className:"reply-textarea",placeholder:"Example: Offensive language, fake location, etc.",value:Mn,onChange:De=>Wn(De.target.value)})]}),_.jsxs("div",{className:"modal-actions",children:[_.jsx("button",{className:"modal-btn-cancel",onClick:()=>Wt(!1),children:"CANCEL"}),_.jsx("button",{className:"modal-btn-confirm",onClick:fr,children:"REPORT POST"})]})]})}),showAuthModal&&_.jsx(qE,{onClose:()=>setShowAuthModal(!1),title:"CREATE AN ACCOUNT TO CONTINUE",message:"Create an account to save connections, message, and get notified."}),_.jsx(My,{isOpen:Ln.isOpen,title:Ln.title,message:Ln.message,onConfirm:Ln.onConfirm,onCancel:Ln.onCancel||(()=>sn(De=>({...De,isOpen:!1}))),confirmText:Ln.confirmText,cancelText:Ln.cancelText,type:Ln.type}),_.jsx(ac,{})]})})},iY=()=>{const{user:i,loading:e,pins:t,threads:n,notifications:r,formatDate:a,markNotificationsAsRead:c,isSuspended:d,hasProbation:p,removePin:m,markThreadAsRead:w}=Yo(),b=Hi(),[S,C]=te.useState("received"),[N,O]=te.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"});if(te.useEffect(()=>{i&&c()},[i,c]),e)return _.jsx("div",{className:"loading-screen-missme",children:"LOADING MESSAGES..."});if(!i)return _.jsx(qE,{});const R=Array.isArray(t)?t:[],k=Array.isArray(n)?n:[],Z=Array.isArray(r)?r:[],ne=R.filter(z=>z&&(z.ownerUid===i.uid||z.ownerEmail===i.email)),ee=k.map(z=>{if(!z)return null;const H=R.find(je=>je&&String(je.id)===String(z.pinId)),Ve=z.ownerUid===i.uid?z.ownerLastReadAt:z.responderLastReadAt,W=z.lastMessageAt?.toMillis?z.lastMessageAt.toMillis():z.lastMessageAt?.getTime?z.lastMessageAt.getTime():new Date(z.lastMessageAt||0).getTime(),le=Ve?.toMillis?Ve.toMillis():Ve?.getTime?Ve.getTime():new Date(Ve||0).getTime(),se=W>le;return{thread:z,pin:H,isUnread:se,latestReply:{content:z.lastMessagePreview||"",timestamp:z.lastMessageAt,senderUid:z.lastSenderUid}}}).filter(Boolean),de=i?.email?.toLowerCase()||"",B=ee.filter(z=>{const H=z.thread.ownerUid===i.uid,Re=z.thread.ownerEmail&&z.thread.ownerEmail===de;return H||Re}),V=ee.filter(z=>{const H=z.thread.ownerUid===i.uid,Re=z.thread.ownerEmail&&z.thread.ownerEmail===de;return!H&&!Re}),j=z=>_.jsxs("div",{className:"thread-item-premium moderation-notice-item",children:[_.jsx("div",{className:"thread-avatar-circle notice-avatar",children:_.jsx("span",{className:"thread-logo-mini",children:z.type==="moderation"?"??":"??"})}),_.jsxs("div",{className:"thread-content-block",children:[_.jsxs("div",{className:"thread-top-line",children:[_.jsx("h3",{className:"thread-title-text",children:z.type==="moderation"?"MODERATION NOTICE":"SYSTEM NOTIFICATION"}),_.jsx("span",{className:"thread-time-meta",children:a(z.createdAt)||"Recent"})]}),_.jsx("p",{className:"thread-preview-text notice-body",children:z.message})]})]},z.id),F=z=>{if(!z)return null;const H=k.filter(Ve=>Ve&&String(Ve.pinId)===String(z.id)),Re=H.some(Ve=>Ve.lastSenderUid&&Ve.lastSenderUid!==i.uid);return _.jsxs("div",{className:`thread-item-premium my-pin-item ${Re?"has-unread-glow":""}`,onClick:()=>b(`/browse/${z.id}`),children:[_.jsx("div",{className:"thread-avatar-circle pin-avatar",children:_.jsx("span",{className:"thread-logo-mini",children:Re?"??":"??"})}),_.jsxs("div",{className:"thread-content-block",children:[_.jsxs("div",{className:"thread-top-line",children:[_.jsxs("div",{className:"title-group-unread",children:[_.jsx("h3",{className:"thread-title-text",children:z.title}),Re&&_.jsx("span",{className:"new-msg-tag",children:"NEW REPLY"})]}),_.jsx("span",{className:"thread-time-meta",children:z.date?a(z.date):"Active"})]}),_.jsxs("p",{className:"thread-preview-text",children:[(z.description||"").substring(0,60),"..."]}),_.jsxs("div",{className:"pin-meta-row",children:[_.jsxs("span",{className:`reply-count-badge ${Re?"highlight-cyan":""}`,children:[H.length," ",H.length===1?"CONVERSATION":"CONVERSATIONS"]}),z.isReported&&_.jsx("span",{className:"reported-badge-mini",children:"UNDER REVIEW"}),_.jsx("button",{className:"pin-delete-btn-mini",onClick:Ve=>{Ve.stopPropagation(),O({isOpen:!0,title:"DELETE POST?",message:"ARE YOU SURE YOU WANT TO DELETE THIS POST FOREVER?",onConfirm:()=>{m(z.id),O(W=>({...W,isOpen:!1}))},confirmText:"DELETE",cancelText:"CANCEL",type:"danger"})},children:"DELETE"})]})]}),_.jsx("div",{className:"thread-indicator",children:_.jsx("span",{className:"chevron-right",children:"?"})})]},z.id)},q=z=>{const{pin:H,latestReply:Re,isUnread:Ve,thread:W}=z;if(!i||!W)return null;const se=W.ownerUid!==i.uid;return _.jsxs("div",{className:`thread-item-premium ${Ve?"has-unread-glow":""} ${se?"outbound-style":""}`,onClick:()=>{if(!H)return;w(W.id);const je=se?null:W.responderUid;b(`/browse/${H.id}`,{state:{openReply:!0,responderUid:je,fromMessages:!0}})},style:{opacity:H?1:.6,cursor:H?"pointer":"default"},children:[_.jsx("div",{className:"thread-avatar-circle",children:_.jsx("span",{className:"thread-logo-mini",children:H?se?"??":"??":"??"})}),_.jsxs("div",{className:"thread-content-block",children:[_.jsxs("div",{className:"thread-top-line",children:[_.jsx("div",{className:"title-group-vertical",children:_.jsx("h3",{className:"thread-title-text",children:H?H.title:"DELETED CONNECTION"})}),_.jsx("span",{className:"thread-time-meta",children:Re?.timestamp?a(Re.timestamp):"Recent"})]}),_.jsxs("div",{className:"thread-tags-row",children:[se&&_.jsx("span",{className:"sent-label-tag",children:"MY REPLY"}),!H&&_.jsx("span",{className:"deleted-status-tag",children:"POST REMOVED"})]}),_.jsxs("p",{className:"thread-preview-text",children:[_.jsx("span",{className:"sender-label",children:Re?.senderUid===i.uid?"You: ":"From: "}),Re?.content?Re.content:"Message sent..."]})]}),H&&_.jsx("div",{className:"thread-indicator",children:_.jsx("span",{className:"chevron-right",children:"?"})})]},W.id)};return _.jsxs("div",{className:"messages-page-pro",children:[_.jsxs("header",{className:"messages-top-bar",children:[_.jsxs("div",{className:"messages-logo-group",onClick:()=>b("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"header-heart-logo-messages"}),_.jsx("h1",{className:"messages-main-title",children:"MESSAGES"})]}),_.jsxs("div",{className:"user-status-badges",children:[p()&&_.jsx("span",{className:"status-badge review",children:"?? UNDER 30-DAY REVIEW"}),d()&&_.jsx("span",{className:"status-badge suspended",children:"?? ACCOUNT ON HOLD"})]})]}),_.jsxs("div",{className:"tab-control-group",children:[_.jsxs("button",{className:`tab-btn ${S==="received"?"active":""}`,onClick:()=>C("received"),children:["POSTS (",ne.length,")"]}),_.jsxs("button",{className:`tab-btn ${S==="sent"?"active":""}`,onClick:()=>C("sent"),children:["MY REPLIES (",V.length,")"]}),_.jsxs("button",{className:`tab-btn ${S==="inbox"?"active":""}`,onClick:()=>C("inbox"),title:"All direct chats regarding your posts",children:["INBOX (",B.length,")"]}),_.jsxs("button",{className:`tab-btn ${S==="notices"?"active":""}`,onClick:()=>C("notices"),children:["NOTICES (",Z.length,")"]})]}),_.jsxs("main",{className:"messages-list-scroll",children:[!1,S==="received"?_.jsx("div",{className:"thread-stack",children:ne.length>0?ne.map(z=>F(z)):_.jsxs("div",{className:"empty-messages",children:[_.jsx("span",{className:"empty-icon",children:"??"}),_.jsx("p",{children:"You haven't posted any connections yet."})]})}):S==="sent"?_.jsx("div",{className:"thread-stack",children:V.length>0?V.map(z=>q(z)):_.jsxs("div",{className:"empty-messages",children:[_.jsx("span",{className:"empty-icon",children:"??"}),_.jsx("p",{children:"You haven't replied to any pins yet."})]})}):S==="inbox"?_.jsx("div",{className:"thread-stack",children:B.length>0?B.map(z=>q(z)):_.jsxs("div",{className:"empty-messages",children:[_.jsx("span",{className:"empty-icon",children:"??"}),_.jsx("p",{children:"No one has replied to your pins lately."})]})}):_.jsx("div",{className:"thread-stack",children:Z.length>0?Z.map(z=>j(z)):_.jsxs("div",{className:"empty-messages",children:[_.jsx("span",{className:"empty-icon",children:"??"}),_.jsx("p",{children:"No system notifications."})]})})]}),_.jsx(My,{isOpen:N.isOpen,title:N.title,message:N.message,onConfirm:N.onConfirm,onCancel:()=>O(z=>({...z,isOpen:!1})),confirmText:N.confirmText,cancelText:N.cancelText,type:N.type}),_.jsx(ac,{})]})},rY=()=>{const{user:i,loading:e,logout:t,deleteAccount:n,updateUserProfile:r,dateFormat:a,setDateFormat:c,pins:d,hiddenPins:p,hidePin:m,unhidePin:w,clearHiddenPins:b,mapMode:S,setMapMode:C,distanceUnit:N,setDistanceUnit:O}=Yo(),R=Hi(),[k,G]=te.useState(!1),[Z,ne]=te.useState(!1),[ee,de]=te.useState(!1),[B,V]=te.useState(!1),[j,F]=te.useState(""),[q,z]=te.useState(""),[H,Re]=te.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"danger"}),Ve=()=>{t(),R("/login")},W=()=>{n(),R("/")},le=()=>{F(i.name||""),z(i.postalCode||""),V(!0)},se=async()=>{j.trim()&&(await r(i.uid,{name:j.toUpperCase(),postalCode:q}),V(!1))},je=d.filter(K=>p.includes(K.id)),Ce=[{icon:null,label:"Support",actionIcon:"??"},{icon:null,label:"Terms & conditions",actionIcon:"?"},{icon:null,label:"Privacy policy",actionIcon:"?"},{icon:null,label:"About us",actionIcon:"?"}];return e?_.jsx("div",{className:"loading-screen-missme",children:"LOADING PROFILE..."}):i?ee?_.jsxs("div",{className:"account-page-premium",children:[_.jsx(mu,{isOpen:k,onClose:()=>G(!1)}),_.jsxs("header",{className:"premium-account-header",children:[_.jsx("button",{className:"side-menu-btn",onClick:()=>de(!1),children:_.jsx("span",{className:"back-arrow",children:"?"})}),_.jsx("h1",{className:"account-title-center",children:"HIDDEN PINS"}),_.jsx("div",{className:"header-spacer"})]}),_.jsx("div",{className:"hidden-list-container",children:je.length===0?_.jsxs("div",{className:"empty-hidden-state",children:[_.jsx("p",{children:"No hidden pins found."}),_.jsx("button",{className:"btn-cyan-glow-small",onClick:()=>de(!1),children:"BACK"})]}):_.jsxs("div",{className:"hidden-items-stack",children:[je.map(K=>_.jsxs("div",{className:"hidden-item-card",children:[_.jsxs("div",{className:"hidden-item-info",children:[_.jsx("span",{className:"hidden-title",children:K.title}),_.jsxs("span",{className:"hidden-meta",children:[K.type,"  ",K.location?.split(",")[0]]})]}),_.jsx("button",{className:"unhide-btn-pill",onClick:()=>w(K.id),children:"UNHIDE"})]},K.id)),_.jsx("button",{className:"clear-all-hidden-btn",onClick:b,children:"UNHIDE ALL PINS"})]})}),_.jsx(ac,{})]}):_.jsxs("div",{className:"account-page-premium",children:[_.jsx(mu,{isOpen:k,onClose:()=>G(!1)}),_.jsxs("header",{className:"premium-account-header",children:[_.jsx("button",{className:"side-menu-btn",onClick:()=>R("/map"),children:_.jsx("span",{className:"close-x-icon",children:"?"})}),_.jsxs("div",{className:"account-logo-group",onClick:()=>R("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"header-heart-logo-account"}),_.jsx("h1",{className:"account-title-center",children:"ACCOUNT & SETTINGS"})]}),_.jsx("div",{className:"header-spacer"})]}),_.jsxs("div",{className:"premium-profile-card",children:[_.jsx("div",{className:"profile-pin-container",children:_.jsx("div",{className:"pin-background-circle",children:_.jsx("img",{src:xr,alt:"",className:"profile-heart-pin"})})}),_.jsxs("div",{className:"profile-identity",children:[_.jsx("h2",{className:"profile-hero-name",children:i.name==="SHELLY"?"MICHELE":i.name}),_.jsx("span",{className:"profile-email-cyan",children:i.email})]}),_.jsx("div",{className:"profile-divider-small"}),_.jsxs("div",{className:"zip-display-section",children:[_.jsx("span",{className:"zip-label-text",children:"Postal Code"}),_.jsx("span",{className:"zip-value-text",children:i.postalCode||"NOT SET"})]}),_.jsxs("div",{className:"settings-rows-container",children:[_.jsxs("div",{className:"preferences-row",children:[_.jsx("span",{className:"row-label",children:"Date Format"}),_.jsx("div",{className:"format-pills-group-full",children:["mm/dd/yyyy","dd/mm/yyyy","yyyy/mm/dd"].map(K=>_.jsx("button",{className:`pref-pill-full ${a===K?"active":""}`,onClick:()=>c(K),children:K.toUpperCase()},K))})]}),_.jsxs("div",{className:"preferences-row",children:[_.jsx("span",{className:"row-label",children:"Map Theme"}),_.jsx("div",{className:"format-pills-group-full",children:["light","dark"].map(K=>_.jsx("button",{className:`pref-pill-full ${S===K?"active":""}`,onClick:()=>C(K),children:K.toUpperCase()},K))})]}),_.jsxs("div",{className:"preferences-row",children:[_.jsx("span",{className:"row-label",children:"Distance Units"}),_.jsx("div",{className:"format-pills-group-full",children:["miles","km"].map(K=>_.jsx("button",{className:`pref-pill-full ${N===K?"active":""}`,onClick:()=>O(K),children:K==="miles"?"MILES":"KILOMETERS"},K))})]}),Ce.map((K,fe)=>_.jsxs("div",{className:"settings-row-item cursor-pointer",onClick:()=>{K.label==="Support"&&R("/support"),K.label==="Terms & conditions"&&R("/terms"),K.label==="Privacy policy"&&R("/privacy"),K.label==="About us"&&R("/about")},children:[_.jsx("span",{className:"row-label",children:K.label}),_.jsx("span",{className:"row-action-indicator",children:K.actionIcon})]},fe))]}),_.jsxs("div",{className:"profile-actions-footer",children:[_.jsx("button",{className:"action-link-btn",onClick:le,children:"Edit?"}),p.length>0&&_.jsxs("button",{className:"action-link-btn unhide-btn",onClick:()=>de(!0),children:["Unhide(",p.length,")"]}),i?.isAdmin&&_.jsx("button",{className:"action-link-btn admin-link-text",onClick:()=>R("/admin"),children:"ADMIN?"}),_.jsx("button",{className:"action-link-btn logout-text",onClick:Ve,children:"Logout?"})]}),_.jsx("div",{className:"danger-zone-minimal",children:_.jsx("button",{className:"delete-acc-link",onClick:()=>Re({isOpen:!0,title:"DELETE ACCOUNT?",message:"THIS ACTION IS PERMANENT. YOU WILL LOSE ALL YOUR CONNECTIONS AND PROFILE DATA.",onConfirm:W,confirmText:"DELETE FOREVER",cancelText:"NOT TODAY",type:"danger"}),children:"Delete Account?"})})]}),B&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"modal-card profile-edit-modal",children:[_.jsx("header",{className:"modal-header",children:_.jsx("h2",{className:"modal-title",children:"EDIT PROFILE"})}),_.jsxs("div",{className:"modal-body",children:[_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"DISPLAY NAME"}),_.jsx("input",{type:"text",className:"edit-input",value:j,onChange:K=>F(K.target.value),placeholder:"Your Name"})]}),_.jsxs("div",{className:"edit-input-group",children:[_.jsx("label",{children:"POSTAL CODE (FOR MAP HOME)"}),_.jsx("input",{type:"text",className:"edit-input",value:q,onChange:K=>z(K.target.value),placeholder:"Zip Code"})]})]}),_.jsxs("div",{className:"modal-actions",children:[_.jsx("button",{className:"modal-btn-cancel",onClick:()=>V(!1),children:"CANCEL"}),_.jsx("button",{className:"modal-btn-confirm",onClick:se,children:"SAVE CHANGES"})]})]})}),_.jsx(My,{isOpen:H.isOpen,title:H.title,message:H.message,onConfirm:H.onConfirm,onCancel:()=>Re(K=>({...K,isOpen:!1})),confirmText:H.confirmText,cancelText:H.cancelText,type:H.type}),_.jsx(ac,{})]}):_.jsx(qE,{})},sY=()=>{const i=Hi(),{login:e,signup:t,isLoggedIn:n,resetPassword:r}=Yo(),[a,c]=P.useState(""),[d,p]=P.useState(""),[m,w]=P.useState(""),[b,S]=P.useState(""),C=Ya(),[N,O]=P.useState(C.state?.mode==="signup"),[R,k]=P.useState(""),[G,Z]=P.useState(!1),[ne,ee]=P.useState(!1),[de,B]=P.useState(!1);P.useEffect(()=>{n&&i("/map")},[n,i]);const V=async F=>{F.preventDefault(),k(""),Z(!0);try{if(N){if(!ne||!de){k("You must confirm your age and agree to our terms to proceed.");return}await t(a,d,m,b)}else await e(a,d);i("/map")}catch(q){let z=q.message.replace("Firebase:","").trim();q.code==="auth/network-request-failed"?z="Network connection lost. Please check your internet and try again.":q.code==="auth/invalid-credential"||q.code==="auth/user-not-found"||q.code==="auth/wrong-password"?z="Invalid email or password.":q.code==="auth/email-already-in-use"?z="This email address is already registered.":q.code==="auth/too-many-requests"?z="Too many login attempts. Please wait a moment and try again.":q.code==="auth/weak-password"&&(z="Password is too weak. Please use at least 6 characters."),k(z)}finally{Z(!1)}},j=async()=>{if(!a){k("Please enter your email address first.");return}try{await r(a),k("Password reset email sent! Please check your inbox.")}catch(F){k(F.message.replace("Firebase:","").trim())}};return _.jsx("div",{className:"login-page",children:_.jsxs("div",{className:"login-card",children:[_.jsx("button",{className:"login-back-arrow",onClick:()=>i(-1),title:"Go Back",children:_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:_.jsx("polyline",{points:"15 18 9 12 15 6"})})}),_.jsxs("div",{className:"login-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"login-heart-logo"}),_.jsx("h1",{className:"login-title",children:"MISS ME CONNECTION"})]}),_.jsx("p",{className:"login-subtitle",children:N?"CREATE YOUR ACCOUNT":"ENTER YOUR DETAILS TO SIGN IN"}),_.jsxs("form",{className:"login-form",onSubmit:V,children:[R&&_.jsx("div",{className:"login-error",children:R}),N&&_.jsxs("div",{className:"input-group",children:[_.jsx("label",{children:"YOUR NAME"}),_.jsx("input",{type:"text",placeholder:"JANE DOE",className:"login-input",value:m,onChange:F=>w(F.target.value),required:N})]}),N&&_.jsxs("div",{className:"input-group",children:[_.jsx("label",{children:"POSTAL CODE"}),_.jsx("input",{type:"text",placeholder:"90210",className:"login-input",value:b,onChange:F=>S(F.target.value),required:N})]}),_.jsxs("div",{className:"input-group",children:[_.jsx("label",{children:"EMAIL"}),_.jsx("input",{type:"email",placeholder:"name@example.com",className:"login-input",value:a,onChange:F=>c(F.target.value),required:!0})]}),_.jsxs("div",{className:"input-group",children:[_.jsx("label",{children:"PASSWORD"}),_.jsx("input",{type:"password",placeholder:"",className:"login-input",value:d,onChange:F=>p(F.target.value),required:!0}),!N&&_.jsx("span",{className:"forgot-password-link",onClick:j,children:"Forgot Password?"})]}),N&&_.jsxs("div",{className:"legal-checkboxes",children:[_.jsxs("label",{className:"checkbox-container",children:[_.jsx("input",{type:"checkbox",checked:ne,onChange:F=>ee(F.target.checked)}),_.jsx("span",{className:"checkbox-label",children:"I confirm that I am 18 years of age or older."})]}),_.jsxs("label",{className:"checkbox-container",children:[_.jsx("input",{type:"checkbox",checked:de,onChange:F=>B(F.target.checked)}),_.jsxs("span",{className:"checkbox-label",children:["I agree with the ",_.jsx("span",{className:"legal-link",onClick:F=>{F.stopPropagation(),i("/privacy")},children:"Privacy Policy"})," and ",_.jsx("span",{className:"legal-link",onClick:F=>{F.stopPropagation(),i("/terms")},children:"Terms and Service"})]})]})]}),_.jsx("button",{type:"submit",className:"login-submit-btn",disabled:G,children:G?"WAITING...":N?"CREATE ACCOUNT":"SIGN IN"}),_.jsx("button",{type:"button",className:"login-explore-btn",onClick:()=>i("/"),children:"BACK TO HOME"})]}),_.jsxs("p",{className:"signup-prompt",children:[N?"Already have an account? ":"Don't have an account? ",_.jsx("span",{className:"signup-link",onClick:()=>{O(!N),k(""),ee(!1),B(!1)},children:N?"Sign in":"Sign up"})]})]})})},aY=()=>{const i=Hi(),{user:e,pins:t,removePin:n,addPin:r,addNotification:a}=Yo(),[c,d]=P.useState([]),[p,m]=P.useState([]),[w,b]=P.useState([]),[S,C]=P.useState(""),[N,O]=P.useState(!0),[R,k]=P.useState({isOpen:!1,title:"",message:"",onConfirm:null,isAlert:!1,showInput:!1,inputValue:"",showDuration:!1,durationValue:"48"}),[G,Z]=P.useState("postalCode"),[ne,ee]=P.useState(""),[de,B]=P.useState(null);P.useEffect(()=>{if(e&&!e.isAdmin){i("/map");return}if(e){(async()=>{const et=await Rd(Di(st,"users"));d(et.docs.map(ft=>({id:ft.id,...ft.data()})))})();const ye=Co(Di(st,"reports"),bp("createdAt","desc")),be=Hl(ye,et=>{m(et.docs.map(ft=>({id:ft.id,...ft.data()}))),O(!1)}),Fe=Co(Di(st,"deleted_pins"),bp("deletedAt","desc"),LP(50)),it=Hl(Fe,et=>{b(et.docs.map(ft=>({id:ft.id,...ft.data()})))});return()=>{be(),it()}}},[e,i]),e?.isAdmin;const V=$=>{if(!$.createdAt)return!1;const ye=$.createdAt?.toDate?$.createdAt.toDate():new Date($.createdAt),be=new Date,Fe=new Date;return Fe.setDate(be.getDate()-30),ye<Fe},j=t.filter($=>!V($)),F=t.filter($=>V($)),q=$=>{if(!$.isSuspended)return!1;if(!$.suspendedUntil)return!0;const ye=new Date,be=$.suspendedUntil.toDate?$.suspendedUntil.toDate():new Date($.suspendedUntil);return ye<be},z=$=>{if($.email?.toLowerCase()==="missme@missmeconnection.com"||!$.reviewStatus)return!1;if(!$.reviewExpiresAt)return!0;const ye=new Date,be=$.reviewExpiresAt.toDate?$.reviewExpiresAt.toDate():new Date($.reviewExpiresAt);return ye<be},H=async $=>{k({isOpen:!0,title:"CONFIRM DELETE",message:"ARE YOU SURE YOU WANT TO DELETE THIS PIN? THIS CANNOT BE UNDONE.",showInput:!0,inputValue:"Manual moderation",onConfirm:async ye=>{await n($,ye||"Manual moderation",e.uid),k(be=>({...be,isOpen:!1}))},isAlert:!1})},Re=async()=>{k({isOpen:!0,title:"CRITICAL WARNING",message:"DELETE ALL PINS FROM THE MAP? THIS IS PERMANENT.",showInput:!1,onConfirm:async()=>{for(const $ of t)await n($.id,"Bulk Wipe Action",e.uid);k({isOpen:!0,title:"WIPED",message:"ALL PINS DELETED.",isAlert:!0})},isAlert:!1})},Ve=async()=>{const $=[{title:"Reading Agatha Christie in the corner lounge",description:"You were reading Agatha Christie in the corner lounge. I was the one who smiled at you while ordering a drink. You had a red scarf.",type:"Woman ? Man",location:"Har Bar, Shop 6C, 26/34 Dunn Bay Rd, Dunsborough WA 6281, Australia",date:"2025-01-14",time:"3:00 pm",lat:-33.6111,lng:115.1011},{title:"Central Park Encounter",description:"Saw you near the Bethesda Fountain. You had a red scarf and were reading a book. We made eye contact for a split second.",type:"Man ? Woman",location:"Bethesda Fountain, Central Park, New York, NY",date:"2026-02-11",time:"02:30 PM",lat:40.7739,lng:-73.9713},{title:"Subway Smile",description:"Line 1 heading downtown. You got off at Times Square. I was wearing the green jacket. You smiled as the doors closed.",type:"Woman ? Man",location:"Times Square-42 St Station, New York, NY",date:"2026-02-11",time:"05:00 PM",lat:40.7589,lng:-73.9851},{title:"Coffee Shop Spark",description:"Blue Bottle Coffee on 9th Ave. We both reached for the oat milk at the same time. I wish I had said something more than just 'sorry'.",type:"Man ? Man",location:"Blue Bottle Coffee, 450 W 15th St, New York, NY 10014",date:"2026-02-10",time:"09:00 AM",lat:40.7484,lng:-74.0051},{title:"SoHo Stroll",description:"Walking down Prince St. You were walking a golden retriever. We bumped shoulders. You have amazing eyes.",type:"Woman ? Woman",location:"Prince St, SoHo, New York, NY",date:"2026-02-09",time:"04:15 PM",lat:40.7247,lng:-73.9995}];k({isOpen:!0,title:"SEED DATABASE",message:`ADD ${$.length} TEST PINS FROM DESIGN FILES?`,showInput:!1,onConfirm:async()=>{for(const ye of $)await r(ye);k({isOpen:!0,title:"SUCCESS",message:"TEST PINS SEEDED SUCCESSFULLY",isAlert:!0})},isAlert:!1})},W=()=>{Ve()},le=async($,ye)=>{k(ye?{isOpen:!0,title:"UNSUSPEND USER",message:"RESTORE ACCESS FOR THIS USER?",showInput:!1,showDuration:!1,onConfirm:async()=>{const be=an(st,"users",$);await lr(be,{isSuspended:!1,suspendedUntil:null}),d(Fe=>Fe.map(it=>it.id===$?{...it,isSuspended:!1}:it)),k(Fe=>({...Fe,isOpen:!1}))},isAlert:!1}:{isOpen:!0,title:"MANUAL SUSPENSION",message:"HOW MANY HOURS SHOULD THIS USER BE SUSPENDED?",showInput:!1,showDuration:!0,durationValue:"48",onConfirm:async(be,Fe)=>{const it=parseInt(Fe)||48,et=new Date;et.setHours(et.getHours()+it);const ft=an(st,"users",$);await lr(ft,{isSuspended:!0,suspendedUntil:et}),d(qt=>qt.map(Wt=>Wt.id===$?{...Wt,isSuspended:!0}:Wt)),k(qt=>({...qt,isOpen:!1}))},isAlert:!1})},se=async($,ye,be)=>{if(be.toLowerCase()==="missme@missmeconnection.com"){k({isOpen:!0,title:"DENIED",message:"CRITICAL: ROOT ADMIN STATUS CANNOT BE REVOKED.",isAlert:!0,showInput:!1});return}k({isOpen:!0,title:"ADMIN ACCESS",message:`GIVE ${ye?"REMOVE":"GRANT"} ADMIN ACCESS TO THIS USER?`,showInput:!1,onConfirm:async()=>{try{const it=an(st,"users",$);await lr(it,{isAdmin:!ye}),d(et=>et.map(ft=>ft.id===$?{...ft,isAdmin:!ye}:ft)),k(et=>({...et,isOpen:!1}))}catch(it){console.error("Admin toggle error:",it),k({isOpen:!0,title:"ERROR",message:"ERROR UPDATING ADMIN STATUS.",isAlert:!0})}},isAlert:!1})},je=async($,ye,be)=>{const Fe=p.find(it=>it.id===$);Fe&&k(be==="delete"?{isOpen:!0,title:"DELETE PIN & WARN USER",message:'Provide a reason (e.g. "Yard sale not allowed"). Owner will get a 30-day review flag.',showInput:!0,inputValue:"",onConfirm:async it=>{try{const et=t.find(ft=>ft.id===ye);if(et){await n(ye,it,e.uid);const qt=(await Rd(Di(st,"reports"))).docs.filter(Wn=>Wn.data().pinId===ye);for(const Wn of qt)await Ep(an(st,"reports",Wn.id));const Wt=an(st,"users",et.ownerUid),Mn=new Date;Mn.setDate(Mn.getDate()+30),await lr(Wt,{reviewStatus:!0,reviewExpiresAt:Mn,lastModerationReason:it}),await a(et.ownerUid,`Your pin "${et.title}" was removed. Reason: ${it}. Your account is under review for 30 days.`),await a(Fe.reporterUid,"Thank you for reporting. Validated. The pin has been removed.")}k({isOpen:!0,title:"RESOLVED",message:"PIN REMOVED. OWNER PLACED ON 30-DAY PROBATION.",isAlert:!0})}catch(et){console.error("Mod error:",et)}},isAlert:!1}:{isOpen:!0,title:"DISMISS & STRIKE REPORTER",message:"No violation found. How many hours to suspend the false reporter?",showInput:!1,showDuration:!0,durationValue:"48",onConfirm:async(it,et)=>{const ft=parseInt(et)||48;try{const qt=an(st,"users",Fe.reporterUid),Wt=new Date;Wt.setHours(Wt.getHours()+ft),await lr(qt,{isSuspended:!0,suspendedUntil:Wt}),await a(Fe.reporterUid,`Your account is on hold for ${ft} hours due to a false report strike.`),await Ep(an(st,"reports",$)),await lr(an(st,"pins",ye),{isReported:!1}),k({isOpen:!0,title:"DONE",message:"REPORT DISMISSED. REPORTER SUSPENDED 48h.",isAlert:!0})}catch(qt){console.error("Dismiss error:",qt)}},isAlert:!1})},Ce=async()=>{const $=c.filter(ye=>(!ye.state||ye.state==="UNKNOWN")&&ye.postalCode);if($.length===0){k({isOpen:!0,title:"ALL CLEAR",message:"ALL USERS ALREADY HAVE STATE/COUNTRY DATA.",isAlert:!0,showInput:!1});return}k({isOpen:!0,title:"RECOVER SMARTS",message:`SCAN AND BACKFILL ${$.length} USERS WITH MISSING STATE/COUNTRY DATA? This uses the Google Geocoder for each user.`,showInput:!1,onConfirm:async()=>{for(const be of $){const Fe=await nb(be.postalCode);Fe&&await lr(an(st,"users",be.id),{state:Fe.state,country:Fe.country})}const ye=await Rd(Di(st,"users"));d(ye.docs.map(be=>({id:be.id,...be.data()}))),k({isOpen:!0,title:"COMPLETE",message:"USER LOCATION DATA HAS BEEN RECOVERED.",isAlert:!0,showInput:!1})}})},K=async()=>{if(ne.trim())try{const $=an(st,"pins",ne),be=(await Rd(Co(Di(st,"pins")))).docs.find(qt=>qt.id===ne.trim());let Fe=null;be&&(Fe={id:be.id,...be.data()});const it=Co(Di(st,"threads"),where("pinId","==",ne.trim())),ft=(await Rd(it)).docs.map(qt=>({id:qt.id,...qt.data()}));B({pin:Fe,threads:ft,currentUser:{uid:e?.uid,email:e?.email}})}catch($){console.error("DIAGNOSTICS ERROR:",$),alert("Error fetching diagnostics. Check console.")}},fe=te.useMemo(()=>{const $={};return c.forEach(ye=>{let be="UNKNOWN";G==="postalCode"?be=ye.postalCode||"UNKNOWN":G==="state"?be=ye.state||"UNKNOWN":G==="country"&&(be=ye.country||"USA"),$[be]=($[be]||0)+1}),Object.entries($).sort((ye,be)=>be[1]-ye[1])},[c,G]),we=c.filter($=>$.email?.toLowerCase().includes(S.toLowerCase())||$.name?.toLowerCase().includes(S.toLowerCase())||$.postalCode?.includes(S));return _.jsxs("div",{className:"admin-container",children:[_.jsxs("header",{className:"admin-header",children:[_.jsx("button",{className:"admin-back-btn",onClick:()=>i("/map"),children:"? MAP"}),_.jsx("h1",{className:"admin-title",children:"ADMIN CONTROL CENTER"}),_.jsxs("div",{className:"admin-stats",children:[_.jsxs("span",{children:["USERS: ",c.length]}),_.jsxs("span",{children:["PINS: ",t.length]}),_.jsx("button",{className:"seed-pins-btn backfill-btn",onClick:Ce,title:"Backfill State/Country from Zip",children:"RECOVER SMARTS"}),_.jsx("button",{className:"seed-pins-btn",onClick:W,children:"SEED PINS"}),_.jsx("button",{className:"wipe-db-btn",onClick:Re,children:"WIPE PINS"})]})]}),_.jsxs("div",{className:"admin-grid",children:[_.jsxs("section",{className:"admin-section",children:[_.jsxs("h2",{className:"section-title",children:["ACTIVE PINS (",j.length,")"]}),_.jsxs("div",{className:"admin-list active-pins-scroll",children:[j.length===0&&_.jsx("p",{className:"no-data-text",children:"No active pins"}),j.map($=>_.jsxs("div",{className:"admin-item",children:[_.jsxs("div",{className:"item-info",children:[_.jsxs("span",{className:"item-label",children:[$.title,$.isReported&&_.jsx("span",{className:"reported-badge",children:"REPORTED"})]}),_.jsx("span",{className:"item-sub-label",children:$.ownerEmail})]}),_.jsxs("div",{className:"pin-action-group",children:[_.jsx("button",{className:"item-review-btn",onClick:()=>i(`/browse/${$.id}`),children:"REVIEW"}),_.jsx("button",{className:"item-delete-btn",onClick:()=>H($.id),children:"DELETE"})]})]},$.id))]})]}),_.jsxs("section",{className:"admin-section",children:[_.jsxs("div",{className:"section-header",children:[_.jsxs("h2",{className:"section-title",children:["USERS (",c.length,")"]}),_.jsx("input",{type:"text",placeholder:"SEARCH USERS/ZIPS...",className:"admin-search",value:S,onChange:$=>C($.target.value)})]}),_.jsx("div",{className:"admin-list users-scroll",children:we.map($=>_.jsxs("div",{className:"admin-item",children:[_.jsxs("div",{className:"item-info",children:[_.jsxs("div",{className:"item-label-group",children:[_.jsx("span",{className:"item-label",children:$.name}),$.email?.toLowerCase()==="missme@missmeconnection.com"&&_.jsx("span",{className:"admin-badge",children:"ROOT"}),$.isAdmin&&$.email?.toLowerCase()!=="missme@missmeconnection.com"&&_.jsx("span",{className:"admin-badge",children:"ADMIN"}),z($)&&_.jsx("span",{className:"moderation-badge review",children:"?? REVIEW"}),q($)&&_.jsx("span",{className:"moderation-badge suspended",children:"?? HOLD"})]}),_.jsxs("span",{className:"item-sub-label",children:[$.email," ",_.jsx("span",{className:"zip-badge",children:$.postalCode})]})]}),_.jsx("div",{className:"user-action-group",children:$.email?.toLowerCase()!=="missme@missmeconnection.com"?_.jsxs(_.Fragment,{children:[_.jsx("button",{className:`admin-toggle-btn ${$.isSuspended?"is-admin":""}`,onClick:()=>le($.id,$.isSuspended),children:$.isSuspended?"RESTORE":"SUSPEND"}),_.jsx("button",{className:`admin-toggle-btn ${$.isAdmin?"is-admin":""}`,onClick:()=>se($.id,$.isAdmin,$.email),children:$.isAdmin?"REVOKE":"MAKE ADMIN"})]}):_.jsx("span",{className:"root-locked-label",children:"PROTECTED ROOT"})})]},$.id))})]}),_.jsxs("section",{className:"admin-section insights-section",children:[_.jsxs("div",{className:"section-header-row",children:[_.jsx("h2",{className:"section-title",children:"MARKET INSIGHTS"}),_.jsxs("div",{className:"insight-tabs",children:[_.jsx("button",{className:`insight-tab-btn ${G==="postalCode"?"active":""}`,onClick:()=>Z("postalCode"),children:"ZIP"}),_.jsx("button",{className:`insight-tab-btn ${G==="state"?"active":""}`,onClick:()=>Z("state"),children:"STATE"}),_.jsx("button",{className:`insight-tab-btn ${G==="country"?"active":""}`,onClick:()=>Z("country"),children:"COUNTRY"})]})]}),_.jsxs("div",{className:"admin-list overflow-insights",children:[_.jsxs("div",{className:"insight-header",children:[_.jsx("span",{style:{textTransform:"uppercase"},children:G==="postalCode"?"POSTAL CODE":G}),_.jsx("span",{children:"USER COUNT"})]}),fe.map(([$,ye])=>_.jsxs("div",{className:"insight-row",children:[_.jsx("span",{className:"insight-zip",children:$}),_.jsxs("div",{className:"insight-bar-wrap",children:[_.jsx("div",{className:"insight-bar",style:{width:`${ye/Math.max(1,c.length)*100}%`}}),_.jsx("span",{className:"insight-count",children:ye})]})]},$))]})]}),_.jsxs("section",{className:"admin-section",children:[_.jsxs("h2",{className:"section-title reported-title",children:["REPORTED CONTENT (",p.length,")"]}),_.jsxs("div",{className:"admin-list",children:[p.length===0&&_.jsx("p",{className:"no-data-text",children:"No active reports"}),p.map($=>_.jsxs("div",{className:"admin-item reported-item",children:[_.jsxs("div",{className:"item-info",children:[_.jsxs("span",{className:"item-label",children:["REASON: ",$.reason]}),_.jsxs("span",{className:"item-sub-label",children:["BY: ",$.reporterEmail]}),_.jsx("button",{className:"view-pin-btn",onClick:()=>i(`/browse/${$.pinId}`),children:"VIEW PIN"})]}),_.jsxs("div",{className:"report-actions",children:[_.jsx("button",{className:"item-approve-btn",onClick:()=>je($.id,$.pinId,"keep"),children:"KEEP"}),_.jsx("button",{className:"item-delete-btn",onClick:()=>je($.id,$.pinId,"delete"),children:"DELETE PIN"})]})]},$.id))]})]}),_.jsxs("section",{className:"admin-section",children:[_.jsxs("h2",{className:"section-title",style:{color:"#666"},children:["ARCHIVED PINS (30+ DAYS OLD) - ",F.length]}),_.jsxs("div",{className:"admin-list archived-pins-scroll",children:[F.length===0&&_.jsx("p",{className:"no-data-text",children:"No archived pins"}),F.map($=>_.jsxs("div",{className:"admin-item",style:{opacity:.6},children:[_.jsxs("div",{className:"item-info",children:[_.jsx("span",{className:"item-label",children:$.title}),_.jsxs("span",{className:"item-sub-label",children:[$.ownerEmail,"  ",$.date?.split("T")[0]]})]}),_.jsxs("div",{className:"pin-action-group",children:[_.jsx("button",{className:"item-review-btn",onClick:()=>i(`/browse/${$.id}`),children:"VIEW"}),_.jsx("button",{className:"item-delete-btn",onClick:()=>H($.id),children:"DELETE"})]})]},$.id))]})]}),_.jsxs("section",{className:"admin-section",style:{gridColumn:"1 / -1"},children:[_.jsxs("h2",{className:"section-title",style:{color:"#ffb300"},children:["? BLACK BOX: DELETED LOG (",w.length,")"]}),_.jsxs("div",{className:"admin-list black-box-scroll",style:{maxHeight:"400px",overflowY:"auto"},children:[w.length===0&&_.jsx("p",{className:"no-data-text",children:"No deleted pins in log"}),w.map($=>_.jsx("div",{className:"admin-item",style:{borderLeft:"4px solid #444",background:"#0a0a0c"},children:_.jsxs("div",{className:"item-info",style:{flex:1},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[_.jsx("span",{className:"item-label",style:{color:"#eee"},children:$.title||"Untitled Pin"}),_.jsxs("span",{style:{fontSize:"0.7rem",color:"#666"},children:["ID: ",$.id]})]}),_.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsx("span",{style:{fontSize:"0.65rem",color:"#555",textTransform:"uppercase"},children:$.type==="user_block"?"Target UID":"Owner"}),_.jsx("span",{style:{fontSize:"0.8rem",color:"#888"},children:$.type==="user_block"?$.targetUid:$.ownerEmail||"N/A"})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsx("span",{style:{fontSize:"0.65rem",color:"#555",textTransform:"uppercase"},children:"Action By"}),_.jsx("span",{style:{fontSize:"0.8rem",color:$.archivedByRole==="admin"?"var(--missme-pink)":"#888"},children:$.deletedBy==="unknown"?"UNKNOWN":$.archivedByRole==="admin"?"ADMIN":"USER"})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsx("span",{style:{fontSize:"0.65rem",color:"#555",textTransform:"uppercase"},children:"Reason"}),_.jsxs("span",{style:{fontSize:"0.8rem",color:"#ffb300",fontStyle:"italic"},children:['"',$.deletionReason,'"']})]}),$.details&&_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsx("span",{style:{fontSize:"0.65rem",color:"#555",textTransform:"uppercase"},children:"Details"}),_.jsx("span",{style:{fontSize:"0.8rem",color:"#888"},children:$.details})]})]})]})},$.id))]})]}),_.jsxs("section",{className:"admin-section diagnostics-section",style:{gridColumn:"1 / -1",background:"#111",border:"2px solid #333"},children:[_.jsx("h2",{className:"section-title",style:{color:"var(--missme-cyan)"},children:"?? SYSTEM DIAGNOSTICS"}),_.jsxs("div",{className:"diagnostic-controls",style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[_.jsx("input",{type:"text",placeholder:"PASTE PIN ID (e.g. 1771265236911)",className:"admin-search",style:{flex:1},value:ne,onChange:$=>ee($.target.value)}),_.jsx("button",{className:"seed-pins-btn",onClick:K,children:"INSPECT DOCUMENT DUMP"})]}),de&&_.jsxs("div",{className:"diagnostics-dump",style:{background:"#000",padding:"20px",borderRadius:"8px",fontSize:"0.9rem",color:"#ccc",maxHeight:"500px",overflowY:"auto"},children:[_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"white",borderBottom:"1px solid #333",paddingBottom:"5px"},children:"CURRENT SESSION"}),_.jsx("pre",{children:JSON.stringify(de.currentUser,null,2)})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"white",borderBottom:"1px solid #333",paddingBottom:"5px"},children:"PIN DOCUMENT"}),de.pin?_.jsx("pre",{children:JSON.stringify(de.pin,null,2)}):_.jsx("p",{style:{color:"red"},children:"PIN NOT FOUND IN FIRESTORE"})]}),_.jsxs("div",{children:[_.jsxs("h3",{style:{color:"white",borderBottom:"1px solid #333",paddingBottom:"5px"},children:["ASSOCIATED THREADS (",de.threads.length,")"]}),de.threads.map(($,ye)=>_.jsxs("div",{style:{marginBottom:"15px",border:"1px solid #222",padding:"10px"},children:[_.jsxs("strong",{children:["THREAD #",ye+1," ID: ",$.id]}),_.jsx("pre",{children:JSON.stringify($,null,2)})]},$.id)),de.threads.length===0&&_.jsx("p",{children:"No threads found for this Pin ID."})]})]})]})]}),R.isOpen&&_.jsx("div",{className:"modal-overlay",children:_.jsxs("div",{className:"modal-card admin-modal-card",children:[_.jsx("h2",{className:"modal-title",style:{color:R.title==="DONE"||R.title==="RESOLVED"?"var(--missme-cyan)":"var(--missme-pink)"},children:R.title}),_.jsx("p",{className:"modal-message",children:R.message}),R.showInput&&_.jsxs("div",{className:"admin-modal-input-wrap",children:[_.jsx("label",{className:"admin-modal-label",children:"MODERATION REASON"}),_.jsx("textarea",{className:"admin-textarea",placeholder:"Explain the violation for the user...",value:R.inputValue,onChange:$=>k({...R,inputValue:$.target.value})})]}),R.showDuration&&_.jsxs("div",{className:"admin-modal-input-wrap",children:[_.jsx("label",{className:"admin-modal-label",children:"DURATION (HOURS)"}),_.jsx("input",{type:"number",className:"admin-textarea",style:{minHeight:"unset"},value:R.durationValue,onChange:$=>k({...R,durationValue:$.target.value})}),_.jsxs("div",{style:{marginTop:"10px",display:"flex",gap:"10px"},children:[_.jsx("button",{className:"duration-preset-btn",onClick:()=>k({...R,durationValue:"24"}),children:"24H"}),_.jsx("button",{className:"duration-preset-btn",onClick:()=>k({...R,durationValue:"48"}),children:"48H"}),_.jsx("button",{className:"duration-preset-btn",onClick:()=>k({...R,durationValue:"72"}),children:"72H"}),_.jsx("button",{className:"duration-preset-btn",onClick:()=>k({...R,durationValue:"168"}),children:"1 WEEK"})]})]}),_.jsxs("div",{className:"modal-actions",children:[!R.isAlert&&_.jsx("button",{className:"modal-btn-cancel",onClick:()=>k($=>({...$,isOpen:!1})),children:"CANCEL"}),_.jsx("button",{className:"modal-btn-confirm",onClick:R.isAlert?()=>k($=>({...$,isOpen:!1})):()=>R.onConfirm(R.inputValue,R.durationValue),children:R.isAlert?"OK":"CONFIRM"})]})]})})]})};function QO(i,e){const t=P.useRef(e);P.useEffect(function(){e!==t.current&&i.attributionControl!=null&&(t.current!=null&&i.attributionControl.removeAttribution(t.current),e!=null&&i.attributionControl.addAttribution(e)),t.current=e},[i,e])}const oY=1;function lY(i){return Object.freeze({__version:oY,map:i})}function cY(i,e){return Object.freeze({...i,...e})}const YE=P.createContext(null);function GE(){const i=P.use(YE);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function uY(i){function e(t,n){const{instance:r,context:a}=i(t).current;P.useImperativeHandle(n,()=>r);const{children:c}=t;return c==null?null:te.createElement(YE,{value:a},c)}return P.forwardRef(e)}function dY(i){function e(t,n){const[r,a]=P.useState(!1),{instance:c}=i(t,a).current;P.useImperativeHandle(n,()=>c),P.useEffect(function(){r&&c.update()},[c,r,t.children]);const d=c._contentNode;return d?Yd.createPortal(t.children,d):null}return P.forwardRef(e)}function XO(i){function e(t,n){const{instance:r}=i(t).current;return P.useImperativeHandle(n,()=>r),null}return P.forwardRef(e)}function hY(i){return function(t){const n=GE(),r=i(t,n),{instance:a}=r.current,c=P.useRef(t.position),{position:d}=t;return P.useEffect(function(){return a.addTo(n.map),function(){a.remove()}},[n.map,a]),P.useEffect(function(){d!=null&&d!==c.current&&(a.setPosition(d),c.current=d)},[a,d]),r}}function JO(i,e){const t=P.useRef(void 0);P.useEffect(function(){return e!=null&&i.instance.on(e),t.current=e,function(){t.current!=null&&i.instance.off(t.current),t.current=null}},[i,e])}function WE(i,e){const t=i.pane??e.pane;return t?{...i,pane:t}:i}function fY(i,e){return function(n,r){const a=GE(),c=i(WE(n,a),a);return QO(a.map,n.attribution),JO(c.current,n.eventHandlers),e(c.current,a,n,r),c}}var Gf={exports:{}};var pY=Gf.exports,v1;function mY(){return v1||(v1=1,(function(i,e){(function(t,n){n(e)})(pY,(function(t){var n="1.9.4";function r(l){var h,y,T,A;for(y=1,T=arguments.length;y<T;y++){A=arguments[y];for(h in A)l[h]=A[h]}return l}var a=Object.create||(function(){function l(){}return function(h){return l.prototype=h,new l}})();function c(l,h){var y=Array.prototype.slice;if(l.bind)return l.bind.apply(l,y.call(arguments,1));var T=y.call(arguments,2);return function(){return l.apply(h,T.length?T.concat(y.call(arguments)):arguments)}}var d=0;function p(l){return"_leaflet_id"in l||(l._leaflet_id=++d),l._leaflet_id}function m(l,h,y){var T,A,M,Q;return Q=function(){T=!1,A&&(M.apply(y,A),A=!1)},M=function(){T?A=arguments:(l.apply(y,arguments),setTimeout(Q,h),T=!0)},M}function w(l,h,y){var T=h[1],A=h[0],M=T-A;return l===T&&y?l:((l-A)%M+M)%M+A}function b(){return!1}function S(l,h){if(h===!1)return l;var y=Math.pow(10,h===void 0?6:h);return Math.round(l*y)/y}function C(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function N(l){return C(l).split(/\s+/)}function O(l,h){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var y in h)l.options[y]=h[y];return l.options}function R(l,h,y){var T=[];for(var A in l)T.push(encodeURIComponent(y?A.toUpperCase():A)+"="+encodeURIComponent(l[A]));return(!h||h.indexOf("?")===-1?"?":"&")+T.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function G(l,h){return l.replace(k,function(y,T){var A=h[T];if(A===void 0)throw new Error("No value provided for variable "+y);return typeof A=="function"&&(A=A(h)),A})}var Z=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function ne(l,h){for(var y=0;y<l.length;y++)if(l[y]===h)return y;return-1}var ee="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function de(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var B=0;function V(l){var h=+new Date,y=Math.max(0,16-(h-B));return B=h+y,window.setTimeout(l,y)}var j=window.requestAnimationFrame||de("RequestAnimationFrame")||V,F=window.cancelAnimationFrame||de("CancelAnimationFrame")||de("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function q(l,h,y){if(y&&j===V)l.call(h);else return j.call(window,c(l,h))}function z(l){l&&F.call(window,l)}var H={__proto__:null,extend:r,create:a,bind:c,get lastId(){return d},stamp:p,throttle:m,wrapNum:w,falseFn:b,formatNum:S,trim:C,splitWords:N,setOptions:O,getParamString:R,template:G,isArray:Z,indexOf:ne,emptyImageUrl:ee,requestFn:j,cancelFn:F,requestAnimFrame:q,cancelAnimFrame:z};function Re(){}Re.extend=function(l){var h=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=h.__super__=this.prototype,T=a(y);T.constructor=h,h.prototype=T;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(h[A]=this[A]);return l.statics&&r(h,l.statics),l.includes&&(Ve(l.includes),r.apply(null,[T].concat(l.includes))),r(T,l),delete T.statics,delete T.includes,T.options&&(T.options=y.options?a(y.options):{},r(T.options,l.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,Q=T._initHooks.length;M<Q;M++)T._initHooks[M].call(this)}},h},Re.include=function(l){var h=this.prototype.options;return r(this.prototype,l),l.options&&(this.prototype.options=h,this.mergeOptions(l.options)),this},Re.mergeOptions=function(l){return r(this.prototype.options,l),this},Re.addInitHook=function(l){var h=Array.prototype.slice.call(arguments,1),y=typeof l=="function"?l:function(){this[l].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function Ve(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=Z(l)?l:[l];for(var h=0;h<l.length;h++)l[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(l,h,y){if(typeof l=="object")for(var T in l)this._on(T,l[T],h);else{l=N(l);for(var A=0,M=l.length;A<M;A++)this._on(l[A],h,y)}return this},off:function(l,h,y){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var T in l)this._off(T,l[T],h);else{l=N(l);for(var A=arguments.length===1,M=0,Q=l.length;M<Q;M++)A?this._off(l[M]):this._off(l[M],h,y)}return this},_on:function(l,h,y,T){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(l,h,y)===!1){y===this&&(y=void 0);var A={fn:h,ctx:y};T&&(A.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(A)}},_off:function(l,h,y){var T,A,M;if(this._events&&(T=this._events[l],!!T)){if(arguments.length===1){if(this._firingCount)for(A=0,M=T.length;A<M;A++)T[A].fn=b;delete this._events[l];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Q=this._listens(l,h,y);if(Q!==!1){var re=T[Q];this._firingCount&&(re.fn=b,this._events[l]=T=T.slice()),T.splice(Q,1)}}},fire:function(l,h,y){if(!this.listens(l,y))return this;var T=r({},h,{type:l,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var A=this._events[l];if(A){this._firingCount=this._firingCount+1||1;for(var M=0,Q=A.length;M<Q;M++){var re=A[M],pe=re.fn;re.once&&this.off(l,pe,re.ctx),pe.call(re.ctx||this,T)}this._firingCount--}}return y&&this._propagateEvent(T),this},listens:function(l,h,y,T){typeof l!="string"&&console.warn('"string" type argument expected');var A=h;typeof h!="function"&&(T=!!h,A=void 0,y=void 0);var M=this._events&&this._events[l];if(M&&M.length&&this._listens(l,A,y)!==!1)return!0;if(T){for(var Q in this._eventParents)if(this._eventParents[Q].listens(l,h,y,T))return!0}return!1},_listens:function(l,h,y){if(!this._events)return!1;var T=this._events[l]||[];if(!h)return!!T.length;y===this&&(y=void 0);for(var A=0,M=T.length;A<M;A++)if(T[A].fn===h&&T[A].ctx===y)return A;return!1},once:function(l,h,y){if(typeof l=="object")for(var T in l)this._on(T,l[T],h,!0);else{l=N(l);for(var A=0,M=l.length;A<M;A++)this._on(l[A],h,y,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[p(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[p(l)],this},_propagateEvent:function(l){for(var h in this._eventParents)this._eventParents[h].fire(l.type,r({layer:l.target,propagatedFrom:l.target},l),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var le=Re.extend(W);function se(l,h,y){this.x=y?Math.round(l):l,this.y=y?Math.round(h):h}var je=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};se.prototype={clone:function(){return new se(this.x,this.y)},add:function(l){return this.clone()._add(Ce(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(Ce(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new se(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new se(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=je(this.x),this.y=je(this.y),this},distanceTo:function(l){l=Ce(l);var h=l.x-this.x,y=l.y-this.y;return Math.sqrt(h*h+y*y)},equals:function(l){return l=Ce(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=Ce(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function Ce(l,h,y){return l instanceof se?l:Z(l)?new se(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new se(l.x,l.y):new se(l,h,y)}function K(l,h){if(l)for(var y=h?[l,h]:l,T=0,A=y.length;T<A;T++)this.extend(y[T])}K.prototype={extend:function(l){var h,y;if(!l)return this;if(l instanceof se||typeof l[0]=="number"||"x"in l)h=y=Ce(l);else if(l=fe(l),h=l.min,y=l.max,!h||!y)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=y.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(l){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var h,y;return typeof l[0]=="number"||l instanceof se?l=Ce(l):l=fe(l),l instanceof K?(h=l.min,y=l.max):h=y=l,h.x>=this.min.x&&y.x<=this.max.x&&h.y>=this.min.y&&y.y<=this.max.y},intersects:function(l){l=fe(l);var h=this.min,y=this.max,T=l.min,A=l.max,M=A.x>=h.x&&T.x<=y.x,Q=A.y>=h.y&&T.y<=y.y;return M&&Q},overlaps:function(l){l=fe(l);var h=this.min,y=this.max,T=l.min,A=l.max,M=A.x>h.x&&T.x<y.x,Q=A.y>h.y&&T.y<y.y;return M&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var h=this.min,y=this.max,T=Math.abs(h.x-y.x)*l,A=Math.abs(h.y-y.y)*l;return fe(Ce(h.x-T,h.y-A),Ce(y.x+T,y.y+A))},equals:function(l){return l?(l=fe(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function fe(l,h){return!l||l instanceof K?l:new K(l,h)}function we(l,h){if(l)for(var y=h?[l,h]:l,T=0,A=y.length;T<A;T++)this.extend(y[T])}we.prototype={extend:function(l){var h=this._southWest,y=this._northEast,T,A;if(l instanceof ye)T=l,A=l;else if(l instanceof we){if(T=l._southWest,A=l._northEast,!T||!A)return this}else return l?this.extend(be(l)||$(l)):this;return!h&&!y?(this._southWest=new ye(T.lat,T.lng),this._northEast=new ye(A.lat,A.lng)):(h.lat=Math.min(T.lat,h.lat),h.lng=Math.min(T.lng,h.lng),y.lat=Math.max(A.lat,y.lat),y.lng=Math.max(A.lng,y.lng)),this},pad:function(l){var h=this._southWest,y=this._northEast,T=Math.abs(h.lat-y.lat)*l,A=Math.abs(h.lng-y.lng)*l;return new we(new ye(h.lat-T,h.lng-A),new ye(y.lat+T,y.lng+A))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof ye||"lat"in l?l=be(l):l=$(l);var h=this._southWest,y=this._northEast,T,A;return l instanceof we?(T=l.getSouthWest(),A=l.getNorthEast()):T=A=l,T.lat>=h.lat&&A.lat<=y.lat&&T.lng>=h.lng&&A.lng<=y.lng},intersects:function(l){l=$(l);var h=this._southWest,y=this._northEast,T=l.getSouthWest(),A=l.getNorthEast(),M=A.lat>=h.lat&&T.lat<=y.lat,Q=A.lng>=h.lng&&T.lng<=y.lng;return M&&Q},overlaps:function(l){l=$(l);var h=this._southWest,y=this._northEast,T=l.getSouthWest(),A=l.getNorthEast(),M=A.lat>h.lat&&T.lat<y.lat,Q=A.lng>h.lng&&T.lng<y.lng;return M&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,h){return l?(l=$(l),this._southWest.equals(l.getSouthWest(),h)&&this._northEast.equals(l.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $(l,h){return l instanceof we?l:new we(l,h)}function ye(l,h,y){if(isNaN(l)||isNaN(h))throw new Error("Invalid LatLng object: ("+l+", "+h+")");this.lat=+l,this.lng=+h,y!==void 0&&(this.alt=+y)}ye.prototype={equals:function(l,h){if(!l)return!1;l=be(l);var y=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return y<=(h===void 0?1e-9:h)},toString:function(l){return"LatLng("+S(this.lat,l)+", "+S(this.lng,l)+")"},distanceTo:function(l){return it.distance(this,be(l))},wrap:function(){return it.wrapLatLng(this)},toBounds:function(l){var h=180*l/40075017,y=h/Math.cos(Math.PI/180*this.lat);return $([this.lat-h,this.lng-y],[this.lat+h,this.lng+y])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function be(l,h,y){return l instanceof ye?l:Z(l)&&typeof l[0]!="object"?l.length===3?new ye(l[0],l[1],l[2]):l.length===2?new ye(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new ye(l.lat,"lng"in l?l.lng:l.lon,l.alt):h===void 0?null:new ye(l,h,y)}var Fe={latLngToPoint:function(l,h){var y=this.projection.project(l),T=this.scale(h);return this.transformation._transform(y,T)},pointToLatLng:function(l,h){var y=this.scale(h),T=this.transformation.untransform(l,y);return this.projection.unproject(T)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var h=this.projection.bounds,y=this.scale(l),T=this.transformation.transform(h.min,y),A=this.transformation.transform(h.max,y);return new K(T,A)},infinite:!1,wrapLatLng:function(l){var h=this.wrapLng?w(l.lng,this.wrapLng,!0):l.lng,y=this.wrapLat?w(l.lat,this.wrapLat,!0):l.lat,T=l.alt;return new ye(y,h,T)},wrapLatLngBounds:function(l){var h=l.getCenter(),y=this.wrapLatLng(h),T=h.lat-y.lat,A=h.lng-y.lng;if(T===0&&A===0)return l;var M=l.getSouthWest(),Q=l.getNorthEast(),re=new ye(M.lat-T,M.lng-A),pe=new ye(Q.lat-T,Q.lng-A);return new we(re,pe)}},it=r({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(l,h){var y=Math.PI/180,T=l.lat*y,A=h.lat*y,M=Math.sin((h.lat-l.lat)*y/2),Q=Math.sin((h.lng-l.lng)*y/2),re=M*M+Math.cos(T)*Math.cos(A)*Q*Q,pe=2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re));return this.R*pe}}),et=6378137,ft={R:et,MAX_LATITUDE:85.0511287798,project:function(l){var h=Math.PI/180,y=this.MAX_LATITUDE,T=Math.max(Math.min(y,l.lat),-y),A=Math.sin(T*h);return new se(this.R*l.lng*h,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(l){var h=180/Math.PI;return new ye((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*h,l.x*h/this.R)},bounds:(function(){var l=et*Math.PI;return new K([-l,-l],[l,l])})()};function qt(l,h,y,T){if(Z(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=h,this._c=y,this._d=T}qt.prototype={transform:function(l,h){return this._transform(l.clone(),h)},_transform:function(l,h){return h=h||1,l.x=h*(this._a*l.x+this._b),l.y=h*(this._c*l.y+this._d),l},untransform:function(l,h){return h=h||1,new se((l.x/h-this._b)/this._a,(l.y/h-this._d)/this._c)}};function Wt(l,h,y,T){return new qt(l,h,y,T)}var Mn=r({},it,{code:"EPSG:3857",projection:ft,transformation:(function(){var l=.5/(Math.PI*ft.R);return Wt(l,.5,-l,.5)})()}),Wn=r({},Mn,{code:"EPSG:900913"});function dr(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Oi(l,h){var y="",T,A,M,Q,re,pe;for(T=0,M=l.length;T<M;T++){for(re=l[T],A=0,Q=re.length;A<Q;A++)pe=re[A],y+=(A?"L":"M")+pe.x+" "+pe.y;y+=h?Ge.svg?"z":"x":""}return y||"M0 0"}var Mi=document.documentElement.style,oi="ActiveXObject"in window,rn=oi&&!document.addEventListener,Kt="msLaunchUri"in navigator&&!("documentMode"in document),kn=yn("webkit"),hr=yn("android"),ki=yn("android 2")||yn("android 3"),he=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Te=hr&&yn("Google")&&he<537&&!("AudioNode"in window),Me=!!window.opera,Pe=!Kt&&yn("chrome"),ke=yn("gecko")&&!kn&&!Me&&!oi,Ze=!Pe&&yn("safari"),ct=yn("phantom"),xt="OTransition"in Mi,Ut=navigator.platform.indexOf("Win")===0,Rt=oi&&"transition"in Mi,Pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ki,Cn="MozPerspective"in Mi,wt=!window.L_DISABLE_3D&&(Rt||Pt||Cn)&&!xt&&!ct,Ln=typeof orientation<"u"||yn("mobile"),sn=Ln&&kn,Cr=Ln&&Pt,ei=!window.PointerEvent&&window.MSPointerEvent,ti=!!(window.PointerEvent||ei),Bt="ontouchstart"in window||!!window.TouchEvent,li=!window.L_NO_TOUCH&&(Bt||ti),Li=Ln&&Me,gn=Ln&&ke,Ar=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,gs=(function(){var l=!1;try{var h=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",b,h),window.removeEventListener("testPassiveEventSupport",b,h)}catch{}return l})(),Yi=(function(){return!!document.createElement("canvas").getContext})(),fr=!!(document.createElementNS&&dr("svg").createSVGRect),De=!!fr&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),_n=!fr&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var h=l.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}})(),En=navigator.platform.indexOf("Mac")===0,Gi=navigator.platform.indexOf("Linux")===0;function yn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Ge={ie:oi,ielt9:rn,edge:Kt,webkit:kn,android:hr,android23:ki,androidStock:Te,opera:Me,chrome:Pe,gecko:ke,safari:Ze,phantom:ct,opera12:xt,win:Ut,ie3d:Rt,webkit3d:Pt,gecko3d:Cn,any3d:wt,mobile:Ln,mobileWebkit:sn,mobileWebkit3d:Cr,msPointer:ei,pointer:ti,touch:li,touchNative:Bt,mobileOpera:Li,mobileGecko:gn,retina:Ar,passiveEvents:gs,canvas:Yi,svg:fr,vml:_n,inlineSvg:De,mac:En,linux:Gi},Ka=Ge.msPointer?"MSPointerDown":"pointerdown",Wi=Ge.msPointer?"MSPointerMove":"pointermove",Ki=Ge.msPointer?"MSPointerUp":"pointerup",In=Ge.msPointer?"MSPointerCancel":"pointercancel",jn={touchstart:Ka,touchmove:Wi,touchend:Ki,touchcancel:In},pr={touchstart:ot,touchmove:Ae,touchend:Ae,touchcancel:Ae},Zi={},Wo=!1;function Za(l,h,y){return h==="touchstart"&&Be(),pr[h]?(y=pr[h].bind(this,y),l.addEventListener(jn[h],y,!1),y):(console.warn("wrong event specified:",h),b)}function Ko(l,h,y){if(!jn[h]){console.warn("wrong event specified:",h);return}l.removeEventListener(jn[h],y,!1)}function Ir(l){Zi[l.pointerId]=l}function aa(l){Zi[l.pointerId]&&(Zi[l.pointerId]=l)}function Se(l){delete Zi[l.pointerId]}function Be(){Wo||(document.addEventListener(Ka,Ir,!0),document.addEventListener(Wi,aa,!0),document.addEventListener(Ki,Se,!0),document.addEventListener(In,Se,!0),Wo=!0)}function Ae(l,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var y in Zi)h.touches.push(Zi[y]);h.changedTouches=[h],l(h)}}function ot(l,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Rn(h),Ae(l,h)}function Xe(l){var h={},y,T;for(T in l)y=l[T],h[T]=y&&y.bind?y.bind(l):y;return l=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Fn=200;function Jt(l,h){l.addEventListener("dblclick",h);var y=0,T;function A(M){if(M.detail!==1){T=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var Q=da(M);if(!(Q.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!Q.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var re=Date.now();re-y<=Fn?(T++,T===2&&h(Xe(M))):T=1,y=re}}}return l.addEventListener("click",A),{dblclick:h,simDblclick:A}}function ji(l,h){l.removeEventListener("dblclick",h.dblclick),l.removeEventListener("click",h.simDblclick)}var Nr=Qa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),js=Qa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Zo=js==="webkitTransition"||js==="OTransition"?js+"End":"transitionend";function $o(l){return typeof l=="string"?document.getElementById(l):l}function oa(l,h){var y=l.style[h]||l.currentStyle&&l.currentStyle[h];if((!y||y==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(l,null);y=T?T[h]:null}return y==="auto"?null:y}function Et(l,h,y){var T=document.createElement(l);return T.className=h||"",y&&y.appendChild(T),T}function Ct(l){var h=l.parentNode;h&&h.removeChild(l)}function Nn(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Dn(l){var h=l.parentNode;h&&h.lastChild!==l&&h.appendChild(l)}function mr(l){var h=l.parentNode;h&&h.firstChild!==l&&h.insertBefore(l,h.firstChild)}function $a(l,h){if(l.classList!==void 0)return l.classList.contains(h);var y=_s(l);return y.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(y)}function Ye(l,h){if(l.classList!==void 0)for(var y=N(h),T=0,A=y.length;T<A;T++)l.classList.add(y[T]);else if(!$a(l,h)){var M=_s(l);Dr(l,(M?M+" ":"")+h)}}function ln(l,h){l.classList!==void 0?l.classList.remove(h):Dr(l,C((" "+_s(l)+" ").replace(" "+h+" "," ")))}function Dr(l,h){l.className.baseVal===void 0?l.className=h:l.className.baseVal=h}function _s(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Tn(l,h){"opacity"in l.style?l.style.opacity=h:"filter"in l.style&&Qo(l,h)}function Qo(l,h){var y=!1,T="DXImageTransform.Microsoft.Alpha";try{y=l.filters.item(T)}catch{if(h===1)return}h=Math.round(h*100),y?(y.Enabled=h!==100,y.Opacity=h):l.style.filter+=" progid:"+T+"(opacity="+h+")"}function Qa(l){for(var h=document.documentElement.style,y=0;y<l.length;y++)if(l[y]in h)return l[y];return!1}function Zr(l,h,y){var T=h||new se(0,0);l.style[Nr]=(Ge.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(y?" scale("+y+")":"")}function cn(l,h){l._leaflet_pos=h,Ge.any3d?Zr(l,h):(l.style.left=h.x+"px",l.style.top=h.y+"px")}function ys(l){return l._leaflet_pos||new se(0,0)}var Rr,ci,Xo;if("onselectstart"in document)Rr=function(){lt(window,"selectstart",Rn)},ci=function(){Yt(window,"selectstart",Rn)};else{var Vs=Qa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rr=function(){if(Vs){var l=document.documentElement.style;Xo=l[Vs],l[Vs]="none"}},ci=function(){Vs&&(document.documentElement.style[Vs]=Xo,Xo=void 0)}}function Xa(){lt(window,"dragstart",Rn)}function la(){Yt(window,"dragstart",Rn)}var Ja,vs;function ca(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&($i(),Ja=l,vs=l.style.outlineStyle,l.style.outlineStyle="none",lt(window,"keydown",$i))}function $i(){Ja&&(Ja.style.outlineStyle=vs,Ja=void 0,vs=void 0,Yt(window,"keydown",$i))}function Jo(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Qi(l){var h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}var ua={__proto__:null,TRANSFORM:Nr,TRANSITION:js,TRANSITION_END:Zo,get:$o,getStyle:oa,create:Et,remove:Ct,empty:Nn,toFront:Dn,toBack:mr,hasClass:$a,addClass:Ye,removeClass:ln,setClass:Dr,getClass:_s,setOpacity:Tn,testProp:Qa,setTransform:Zr,setPosition:cn,getPosition:ys,get disableTextSelection(){return Rr},get enableTextSelection(){return ci},disableImageDrag:Xa,enableImageDrag:la,preventOutline:ca,restoreOutline:$i,getSizedParentNode:Jo,getScale:Qi};function lt(l,h,y,T){if(h&&typeof h=="object")for(var A in h)Xi(l,A,h[A],y);else{h=N(h);for(var M=0,Q=h.length;M<Q;M++)Xi(l,h[M],y,T)}return this}var Si="_leaflet_events";function Yt(l,h,y,T){if(arguments.length===1)Us(l),delete l[Si];else if(h&&typeof h=="object")for(var A in h)Bs(l,A,h[A],y);else if(h=N(h),arguments.length===2)Us(l,function(re){return ne(h,re)!==-1});else for(var M=0,Q=h.length;M<Q;M++)Bs(l,h[M],y,T);return this}function Us(l,h){for(var y in l[Si]){var T=y.split(/\d/)[0];(!h||h(T))&&Bs(l,T,null,null,y)}}var gr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xi(l,h,y,T){var A=h+p(y)+(T?"_"+p(T):"");if(l[Si]&&l[Si][A])return this;var M=function(re){return y.call(T||l,re||window.event)},Q=M;!Ge.touchNative&&Ge.pointer&&h.indexOf("touch")===0?M=Za(l,h,M):Ge.touch&&h==="dblclick"?M=Jt(l,M):"addEventListener"in l?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?l.addEventListener(gr[h]||h,M,Ge.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(M=function(re){re=re||window.event,Xr(l,re)&&Q(re)},l.addEventListener(gr[h],M,!1)):l.addEventListener(h,Q,!1):l.attachEvent("on"+h,M),l[Si]=l[Si]||{},l[Si][A]=M}function Bs(l,h,y,T,A){A=A||h+p(y)+(T?"_"+p(T):"");var M=l[Si]&&l[Si][A];if(!M)return this;!Ge.touchNative&&Ge.pointer&&h.indexOf("touch")===0?Ko(l,h,M):Ge.touch&&h==="dblclick"?ji(l,M):"removeEventListener"in l?l.removeEventListener(gr[h]||h,M,!1):l.detachEvent("on"+h,M),l[Si][A]=null}function Ot(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function Pr(l){return Xi(l,"wheel",Ot),this}function zs(l){return lt(l,"mousedown touchstart dblclick contextmenu",Ot),l._leaflet_disable_click=!0,this}function Rn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function $r(l){return Rn(l),Ot(l),this}function da(l){if(l.composedPath)return l.composedPath();for(var h=[],y=l.target;y;)h.push(y),y=y.parentNode;return h}function ws(l,h){if(!h)return new se(l.clientX,l.clientY);var y=Qi(h),T=y.boundingClientRect;return new se((l.clientX-T.left)/y.x-h.clientLeft,(l.clientY-T.top)/y.y-h.clientTop)}var Qr=Ge.linux&&Ge.chrome?window.devicePixelRatio:Ge.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ui(l){return Ge.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Qr:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Xr(l,h){var y=h.relatedTarget;if(!y)return!0;try{for(;y&&y!==l;)y=y.parentNode}catch{return!1}return y!==l}var bs={__proto__:null,on:lt,off:Yt,stopPropagation:Ot,disableScrollPropagation:Pr,disableClickPropagation:zs,preventDefault:Rn,stop:$r,getPropagationPath:da,getMousePosition:ws,getWheelDelta:ui,isExternalTarget:Xr,addListener:lt,removeListener:Yt},Fs=le.extend({run:function(l,h,y,T){this.stop(),this._el=l,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=ys(l),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(l){var h=+new Date-this._startTime,y=this._duration*1e3;h<y?this._runFrame(this._easeOut(h/y),l):(this._runFrame(1),this._complete())},_runFrame:function(l,h){var y=this._startPos.add(this._offset.multiplyBy(l));h&&y._round(),cn(this._el,y),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),bt=le.extend({options:{crs:Mn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,h){h=O(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(be(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=js&&Ge.any3d&&!Ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,Zo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,h,y){if(h=h===void 0?this._zoom:this._limitZoom(h),l=this._limitCenter(be(l),h,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=r({animate:y.animate},y.zoom),y.pan=r({animate:y.animate,duration:y.duration},y.pan));var T=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,h,y.zoom):this._tryAnimatedPan(l,y.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(l,h,y.pan&&y.pan.noMoveStart),this},setZoom:function(l,h){return this._loaded?this.setView(this.getCenter(),l,{zoom:h}):(this._zoom=l,this)},zoomIn:function(l,h){return l=l||(Ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,h)},zoomOut:function(l,h){return l=l||(Ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,h)},setZoomAround:function(l,h,y){var T=this.getZoomScale(h),A=this.getSize().divideBy(2),M=l instanceof se?l:this.latLngToContainerPoint(l),Q=M.subtract(A).multiplyBy(1-1/T),re=this.containerPointToLatLng(A.add(Q));return this.setView(re,h,{zoom:y})},_getBoundsCenterZoom:function(l,h){h=h||{},l=l.getBounds?l.getBounds():$(l);var y=Ce(h.paddingTopLeft||h.padding||[0,0]),T=Ce(h.paddingBottomRight||h.padding||[0,0]),A=this.getBoundsZoom(l,!1,y.add(T));if(A=typeof h.maxZoom=="number"?Math.min(h.maxZoom,A):A,A===1/0)return{center:l.getCenter(),zoom:A};var M=T.subtract(y).divideBy(2),Q=this.project(l.getSouthWest(),A),re=this.project(l.getNorthEast(),A),pe=this.unproject(Q.add(re).divideBy(2).add(M),A);return{center:pe,zoom:A}},fitBounds:function(l,h){if(l=$(l),!l.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(l,h);return this.setView(y.center,y.zoom,h)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,h){return this.setView(l,this._zoom,{pan:h})},panBy:function(l,h){if(l=Ce(l).round(),h=h||{},!l.x&&!l.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ye(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,y,h.duration||.25,h.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,h,y){if(y=y||{},y.animate===!1||!Ge.any3d)return this.setView(l,h,y);this._stop();var T=this.project(this.getCenter()),A=this.project(l),M=this.getSize(),Q=this._zoom;l=be(l),h=h===void 0?Q:h;var re=Math.max(M.x,M.y),pe=re*this.getZoomScale(Q,h),Ie=A.distanceTo(T)||1,ze=1.42,tt=ze*ze;function yt(Hn){var Ws=Hn?-1:1,ao=Hn?pe:re,Fh=pe*pe-re*re+Ws*tt*tt*Ie*Ie,Mc=2*ao*tt*Ie,kc=Fh/Mc,ba=Math.sqrt(kc*kc+1)-kc,Ks=ba<1e-9?-18:Math.log(ba);return Ks}function _i(Hn){return(Math.exp(Hn)-Math.exp(-Hn))/2}function Kn(Hn){return(Math.exp(Hn)+Math.exp(-Hn))/2}function vr(Hn){return _i(Hn)/Kn(Hn)}var Zt=yt(0);function $t(Hn){return re*(Kn(Zt)/Kn(Zt+ze*Hn))}function At(Hn){return re*(Kn(Zt)*vr(Zt+ze*Hn)-_i(Zt))/tt}function va(Hn){return 1-Math.pow(1-Hn,1.5)}var jr=Date.now(),Zu=(yt(1)-Zt)/ze,wa=y.duration?1e3*y.duration:1e3*Zu*.8;function zh(){var Hn=(Date.now()-jr)/wa,Ws=va(Hn)*Zu;Hn<=1?(this._flyToFrame=q(zh,this),this._move(this.unproject(T.add(A.subtract(T).multiplyBy(At(Ws)/Ie)),Q),this.getScaleZoom(re/$t(Ws),Q),{flyTo:!0})):this._move(l,h)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),zh.call(this),this},flyToBounds:function(l,h){var y=this._getBoundsCenterZoom(l,h);return this.flyTo(y.center,y.zoom,h)},setMaxBounds:function(l){return l=$(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var h=this.options.minZoom;return this.options.minZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var h=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&h!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,h){this._enforcingBounds=!0;var y=this.getCenter(),T=this._limitCenter(y,this._zoom,$(l));return y.equals(T)||this.panTo(T,h),this._enforcingBounds=!1,this},panInside:function(l,h){h=h||{};var y=Ce(h.paddingTopLeft||h.padding||[0,0]),T=Ce(h.paddingBottomRight||h.padding||[0,0]),A=this.project(this.getCenter()),M=this.project(l),Q=this.getPixelBounds(),re=fe([Q.min.add(y),Q.max.subtract(T)]),pe=re.getSize();if(!re.contains(M)){this._enforcingBounds=!0;var Ie=M.subtract(re.getCenter()),ze=re.extend(M).getSize().subtract(pe);A.x+=Ie.x<0?-ze.x:ze.x,A.y+=Ie.y<0?-ze.y:ze.y,this.panTo(this.unproject(A),h),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=r({animate:!1,pan:!0},l===!0?{animate:!0}:l);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),T=h.divideBy(2).round(),A=y.divideBy(2).round(),M=T.subtract(A);return!M.x&&!M.y?this:(l.animate&&l.pan?this.panBy(M):(l.pan&&this._rawPanBy(M),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=r({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=c(this._handleGeolocationResponse,this),y=c(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,y,l):navigator.geolocation.getCurrentPosition(h,y,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var h=l.code,y=l.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var h=l.coords.latitude,y=l.coords.longitude,T=new ye(h,y),A=T.toBounds(l.coords.accuracy*2),M=this._locateOptions;if(M.setView){var Q=this.getBoundsZoom(A);this.setView(T,M.maxZoom?Math.min(Q,M.maxZoom):Q)}var re={latlng:T,bounds:A,timestamp:l.timestamp};for(var pe in l.coords)typeof l.coords[pe]=="number"&&(re[pe]=l.coords[pe]);this.fire("locationfound",re)}},addHandler:function(l,h){if(!h)return this;var y=this[l]=new h(this);return this._handlers.push(y),this.options[l]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ct(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Ct(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,h){var y="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),T=Et("div",y,h||this._mapPane);return l&&(this._panes[l]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),h=this.unproject(l.getBottomLeft()),y=this.unproject(l.getTopRight());return new we(h,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,h,y){l=$(l),y=Ce(y||[0,0]);var T=this.getZoom()||0,A=this.getMinZoom(),M=this.getMaxZoom(),Q=l.getNorthWest(),re=l.getSouthEast(),pe=this.getSize().subtract(y),Ie=fe(this.project(re,T),this.project(Q,T)).getSize(),ze=Ge.any3d?this.options.zoomSnap:1,tt=pe.x/Ie.x,yt=pe.y/Ie.y,_i=h?Math.max(tt,yt):Math.min(tt,yt);return T=this.getScaleZoom(_i,T),ze&&(T=Math.round(T/(ze/100))*(ze/100),T=h?Math.ceil(T/ze)*ze:Math.floor(T/ze)*ze),Math.max(A,Math.min(M,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new se(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,h){var y=this._getTopLeftPoint(l,h);return new K(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,h){var y=this.options.crs;return h=h===void 0?this._zoom:h,y.scale(l)/y.scale(h)},getScaleZoom:function(l,h){var y=this.options.crs;h=h===void 0?this._zoom:h;var T=y.zoom(l*y.scale(h));return isNaN(T)?1/0:T},project:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(be(l),h)},unproject:function(l,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(Ce(l),h)},layerPointToLatLng:function(l){var h=Ce(l).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(l){var h=this.project(be(l))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(be(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds($(l))},distance:function(l,h){return this.options.crs.distance(be(l),be(h))},containerPointToLayerPoint:function(l){return Ce(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return Ce(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var h=this.containerPointToLayerPoint(Ce(l));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(l)))},mouseEventToContainerPoint:function(l){return ws(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var h=this._container=$o(l);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(h,"scroll",this._onScroll,this),this._containerId=p(h)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ge.any3d,Ye(l,"leaflet-container"+(Ge.touch?" leaflet-touch":"")+(Ge.retina?" leaflet-retina":"")+(Ge.ielt9?" leaflet-oldie":"")+(Ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=oa(l,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),cn(this._mapPane,new se(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ye(l.markerPane,"leaflet-zoom-hide"),Ye(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,h,y){cn(this._mapPane,new se(0,0));var T=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var A=this._zoom!==h;this._moveStart(A,y)._move(l,h)._moveEnd(A),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(l,h){return l&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(l,h,y,T){h===void 0&&(h=this._zoom);var A=this._zoom!==h;return this._zoom=h,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),T?y&&y.pinch&&this.fire("zoom",y):((A||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){cn(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[p(this._container)]=this;var h=l?Yt:lt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ge.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,h){for(var y=[],T,A=h==="mouseout"||h==="mouseover",M=l.target||l.srcElement,Q=!1;M;){if(T=this._targets[p(M)],T&&(h==="click"||h==="preclick")&&this._draggableMoved(T)){Q=!0;break}if(T&&T.listens(h,!0)&&(A&&!Xr(M,l)||(y.push(T),A))||M===this._container)break;M=M.parentNode}return!y.length&&!Q&&!A&&this.listens(h,!0)&&(y=[this]),y},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var h=l.target||l.srcElement;if(!(!this._loaded||h._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(h))){var y=l.type;y==="mousedown"&&ca(h),this._fireDOMEvent(l,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,h,y){if(l.type==="click"){var T=r({},l);T.type="preclick",this._fireDOMEvent(T,T.type,y)}var A=this._findEventTargets(l,h);if(y){for(var M=[],Q=0;Q<y.length;Q++)y[Q].listens(h,!0)&&M.push(y[Q]);A=M.concat(A)}if(A.length){h==="contextmenu"&&Rn(l);var re=A[0],pe={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ie=re.getLatLng&&(!re._radius||re._radius<=10);pe.containerPoint=Ie?this.latLngToContainerPoint(re.getLatLng()):this.mouseEventToContainerPoint(l),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Ie?re.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for(Q=0;Q<A.length;Q++)if(A[Q].fire(h,pe,!0),pe.originalEvent._stopped||A[Q].options.bubblingMouseEvents===!1&&ne(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,h=this._handlers.length;l<h;l++)this._handlers[l].disable()},whenReady:function(l,h){return this._loaded?l.call(h||this,{target:this}):this.on("load",l,h),this},_getMapPanePos:function(){return ys(this._mapPane)||new se(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,h){var y=l&&h!==void 0?this._getNewPixelOrigin(l,h):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,h){var y=this.getSize()._divideBy(2);return this.project(l,h)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,h,y){var T=this._getNewPixelOrigin(y,h);return this.project(l,h)._subtract(T)},_latLngBoundsToNewLayerBounds:function(l,h,y){var T=this._getNewPixelOrigin(y,h);return fe([this.project(l.getSouthWest(),h)._subtract(T),this.project(l.getNorthWest(),h)._subtract(T),this.project(l.getSouthEast(),h)._subtract(T),this.project(l.getNorthEast(),h)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,h,y){if(!y)return l;var T=this.project(l,h),A=this.getSize().divideBy(2),M=new K(T.subtract(A),T.add(A)),Q=this._getBoundsOffset(M,y,h);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?l:this.unproject(T.add(Q),h)},_limitOffset:function(l,h){if(!h)return l;var y=this.getPixelBounds(),T=new K(y.min.add(l),y.max.add(l));return l.add(this._getBoundsOffset(T,h))},_getBoundsOffset:function(l,h,y){var T=fe(this.project(h.getNorthEast(),y),this.project(h.getSouthWest(),y)),A=T.min.subtract(l.min),M=T.max.subtract(l.max),Q=this._rebound(A.x,-M.x),re=this._rebound(A.y,-M.y);return new se(Q,re)},_rebound:function(l,h){return l+h>0?Math.round(l-h)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(h))},_limitZoom:function(l){var h=this.getMinZoom(),y=this.getMaxZoom(),T=Ge.any3d?this.options.zoomSnap:1;return T&&(l=Math.round(l/T)*T),Math.max(h,Math.min(y,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ln(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,h){var y=this._getCenterOffset(l)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,h),!0)},_createAnimProxy:function(){var l=this._proxy=Et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(h){var y=Nr,T=this._proxy.style[y];Zr(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),T===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ct(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),h=this.getZoom();Zr(this._proxy,this.project(l,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,h,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(h),A=this._getCenterOffset(l)._divideBy(1-1/T);return y.animate!==!0&&!this.getSize().contains(A)?!1:(q(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(l,h,!0)},this),!0)},_animateZoom:function(l,h,y,T){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=h,Ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:h,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ln(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ha(l,h){return new bt(l,h)}var xi=Re.extend({options:{position:"topright"},initialize:function(l){O(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var h=this._map;return h&&h.removeControl(this),this.options.position=l,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var h=this._container=this.onAdd(l),y=this.getPosition(),T=l._controlCorners[y];return Ye(h,"leaflet-control"),y.indexOf("bottom")!==-1?T.insertBefore(h,T.firstChild):T.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ct(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Ji=function(l){return new xi(l)};bt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},h="leaflet-",y=this._controlContainer=Et("div",h+"control-container",this._container);function T(A,M){var Q=h+A+" "+h+M;l[A+M]=Et("div",Q,y)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Ct(this._controlCorners[l]);Ct(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eo=xi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,h,y,T){return y<T?-1:T<y?1:0}},initialize:function(l,h,y){O(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in l)this._addLayer(l[T],T);for(T in h)this._addLayer(h[T],T,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return xi.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,h){return this._addLayer(l,h),this._map?this._update():this},addOverlay:function(l,h){return this._addLayer(l,h,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var h=this._getLayer(p(l));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):ln(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ln(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",h=this._container=Et("div",l),y=this.options.collapsed;h.setAttribute("aria-haspopup",!0),zs(h),Pr(h);var T=this._section=Et("section",l+"-list");y&&(this._map.on("click",this.collapse,this),lt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Et("a",l+"-toggle",h);A.href="#",A.title="Layers",A.setAttribute("role","button"),lt(A,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){Rn(M),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=Et("div",l+"-base",T),this._separator=Et("div",l+"-separator",T),this._overlaysList=Et("div",l+"-overlays",T),h.appendChild(T)},_getLayer:function(l){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&p(this._layers[h].layer)===l)return this._layers[h]},_addLayer:function(l,h,y){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:h,overlay:y}),this.options.sortLayers&&this._layers.sort(c(function(T,A){return this.options.sortFunction(T.layer,A.layer,T.name,A.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Nn(this._baseLayersList),Nn(this._overlaysList),this._layerControlInputs=[];var l,h,y,T,A=0;for(y=0;y<this._layers.length;y++)T=this._layers[y],this._addItem(T),h=h||T.overlay,l=l||!T.overlay,A+=T.overlay?0:1;return this.options.hideSingleBase&&(l=l&&A>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=h&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var h=this._getLayer(p(l.target)),y=h.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;y&&this._map.fire(y,h)},_createRadioElement:function(l,h){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(h?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=y,T.firstChild},_addItem:function(l){var h=document.createElement("label"),y=this._map.hasLayer(l.layer),T;l.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=y):T=this._createRadioElement("leaflet-base-layers_"+p(this),y),this._layerControlInputs.push(T),T.layerId=p(l.layer),lt(T,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+l.name;var M=document.createElement("span");h.appendChild(M),M.appendChild(T),M.appendChild(A);var Q=l.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,h,y,T=[],A=[];this._handlingClick=!0;for(var M=l.length-1;M>=0;M--)h=l[M],y=this._getLayer(h.layerId).layer,h.checked?T.push(y):h.checked||A.push(y);for(M=0;M<A.length;M++)this._map.hasLayer(A[M])&&this._map.removeLayer(A[M]);for(M=0;M<T.length;M++)this._map.hasLayer(T[M])||this._map.addLayer(T[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,h,y,T=this._map.getZoom(),A=l.length-1;A>=0;A--)h=l[A],y=this._getLayer(h.layerId).layer,h.disabled=y.options.minZoom!==void 0&&T<y.options.minZoom||y.options.maxZoom!==void 0&&T>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,lt(l,"click",Rn),this.expand();var h=this;setTimeout(function(){Yt(l,"click",Rn),h._preventClick=!1})}}),mc=function(l,h,y){return new eo(l,h,y)},Hs=xi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var h="leaflet-control-zoom",y=Et("div",h+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,h+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,h+"-out",y,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,h,y,T,A){var M=Et("a",y,T);return M.innerHTML=l,M.href="#",M.title=h,M.setAttribute("role","button"),M.setAttribute("aria-label",h),zs(M),lt(M,"click",$r),lt(M,"click",A,this),lt(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var l=this._map,h="leaflet-disabled";ln(this._zoomInButton,h),ln(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Ye(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Ye(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});bt.mergeOptions({zoomControl:!0}),bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hs,this.addControl(this.zoomControl))});var ju=function(l){return new Hs(l)},gc=xi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var h="leaflet-control-scale",y=Et("div",h),T=this.options;return this._addScales(T,h+"-line",y),l.on(T.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),y},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,h,y){l.metric&&(this._mScale=Et("div",h,y)),l.imperial&&(this._iScale=Et("div",h,y))},_update:function(){var l=this._map,h=l.getSize().y/2,y=l.distance(l.containerPointToLatLng([0,h]),l.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(y)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var h=this._getRoundNum(l),y=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,y,h/l)},_updateImperial:function(l){var h=l*3.2808399,y,T,A;h>5280?(y=h/5280,T=this._getRoundNum(y),this._updateScale(this._iScale,T+" mi",T/y)):(A=this._getRoundNum(h),this._updateScale(this._iScale,A+" ft",A/h))},_updateScale:function(l,h,y){l.style.width=Math.round(this.options.maxWidth*y)+"px",l.innerHTML=h},_getRoundNum:function(l){var h=Math.pow(10,(Math.floor(l)+"").length-1),y=l/h;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,h*y}}),to=function(l){return new gc(l)},_c='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',el=xi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ge.inlineSvg?_c+" ":"")+"Leaflet</a>"},initialize:function(l){O(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Et("div","leaflet-control-attribution"),zs(this._container);for(var h in l._layers)l._layers[h].getAttribution&&this.addAttribution(l._layers[h].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var h in this._attributions)this._attributions[h]&&l.push(h);var y=[];this.options.prefix&&y.push(this.options.prefix),l.length&&y.push(l.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});bt.mergeOptions({attributionControl:!0}),bt.addInitHook(function(){this.options.attributionControl&&new el().addTo(this)});var tl=function(l){return new el(l)};xi.Layers=eo,xi.Zoom=Hs,xi.Scale=gc,xi.Attribution=el,Ji.layers=mc,Ji.zoom=ju,Ji.scale=to,Ji.attribution=tl;var _r=Re.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_r.addTo=function(l,h){return l.addHandler(h,this),this};var Vu={Events:W},Jr=Ge.touch?"touchstart mousedown":"mousedown",es=le.extend({options:{clickTolerance:3},initialize:function(l,h,y,T){O(this,T),this._element=l,this._dragStartTarget=h||l,this._preventOutline=y},enable:function(){this._enabled||(lt(this._dragStartTarget,Jr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(es._dragging===this&&this.finishDrag(!0),Yt(this._dragStartTarget,Jr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!$a(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){es._dragging===this&&this.finishDrag();return}if(!(es._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(es._dragging=this,this._preventOutline&&ca(this._element),Xa(),Rr(),!this._moving)){this.fire("down");var h=l.touches?l.touches[0]:l,y=Jo(this._element);this._startPoint=new se(h.clientX,h.clientY),this._startPos=ys(this._element),this._parentScale=Qi(y);var T=l.type==="mousedown";lt(document,T?"mousemove":"touchmove",this._onMove,this),lt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var h=l.touches&&l.touches.length===1?l.touches[0]:l,y=new se(h.clientX,h.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,Rn(l),this._moved||(this.fire("dragstart"),this._moved=!0,Ye(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),cn(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){ln(document.body,"leaflet-dragging"),this._lastTarget&&(ln(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yt(document,"mousemove touchmove",this._onMove,this),Yt(document,"mouseup touchend touchcancel",this._onUp,this),la(),ci();var h=this._moved&&this._moving;this._moving=!1,es._dragging=!1,h&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function yc(l,h,y){var T,A=[1,4,2,8],M,Q,re,pe,Ie,ze,tt,yt;for(M=0,ze=l.length;M<ze;M++)l[M]._code=ge(l[M],h);for(re=0;re<4;re++){for(tt=A[re],T=[],M=0,ze=l.length,Q=ze-1;M<ze;Q=M++)pe=l[M],Ie=l[Q],pe._code&tt?Ie._code&tt||(yt=ae(Ie,pe,tt,h,y),yt._code=ge(yt,h),T.push(yt)):(Ie._code&tt&&(yt=ae(Ie,pe,tt,h,y),yt._code=ge(yt,h),T.push(yt)),T.push(pe));l=T}return l}function vc(l,h){var y,T,A,M,Q,re,pe,Ie,ze;if(!l||l.length===0)throw new Error("latlngs not passed");zt(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var tt=be([0,0]),yt=$(l),_i=yt.getNorthWest().distanceTo(yt.getSouthWest())*yt.getNorthEast().distanceTo(yt.getNorthWest());_i<1700&&(tt=nl(l));var Kn=l.length,vr=[];for(y=0;y<Kn;y++){var Zt=be(l[y]);vr.push(h.project(be([Zt.lat-tt.lat,Zt.lng-tt.lng])))}for(re=pe=Ie=0,y=0,T=Kn-1;y<Kn;T=y++)A=vr[y],M=vr[T],Q=A.y*M.x-M.y*A.x,pe+=(A.x+M.x)*Q,Ie+=(A.y+M.y)*Q,re+=Q*3;re===0?ze=vr[0]:ze=[pe/re,Ie/re];var $t=h.unproject(Ce(ze));return be([$t.lat+tt.lat,$t.lng+tt.lng])}function nl(l){for(var h=0,y=0,T=0,A=0;A<l.length;A++){var M=be(l[A]);h+=M.lat,y+=M.lng,T++}return be([h/T,y/T])}var fa={__proto__:null,clipPolygon:yc,polygonCenter:vc,centroid:nl};function Ci(l,h){if(!h||!l.length)return l.slice();var y=h*h;return l=x(l,y),l=qs(l,y),l}function wc(l,h,y){return Math.sqrt(ht(l,h,y,!0))}function Uu(l,h,y){return ht(l,h,y)}function qs(l,h){var y=l.length,T=typeof Uint8Array<"u"?Uint8Array:Array,A=new T(y);A[0]=A[y-1]=1,g(l,A,h,0,y-1);var M,Q=[];for(M=0;M<y;M++)A[M]&&Q.push(l[M]);return Q}function g(l,h,y,T,A){var M=0,Q,re,pe;for(re=T+1;re<=A-1;re++)pe=ht(l[re],l[T],l[A],!0),pe>M&&(Q=re,M=pe);M>y&&(h[Q]=1,g(l,h,y,T,Q),g(l,h,y,Q,A))}function x(l,h){for(var y=[l[0]],T=1,A=0,M=l.length;T<M;T++)Ue(l[T],l[A])>h&&(y.push(l[T]),A=T);return A<M-1&&y.push(l[M-1]),y}var D;function Y(l,h,y,T,A){var M=T?D:ge(l,y),Q=ge(h,y),re,pe,Ie;for(D=Q;;){if(!(M|Q))return[l,h];if(M&Q)return!1;re=M||Q,pe=ae(l,h,re,y,A),Ie=ge(pe,y),re===M?(l=pe,M=Ie):(h=pe,Q=Ie)}}function ae(l,h,y,T,A){var M=h.x-l.x,Q=h.y-l.y,re=T.min,pe=T.max,Ie,ze;return y&8?(Ie=l.x+M*(pe.y-l.y)/Q,ze=pe.y):y&4?(Ie=l.x+M*(re.y-l.y)/Q,ze=re.y):y&2?(Ie=pe.x,ze=l.y+Q*(pe.x-l.x)/M):y&1&&(Ie=re.x,ze=l.y+Q*(re.x-l.x)/M),new se(Ie,ze,A)}function ge(l,h){var y=0;return l.x<h.min.x?y|=1:l.x>h.max.x&&(y|=2),l.y<h.min.y?y|=4:l.y>h.max.y&&(y|=8),y}function Ue(l,h){var y=h.x-l.x,T=h.y-l.y;return y*y+T*T}function ht(l,h,y,T){var A=h.x,M=h.y,Q=y.x-A,re=y.y-M,pe=Q*Q+re*re,Ie;return pe>0&&(Ie=((l.x-A)*Q+(l.y-M)*re)/pe,Ie>1?(A=y.x,M=y.y):Ie>0&&(A+=Q*Ie,M+=re*Ie)),Q=l.x-A,re=l.y-M,T?Q*Q+re*re:new se(A,M)}function zt(l){return!Z(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Ft(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zt(l)}function Sn(l,h){var y,T,A,M,Q,re,pe,Ie;if(!l||l.length===0)throw new Error("latlngs not passed");zt(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ze=be([0,0]),tt=$(l),yt=tt.getNorthWest().distanceTo(tt.getSouthWest())*tt.getNorthEast().distanceTo(tt.getNorthWest());yt<1700&&(ze=nl(l));var _i=l.length,Kn=[];for(y=0;y<_i;y++){var vr=be(l[y]);Kn.push(h.project(be([vr.lat-ze.lat,vr.lng-ze.lng])))}for(y=0,T=0;y<_i-1;y++)T+=Kn[y].distanceTo(Kn[y+1])/2;if(T===0)Ie=Kn[0];else for(y=0,M=0;y<_i-1;y++)if(Q=Kn[y],re=Kn[y+1],A=Q.distanceTo(re),M+=A,M>T){pe=(M-T)/A,Ie=[re.x-pe*(re.x-Q.x),re.y-pe*(re.y-Q.y)];break}var Zt=h.unproject(Ce(Ie));return be([Zt.lat+ze.lat,Zt.lng+ze.lng])}var Or={__proto__:null,simplify:Ci,pointToSegmentDistance:wc,closestPointOnSegment:Uu,clipSegment:Y,_getEdgeIntersection:ae,_getBitCode:ge,_sqClosestPointOnSegment:ht,isFlat:zt,_flat:Ft,polylineCenter:Sn},Mr={project:function(l){return new se(l.lng,l.lat)},unproject:function(l){return new ye(l.y,l.x)},bounds:new K([-180,-90],[180,90])},yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var h=Math.PI/180,y=this.R,T=l.lat*h,A=this.R_MINOR/y,M=Math.sqrt(1-A*A),Q=M*Math.sin(T),re=Math.tan(Math.PI/4-T/2)/Math.pow((1-Q)/(1+Q),M/2);return T=-y*Math.log(Math.max(re,1e-10)),new se(l.lng*h*y,T)},unproject:function(l){for(var h=180/Math.PI,y=this.R,T=this.R_MINOR/y,A=Math.sqrt(1-T*T),M=Math.exp(-l.y/y),Q=Math.PI/2-2*Math.atan(M),re=0,pe=.1,Ie;re<15&&Math.abs(pe)>1e-7;re++)Ie=A*Math.sin(Q),Ie=Math.pow((1-Ie)/(1+Ie),A/2),pe=Math.PI/2-2*Math.atan(M*Ie)-Q,Q+=pe;return new ye(Q*h,l.x*h/y)}},ts={__proto__:null,LonLat:Mr,Mercator:yr,SphericalMercator:ft},no=r({},it,{code:"EPSG:3395",projection:yr,transformation:(function(){var l=.5/(Math.PI*yr.R);return Wt(l,.5,-l,.5)})()}),io=r({},it,{code:"EPSG:4326",projection:Mr,transformation:Wt(1/180,1,-1/180,.5)}),il=r({},Fe,{projection:Mr,transformation:Wt(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,h){var y=h.lng-l.lng,T=h.lat-l.lat;return Math.sqrt(y*y+T*T)},infinite:!0});Fe.Earth=it,Fe.EPSG3395=no,Fe.EPSG3857=Mn,Fe.EPSG900913=Wn,Fe.EPSG4326=io,Fe.Simple=il;var ns=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[p(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[p(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var h=l.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var y=this.getEvents();h.on(y,this),this.once("remove",function(){h.off(y,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});bt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var h=p(l);return this._layers[h]?this:(this._layers[h]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var h=p(l);return this._layers[h]?(this._loaded&&l.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return p(l)in this._layers},eachLayer:function(l,h){for(var y in this._layers)l.call(h,this._layers[y]);return this},_addLayers:function(l){l=l?Z(l)?l:[l]:[];for(var h=0,y=l.length;h<y;h++)this.addLayer(l[h])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[p(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var h=p(l);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,h=-1/0,y=this._getZoomSpan();for(var T in this._zoomBoundLayers){var A=this._zoomBoundLayers[T].options;l=A.minZoom===void 0?l:Math.min(l,A.minZoom),h=A.maxZoom===void 0?h:Math.max(h,A.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=l===1/0?void 0:l,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rl=ns.extend({initialize:function(l,h){O(this,h),this._layers={};var y,T;if(l)for(y=0,T=l.length;y<T;y++)this.addLayer(l[y])},addLayer:function(l){var h=this.getLayerId(l);return this._layers[h]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var h=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(l){var h=typeof l=="number"?l:this.getLayerId(l);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var h=Array.prototype.slice.call(arguments,1),y,T;for(y in this._layers)T=this._layers[y],T[l]&&T[l].apply(T,h);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,h){for(var y in this._layers)l.call(h,this._layers[y]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return p(l)}}),jy=function(l,h){return new rl(l,h)},Es=rl.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),rl.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),rl.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new we;for(var h in this._layers){var y=this._layers[h];l.extend(y.getBounds?y.getBounds():y.getLatLng())}return l}}),Qp=function(l,h){return new Es(l,h)},Ts=Re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){O(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,h){var y=this._getIconUrl(l);if(!y){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(y,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(T,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(l,h){var y=this.options,T=y[h+"Size"];typeof T=="number"&&(T=[T,T]);var A=Ce(T),M=Ce(h==="shadow"&&y.shadowAnchor||y.iconAnchor||A&&A.divideBy(2,!0));l.className="leaflet-marker-"+h+" "+(y.className||""),M&&(l.style.marginLeft=-M.x+"px",l.style.marginTop=-M.y+"px"),A&&(l.style.width=A.x+"px",l.style.height=A.y+"px")},_createImg:function(l,h){return h=h||document.createElement("img"),h.src=l,h},_getIconUrl:function(l){return Ge.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function bc(l){return new Ts(l)}var Ec=Ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Ec.imagePath!="string"&&(Ec.imagePath=this._detectIconPath()),(this.options.imagePath||Ec.imagePath)+Ts.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var h=function(y,T,A){var M=T.exec(y);return M&&M[A]};return l=h(l,/^url\((['"])?(.+)\1\)$/,2),l&&h(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Et("div","leaflet-default-icon-path",document.body),h=oa(l,"background-image")||oa(l,"backgroundImage");if(document.body.removeChild(l),h=this._stripUrl(h),h)return h;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),Tc=_r.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new es(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ye(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ln(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var h=this._marker,y=h._map,T=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,M=ys(h._icon),Q=y.getPixelBounds(),re=y.getPixelOrigin(),pe=fe(Q.min._subtract(re).add(A),Q.max._subtract(re).subtract(A));if(!pe.contains(M)){var Ie=Ce((Math.max(pe.max.x,M.x)-pe.max.x)/(Q.max.x-pe.max.x)-(Math.min(pe.min.x,M.x)-pe.min.x)/(Q.min.x-pe.min.x),(Math.max(pe.max.y,M.y)-pe.max.y)/(Q.max.y-pe.max.y)-(Math.min(pe.min.y,M.y)-pe.min.y)/(Q.min.y-pe.min.y)).multiplyBy(T);y.panBy(Ie,{animate:!1}),this._draggable._newPos._add(Ie),this._draggable._startPos._add(Ie),cn(h._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=q(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,l)))},_onDrag:function(l){var h=this._marker,y=h._shadow,T=ys(h._icon),A=h._map.layerPointToLatLng(T);y&&cn(y,T),h._latlng=A,l.latlng=A,l.oldLatLng=this._oldLatLng,h.fire("move",l).fire("drag",l)},_onDragEnd:function(l){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Sc=ns.extend({options:{icon:new Ec,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,h){O(this,h),this._latlng=be(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var h=this._latlng;return this._latlng=be(l),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=l.icon.createIcon(this._icon),T=!1;y!==this._icon&&(this._icon&&this._removeIcon(),T=!0,l.title&&(y.title=l.title),y.tagName==="IMG"&&(y.alt=l.alt||"")),Ye(y,h),l.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(y,"focus",this._panOnFocus,this);var A=l.icon.createShadow(this._shadow),M=!1;A!==this._shadow&&(this._removeShadow(),M=!0),A&&(Ye(A,h),A.alt=""),this._shadow=A,l.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&M&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yt(this._icon,"focus",this._panOnFocus,this),Ct(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ct(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&cn(this._icon,l),this._shadow&&cn(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Tc)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Tc(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Tn(this._icon,l),this._shadow&&Tn(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var h=this.options.icon.options,y=h.iconSize?Ce(h.iconSize):Ce(0,0),T=h.iconAnchor?Ce(h.iconAnchor):Ce(0,0);l.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:y.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xp(l,h){return new Sc(l,h)}var Ss=ns.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return O(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sl=Ss.extend({options:{fill:!0,radius:10},initialize:function(l,h){O(this,h),this._latlng=be(l),this._radius=this.options.radius},setLatLng:function(l){var h=this._latlng;return this._latlng=be(l),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var h=l&&l.radius||this._radius;return Ss.prototype.setStyle.call(this,l),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,h=this._radiusY||l,y=this._clickTolerance(),T=[l+y,h+y];this._pxBounds=new K(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Jp(l,h){return new sl(l,h)}var Bu=sl.extend({initialize:function(l,h,y){if(typeof h=="number"&&(h=r({},y,{radius:h})),O(this,h),this._latlng=be(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new we(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Ss.prototype.setStyle,_project:function(){var l=this._latlng.lng,h=this._latlng.lat,y=this._map,T=y.options.crs;if(T.distance===it.distance){var A=Math.PI/180,M=this._mRadius/it.R/A,Q=y.project([h+M,l]),re=y.project([h-M,l]),pe=Q.add(re).divideBy(2),Ie=y.unproject(pe).lat,ze=Math.acos((Math.cos(M*A)-Math.sin(h*A)*Math.sin(Ie*A))/(Math.cos(h*A)*Math.cos(Ie*A)))/A;(isNaN(ze)||ze===0)&&(ze=M/Math.cos(Math.PI/180*h)),this._point=pe.subtract(y.getPixelOrigin()),this._radius=isNaN(ze)?0:pe.x-y.project([Ie,l-ze]).x,this._radiusY=pe.y-Q.y}else{var tt=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(tt).x}this._updateBounds()}});function em(l,h,y){return new Bu(l,h,y)}var Ys=Ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,h){O(this,h),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var h=1/0,y=null,T=ht,A,M,Q=0,re=this._parts.length;Q<re;Q++)for(var pe=this._parts[Q],Ie=1,ze=pe.length;Ie<ze;Ie++){A=pe[Ie-1],M=pe[Ie];var tt=T(l,A,M,!0);tt<h&&(h=tt,y=T(l,A,M))}return y&&(y.distance=Math.sqrt(h)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,h){return h=h||this._defaultShape(),l=be(l),h.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new we,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return zt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var h=[],y=zt(l),T=0,A=l.length;T<A;T++)y?(h[T]=be(l[T]),this._bounds.extend(h[T])):h[T]=this._convertLatLngs(l[T]);return h},_project:function(){var l=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),h=new se(l,l);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(l,h,y){var T=l[0]instanceof ye,A=l.length,M,Q;if(T){for(Q=[],M=0;M<A;M++)Q[M]=this._map.latLngToLayerPoint(l[M]),y.extend(Q[M]);h.push(Q)}else for(M=0;M<A;M++)this._projectLatlngs(l[M],h,y)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,y,T,A,M,Q,re,pe;for(y=0,A=0,M=this._rings.length;y<M;y++)for(pe=this._rings[y],T=0,Q=pe.length;T<Q-1;T++)re=Y(pe[T],pe[T+1],l,T,!0),re&&(h[A]=h[A]||[],h[A].push(re[0]),(re[1]!==pe[T+1]||T===Q-2)&&(h[A].push(re[1]),A++))}},_simplifyPoints:function(){for(var l=this._parts,h=this.options.smoothFactor,y=0,T=l.length;y<T;y++)l[y]=Ci(l[y],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,h){var y,T,A,M,Q,re,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(y=0,M=this._parts.length;y<M;y++)for(re=this._parts[y],T=0,Q=re.length,A=Q-1;T<Q;A=T++)if(!(!h&&T===0)&&wc(l,re[A],re[T])<=pe)return!0;return!1}});function Vy(l,h){return new Ys(l,h)}Ys._flat=Ft;var al=Ys.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var h=Ys.prototype._convertLatLngs.call(this,l),y=h.length;return y>=2&&h[0]instanceof ye&&h[0].equals(h[y-1])&&h.pop(),h},_setLatLngs:function(l){Ys.prototype._setLatLngs.call(this,l),zt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,h=this.options.weight,y=new se(h,h);if(l=new K(l.min.subtract(y),l.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,A=this._rings.length,M;T<A;T++)M=yc(this._rings[T],l,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var h=!1,y,T,A,M,Q,re,pe,Ie;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(M=0,pe=this._parts.length;M<pe;M++)for(y=this._parts[M],Q=0,Ie=y.length,re=Ie-1;Q<Ie;re=Q++)T=y[Q],A=y[re],T.y>l.y!=A.y>l.y&&l.x<(A.x-T.x)*(l.y-T.y)/(A.y-T.y)+T.x&&(h=!h);return h||Ys.prototype._containsPoint.call(this,l,!0)}});function Uy(l,h){return new al(l,h)}var Gs=Es.extend({initialize:function(l,h){O(this,h),this._layers={},l&&this.addData(l)},addData:function(l){var h=Z(l)?l:l.features,y,T,A;if(h){for(y=0,T=h.length;y<T;y++)A=h[y],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var M=this.options;if(M.filter&&!M.filter(l))return this;var Q=Ai(l,M);return Q?(Q.feature=Hu(l),Q.defaultOptions=Q.options,this.resetStyle(Q),M.onEachFeature&&M.onEachFeature(l,Q),this.addLayer(Q)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=r({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(h){this._setLayerStyle(h,l)},this)},_setLayerStyle:function(l,h){l.setStyle&&(typeof h=="function"&&(h=h(l.feature)),l.setStyle(h))}});function Ai(l,h){var y=l.type==="Feature"?l.geometry:l,T=y?y.coordinates:null,A=[],M=h&&h.pointToLayer,Q=h&&h.coordsToLatLng||zu,re,pe,Ie,ze;if(!T&&!y)return null;switch(y.type){case"Point":return re=Q(T),ol(M,l,re,h);case"MultiPoint":for(Ie=0,ze=T.length;Ie<ze;Ie++)re=Q(T[Ie]),A.push(ol(M,l,re,h));return new Es(A);case"LineString":case"MultiLineString":return pe=xc(T,y.type==="LineString"?0:1,Q),new Ys(pe,h);case"Polygon":case"MultiPolygon":return pe=xc(T,y.type==="Polygon"?1:2,Q),new al(pe,h);case"GeometryCollection":for(Ie=0,ze=y.geometries.length;Ie<ze;Ie++){var tt=Ai({geometry:y.geometries[Ie],type:"Feature",properties:l.properties},h);tt&&A.push(tt)}return new Es(A);case"FeatureCollection":for(Ie=0,ze=y.features.length;Ie<ze;Ie++){var yt=Ai(y.features[Ie],h);yt&&A.push(yt)}return new Es(A);default:throw new Error("Invalid GeoJSON object.")}}function ol(l,h,y,T){return l?l(h,y):new Sc(y,T&&T.markersInheritOptions&&T)}function zu(l){return new ye(l[1],l[0],l[2])}function xc(l,h,y){for(var T=[],A=0,M=l.length,Q;A<M;A++)Q=h?xc(l[A],h-1,y):(y||zu)(l[A]),T.push(Q);return T}function Fu(l,h){return l=be(l),l.alt!==void 0?[S(l.lng,h),S(l.lat,h),S(l.alt,h)]:[S(l.lng,h),S(l.lat,h)]}function Cc(l,h,y,T){for(var A=[],M=0,Q=l.length;M<Q;M++)A.push(h?Cc(l[M],zt(l[M])?0:h-1,y,T):Fu(l[M],T));return!h&&y&&A.length>0&&A.push(A[0].slice()),A}function pa(l,h){return l.feature?r({},l.feature,{geometry:h}):Hu(h)}function Hu(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var ma={toGeoJSON:function(l){return pa(this,{type:"Point",coordinates:Fu(this.getLatLng(),l)})}};Sc.include(ma),Bu.include(ma),sl.include(ma),Ys.include({toGeoJSON:function(l){var h=!zt(this._latlngs),y=Cc(this._latlngs,h?1:0,!1,l);return pa(this,{type:(h?"Multi":"")+"LineString",coordinates:y})}}),al.include({toGeoJSON:function(l){var h=!zt(this._latlngs),y=h&&!zt(this._latlngs[0]),T=Cc(this._latlngs,y?2:h?1:0,!0,l);return h||(T=[T]),pa(this,{type:(y?"Multi":"")+"Polygon",coordinates:T})}}),rl.include({toMultiPoint:function(l){var h=[];return this.eachLayer(function(y){h.push(y.toGeoJSON(l).geometry.coordinates)}),pa(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(l){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(l);var y=h==="GeometryCollection",T=[];return this.eachLayer(function(A){if(A.toGeoJSON){var M=A.toGeoJSON(l);if(y)T.push(M.geometry);else{var Q=Hu(M);Q.type==="FeatureCollection"?T.push.apply(T,Q.features):T.push(Q)}}}),y?pa(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function qu(l,h){return new Gs(l,h)}var Ac=qu,ll=ns.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,h,y){this._url=l,this._bounds=$(h),O(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ct(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Dn(this._image),this},bringToBack:function(){return this._map&&mr(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=$(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",h=this._image=l?this._url:Et("img");if(Ye(h,"leaflet-image-layer"),this._zoomAnimated&&Ye(h,"leaflet-zoom-animated"),this.options.className&&Ye(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onload=c(this.fire,this,"load"),h.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(l){var h=this._map.getZoomScale(l.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Zr(this._image,y,h)},_reset:function(){var l=this._image,h=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=h.getSize();cn(l,h.min),l.style.width=y.x+"px",l.style.height=y.y+"px"},_updateOpacity:function(){Tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),tm=function(l,h,y){return new ll(l,h,y)},ga=ll.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",h=this._image=l?this._url:Et("video");if(Ye(h,"leaflet-image-layer"),this._zoomAnimated&&Ye(h,"leaflet-zoom-animated"),this.options.className&&Ye(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onloadeddata=c(this.fire,this,"load"),l){for(var y=h.getElementsByTagName("source"),T=[],A=0;A<y.length;A++)T.push(y[A].src);this._url=y.length>0?T:[h.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var Q=Et("source");Q.src=this._url[M],h.appendChild(Q)}}});function cl(l,h,y){return new ga(l,h,y)}var Yu=ll.extend({_initImage:function(){var l=this._image=this._url;Ye(l,"leaflet-image-layer"),this._zoomAnimated&&Ye(l,"leaflet-zoom-animated"),this.options.className&&Ye(l,this.options.className),l.onselectstart=b,l.onmousemove=b}});function nm(l,h,y){return new Yu(l,h,y)}var Ii=ns.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,h){l&&(l instanceof ye||Z(l))?(this._latlng=be(l),O(this,h)):(O(this,l),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Tn(this._container,1),this.bringToFront(),this.options.interactive&&(Ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Tn(this._container,0),this._removeTimeout=setTimeout(c(Ct,void 0,this._container),200)):Ct(this._container),this.options.interactive&&(ln(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=be(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Dn(this._container),this},bringToBack:function(){return this._map&&mr(this._container),this},_prepareOpen:function(l){var h=this._source;if(!h._map)return!1;if(h instanceof Es){h=null;var y=this._source._layers;for(var T in y)if(y[T]._map){h=y[T];break}if(!h)return!1;this._source=h}if(!l)if(h.getCenter)l=h.getCenter();else if(h.getLatLng)l=h.getLatLng();else if(h.getBounds)l=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")l.innerHTML=h;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),h=Ce(this.options.offset),y=this._getAnchor();this._zoomAnimated?cn(this._container,l.add(y)):h=h.add(l).add(y);var T=this._containerBottom=-h.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=T+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});bt.include({_initOverlay:function(l,h,y,T){var A=h;return A instanceof l||(A=new l(T).setContent(h)),y&&A.setLatLng(y),A}}),ns.include({_initOverlay:function(l,h,y,T){var A=y;return A instanceof l?(O(A,T),A._source=this):(A=h&&!T?h:new l(T,this),A.setContent(y)),A}});var Ic=Ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Ii.prototype.openOn.call(this,l)},onAdd:function(l){Ii.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ss||this._source.on("preclick",Ot))},onRemove:function(l){Ii.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ss||this._source.off("preclick",Ot))},getEvents:function(){var l=Ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",h=this._container=Et("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=Et("div",l+"-content-wrapper",h);if(this._contentNode=Et("div",l+"-content",y),zs(h),Pr(this._contentNode),lt(h,"contextmenu",Ot),this._tipContainer=Et("div",l+"-tip-container",h),this._tip=Et("div",l+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=Et("a",l+"-close-button",h);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',lt(T,"click",function(A){Rn(A),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,h=l.style;h.width="",h.whiteSpace="nowrap";var y=l.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),h.width=y+1+"px",h.whiteSpace="",h.height="";var T=l.offsetHeight,A=this.options.maxHeight,M="leaflet-popup-scrolled";A&&T>A?(h.height=A+"px",Ye(l,M)):ln(l,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),y=this._getAnchor();cn(this._container,h.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,h=parseInt(oa(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+h,T=this._containerWidth,A=new se(this._containerLeft,-y-this._containerBottom);A._add(ys(this._container));var M=l.layerPointToContainerPoint(A),Q=Ce(this.options.autoPanPadding),re=Ce(this.options.autoPanPaddingTopLeft||Q),pe=Ce(this.options.autoPanPaddingBottomRight||Q),Ie=l.getSize(),ze=0,tt=0;M.x+T+pe.x>Ie.x&&(ze=M.x+T-Ie.x+pe.x),M.x-ze-re.x<0&&(ze=M.x-re.x),M.y+y+pe.y>Ie.y&&(tt=M.y+y-Ie.y+pe.y),M.y-tt-re.y<0&&(tt=M.y-re.y),(ze||tt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([ze,tt]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),im=function(l,h){return new Ic(l,h)};bt.mergeOptions({closePopupOnClick:!0}),bt.include({openPopup:function(l,h,y){return this._initOverlay(Ic,l,h,y).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),ns.include({bindPopup:function(l,h){return this._popup=this._initOverlay(Ic,this._popup,l,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Es||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){$r(l);var h=l.layer||l.target;if(this._popup._source===h&&!(h instanceof Ss)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=h,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Nc=Ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Ii.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Ii.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Ii.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",h=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Et("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var h,y,T=this._map,A=this._container,M=T.latLngToContainerPoint(T.getCenter()),Q=T.layerPointToContainerPoint(l),re=this.options.direction,pe=A.offsetWidth,Ie=A.offsetHeight,ze=Ce(this.options.offset),tt=this._getAnchor();re==="top"?(h=pe/2,y=Ie):re==="bottom"?(h=pe/2,y=0):re==="center"?(h=pe/2,y=Ie/2):re==="right"?(h=0,y=Ie/2):re==="left"?(h=pe,y=Ie/2):Q.x<M.x?(re="right",h=0,y=Ie/2):(re="left",h=pe+(ze.x+tt.x)*2,y=Ie/2),l=l.subtract(Ce(h,y,!0)).add(ze).add(tt),ln(A,"leaflet-tooltip-right"),ln(A,"leaflet-tooltip-left"),ln(A,"leaflet-tooltip-top"),ln(A,"leaflet-tooltip-bottom"),Ye(A,"leaflet-tooltip-"+re),cn(A,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Tn(this._container,l)},_animateZoom:function(l){var h=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(h)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),By=function(l,h){return new Nc(l,h)};bt.include({openTooltip:function(l,h,y){return this._initOverlay(Nc,l,h,y).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),ns.include({bindTooltip:function(l,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nc,this._tooltip,l,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var h=l?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[h](y),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Es||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&(lt(h,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),lt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var h=typeof l.getElement=="function"&&l.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var h=l.latlng,y,T;this._tooltip.options.sticky&&l.originalEvent&&(y=this._map.mouseEventToContainerPoint(l.originalEvent),T=this._map.containerPointToLayerPoint(y),h=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(h)}});var rm=Ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var h=l&&l.tagName==="DIV"?l:document.createElement("div"),y=this.options;if(y.html instanceof Element?(Nn(h),h.appendChild(y.html)):h.innerHTML=y.html!==!1?y.html:"",y.bgPos){var T=Ce(y.bgPos);h.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function zy(l){return new rm(l)}Ts.Default=Ec;var ul=ns.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){O(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Ct(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Dn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof se?l:new se(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var h=this.getPane().children,y=-l(-1/0,1/0),T=0,A=h.length,M;T<A;T++)M=h[T].style.zIndex,h[T]!==this._container&&M&&(y=l(y,+M));isFinite(y)&&(this.options.zIndex=y+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ge.ielt9){Tn(this._container,this.options.opacity);var l=+new Date,h=!1,y=!1;for(var T in this._tiles){var A=this._tiles[T];if(!(!A.current||!A.loaded)){var M=Math.min(1,(l-A.loaded)/200);Tn(A.el,M),M<1?h=!0:(A.active?y=!0:this._onOpaqueTile(A),A.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),h&&(z(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,h=this.options.maxZoom;if(l!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===l?(this._levels[y].el.style.zIndex=h-Math.abs(l-y),this._onUpdateLevel(y)):(Ct(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var T=this._levels[l],A=this._map;return T||(T=this._levels[l]={},T.el=Et("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=h,T.origin=A.project(A.unproject(A.getPixelOrigin()),l).round(),T.zoom=l,this._setZoomTransform(T,A.getCenter(),A.getZoom()),b(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var l,h,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)h=this._tiles[l],h.retain=h.current;for(l in this._tiles)if(h=this._tiles[l],h.current&&!h.active){var T=h.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var h in this._tiles)this._tiles[h].coords.z===l&&this._removeTile(h)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Ct(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,h,y,T){var A=Math.floor(l/2),M=Math.floor(h/2),Q=y-1,re=new se(+A,+M);re.z=+Q;var pe=this._tileCoordsToKey(re),Ie=this._tiles[pe];return Ie&&Ie.active?(Ie.retain=!0,!0):(Ie&&Ie.loaded&&(Ie.retain=!0),Q>T?this._retainParent(A,M,Q,T):!1)},_retainChildren:function(l,h,y,T){for(var A=2*l;A<2*l+2;A++)for(var M=2*h;M<2*h+2;M++){var Q=new se(A,M);Q.z=y+1;var re=this._tileCoordsToKey(Q),pe=this._tiles[re];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);y+1<T&&this._retainChildren(A,M,y+1,T)}},_resetView:function(l){var h=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var h=this.options;return h.minNativeZoom!==void 0&&l<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<l?h.maxNativeZoom:l},_setView:function(l,h,y,T){var A=Math.round(h);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var M=this.options.updateWhenZooming&&A!==this._tileZoom;(!T||M)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(l),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(l,h)},_setZoomTransforms:function(l,h){for(var y in this._levels)this._setZoomTransform(this._levels[y],l,h)},_setZoomTransform:function(l,h,y){var T=this._map.getZoomScale(y,l.zoom),A=l.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(h,y)).round();Ge.any3d?Zr(l.el,A,T):cn(l.el,A)},_resetGrid:function(){var l=this._map,h=l.options.crs,y=this._tileSize=this.getTileSize(),T=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,h.wrapLng[0]],T).x/y.x),Math.ceil(l.project([0,h.wrapLng[1]],T).x/y.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([h.wrapLat[0],0],T).y/y.x),Math.ceil(l.project([h.wrapLat[1],0],T).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var h=this._map,y=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),T=h.getZoomScale(y,this._tileZoom),A=h.project(l,this._tileZoom).floor(),M=h.getSize().divideBy(T*2);return new K(A.subtract(M),A.add(M))},_update:function(l){var h=this._map;if(h){var y=this._clampZoom(h.getZoom());if(l===void 0&&(l=h.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(l),A=this._pxBoundsToTileRange(T),M=A.getCenter(),Q=[],re=this.options.keepBuffer,pe=new K(A.getBottomLeft().subtract([re,-re]),A.getTopRight().add([re,-re]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ie in this._tiles){var ze=this._tiles[Ie].coords;(ze.z!==this._tileZoom||!pe.contains(new se(ze.x,ze.y)))&&(this._tiles[Ie].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(l,y);return}for(var tt=A.min.y;tt<=A.max.y;tt++)for(var yt=A.min.x;yt<=A.max.x;yt++){var _i=new se(yt,tt);if(_i.z=this._tileZoom,!!this._isValidTile(_i)){var Kn=this._tiles[this._tileCoordsToKey(_i)];Kn?Kn.current=!0:Q.push(_i)}}if(Q.sort(function(Zt,$t){return Zt.distanceTo(M)-$t.distanceTo(M)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var vr=document.createDocumentFragment();for(yt=0;yt<Q.length;yt++)this._addTile(Q[yt],vr);this._level.el.appendChild(vr)}}}},_isValidTile:function(l){var h=this._map.options.crs;if(!h.infinite){var y=this._globalTileRange;if(!h.wrapLng&&(l.x<y.min.x||l.x>y.max.x)||!h.wrapLat&&(l.y<y.min.y||l.y>y.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(l);return $(this.options.bounds).overlaps(T)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var h=this._map,y=this.getTileSize(),T=l.scaleBy(y),A=T.add(y),M=h.unproject(T,l.z),Q=h.unproject(A,l.z);return[M,Q]},_tileCoordsToBounds:function(l){var h=this._tileCoordsToNwSe(l),y=new we(h[0],h[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var h=l.split(":"),y=new se(+h[0],+h[1]);return y.z=+h[2],y},_removeTile:function(l){var h=this._tiles[l];h&&(Ct(h.el),delete this._tiles[l],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Ye(l,"leaflet-tile");var h=this.getTileSize();l.style.width=h.x+"px",l.style.height=h.y+"px",l.onselectstart=b,l.onmousemove=b,Ge.ielt9&&this.options.opacity<1&&Tn(l,this.options.opacity)},_addTile:function(l,h){var y=this._getTilePos(l),T=this._tileCoordsToKey(l),A=this.createTile(this._wrapCoords(l),c(this._tileReady,this,l));this._initTile(A),this.createTile.length<2&&q(c(this._tileReady,this,l,null,A)),cn(A,y),this._tiles[T]={el:A,coords:l,current:!0},h.appendChild(A),this.fire("tileloadstart",{tile:A,coords:l})},_tileReady:function(l,h,y){h&&this.fire("tileerror",{error:h,tile:y,coords:l});var T=this._tileCoordsToKey(l);y=this._tiles[T],y&&(y.loaded=+new Date,this._map._fadeAnimated?(Tn(y.el,0),z(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),h||(Ye(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ge.ielt9||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var h=new se(this._wrapX?w(l.x,this._wrapX):l.x,this._wrapY?w(l.y,this._wrapY):l.y);return h.z=l.z,h},_pxBoundsToTileRange:function(l){var h=this.getTileSize();return new K(l.min.unscaleBy(h).floor(),l.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function sm(l){return new ul(l)}var _a=ul.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,h){this._url=l,h=O(this,h),h.detectRetina&&Ge.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,h){return this._url===l&&h===void 0&&(h=!0),this._url=l,h||this.redraw(),this},createTile:function(l,h){var y=document.createElement("img");return lt(y,"load",c(this._tileOnLoad,this,h,y)),lt(y,"error",c(this._tileOnError,this,h,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(l),y},getTileUrl:function(l){var h={r:Ge.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-l.y;this.options.tms&&(h.y=y),h["-y"]=y}return G(this._url,r(h,this.options))},_tileOnLoad:function(l,h){Ge.ielt9?setTimeout(c(l,this,null,h),0):l(null,h)},_tileOnError:function(l,h,y){var T=this.options.errorTileUrl;T&&h.getAttribute("src")!==T&&(h.src=T),l(y,h)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,h=this.options.maxZoom,y=this.options.zoomReverse,T=this.options.zoomOffset;return y&&(l=h-l),l+T},_getSubdomain:function(l){var h=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var l,h;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(h=this._tiles[l].el,h.onload=b,h.onerror=b,!h.complete)){h.src=ee;var y=this._tiles[l].coords;Ct(h),delete this._tiles[l],this.fire("tileabort",{tile:h,coords:y})}},_removeTile:function(l){var h=this._tiles[l];if(h)return h.el.setAttribute("src",ee),ul.prototype._removeTile.call(this,l)},_tileReady:function(l,h,y){if(!(!this._map||y&&y.getAttribute("src")===ee))return ul.prototype._tileReady.call(this,l,h,y)}});function kr(l,h){return new _a(l,h)}var Dc=_a.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,h){this._url=l;var y=r({},this.defaultWmsParams);for(var T in h)T in this.options||(y[T]=h[T]);h=O(this,h);var A=h.detectRetina&&Ge.retina?2:1,M=this.getTileSize();y.width=M.x*A,y.height=M.y*A,this.wmsParams=y},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,_a.prototype.onAdd.call(this,l)},getTileUrl:function(l){var h=this._tileCoordsToNwSe(l),y=this._crs,T=fe(y.project(h[0]),y.project(h[1])),A=T.min,M=T.max,Q=(this._wmsVersion>=1.3&&this._crs===io?[A.y,A.x,M.y,M.x]:[A.x,A.y,M.x,M.y]).join(","),re=_a.prototype.getTileUrl.call(this,l);return re+R(this.wmsParams,re,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(l,h){return r(this.wmsParams,l),h||this.redraw(),this}});function Lr(l,h){return new Dc(l,h)}_a.WMS=Dc,kr.wms=Lr;var er=ns.extend({options:{padding:.1},initialize:function(l){O(this,l),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,h){var y=this._map.getZoomScale(h,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,h),M=T.multiplyBy(-y).add(A).subtract(this._map._getNewPixelOrigin(l,h));Ge.any3d?Zr(this._container,M,y):cn(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,h=this._map.getSize(),y=this._map.containerPointToLayerPoint(h.multiplyBy(-l)).round();this._bounds=new K(y,y.add(h.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gu=er.extend({options:{tolerance:0},getEvents:function(){var l=er.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");lt(l,"mousemove",this._onMouseMove,this),lt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Ct(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var h in this._layers)l=this._layers[h],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var l=this._bounds,h=this._container,y=l.getSize(),T=Ge.retina?2:1;cn(h,l.min),h.width=T*y.x,h.height=T*y.y,h.style.width=y.x+"px",h.style.height=y.y+"px",Ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[p(l)]=l;var h=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var h=l._order,y=h.next,T=h.prev;y?y.prev=T:this._drawLast=T,T?T.next=y:this._drawFirst=y,delete l._order,delete this._layers[p(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var h=l.options.dashArray.split(/[, ]+/),y=[],T,A;for(A=0;A<h.length;A++){if(T=Number(h[A]),isNaN(T))return;y.push(T)}l.options._dashArray=y}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var h=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(l._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(l._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var h=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,h=this._redrawBounds;if(this._ctx.save(),h){var y=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)l=T.layer,(!h||l._pxBounds&&l._pxBounds.intersects(h))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,h){if(this._drawing){var y,T,A,M,Q=l._parts,re=Q.length,pe=this._ctx;if(re){for(pe.beginPath(),y=0;y<re;y++){for(T=0,A=Q[y].length;T<A;T++)M=Q[y][T],pe[T?"lineTo":"moveTo"](M.x,M.y);h&&pe.closePath()}this._fillStroke(pe,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var h=l._point,y=this._ctx,T=Math.max(Math.round(l._radius),1),A=(Math.max(Math.round(l._radiusY),1)||T)/T;A!==1&&(y.save(),y.scale(1,A)),y.beginPath(),y.arc(h.x,h.y/A,T,0,Math.PI*2,!1),A!==1&&y.restore(),this._fillStroke(y,l)}},_fillStroke:function(l,h){var y=h.options;y.fill&&(l.globalAlpha=y.fillOpacity,l.fillStyle=y.fillColor||y.color,l.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(l.setLineDash&&l.setLineDash(h.options&&h.options._dashArray||[]),l.globalAlpha=y.opacity,l.lineWidth=y.weight,l.strokeStyle=y.color,l.lineCap=y.lineCap,l.lineJoin=y.lineJoin,l.stroke())},_onClick:function(l){for(var h=this._map.mouseEventToLayerPoint(l),y,T,A=this._drawFirst;A;A=A.next)y=A.layer,y.options.interactive&&y._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(y))&&(T=y);this._fireEvent(T?[T]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,h)}},_handleMouseOut:function(l){var h=this._hoveredLayer;h&&(ln(this._container,"leaflet-interactive"),this._fireEvent([h],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,h){if(!this._mouseHoverThrottled){for(var y,T,A=this._drawFirst;A;A=A.next)y=A.layer,y.options.interactive&&y._containsPoint(h)&&(T=y);T!==this._hoveredLayer&&(this._handleMouseOut(l),T&&(Ye(this._container,"leaflet-interactive"),this._fireEvent([T],l,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,h,y){this._map._fireDOMEvent(h,y||h.type,l)},_bringToFront:function(l){var h=l._order;if(h){var y=h.next,T=h.prev;if(y)y.prev=T;else return;T?T.next=y:y&&(this._drawFirst=y),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(l)}},_bringToBack:function(l){var h=l._order;if(h){var y=h.next,T=h.prev;if(T)T.next=y;else return;y?y.prev=T:T&&(this._drawLast=T),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(l)}}});function Rc(l){return Ge.canvas?new Gu(l):null}var ya=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),jh={_initContainer:function(){this._container=Et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var h=l._container=ya("shape");Ye(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",l._path=ya("path"),h.appendChild(l._path),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){var h=l._container;this._container.appendChild(h),l.options.interactive&&l.addInteractiveTarget(h)},_removePath:function(l){var h=l._container;Ct(h),l.removeInteractiveTarget(h),delete this._layers[p(l)]},_updateStyle:function(l){var h=l._stroke,y=l._fill,T=l.options,A=l._container;A.stroked=!!T.stroke,A.filled=!!T.fill,T.stroke?(h||(h=l._stroke=ya("stroke")),A.appendChild(h),h.weight=T.weight+"px",h.color=T.color,h.opacity=T.opacity,T.dashArray?h.dashStyle=Z(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=T.lineCap.replace("butt","flat"),h.joinstyle=T.lineJoin):h&&(A.removeChild(h),l._stroke=null),T.fill?(y||(y=l._fill=ya("fill")),A.appendChild(y),y.color=T.fillColor||T.color,y.opacity=T.fillOpacity):y&&(A.removeChild(y),l._fill=null)},_updateCircle:function(l){var h=l._point.round(),y=Math.round(l._radius),T=Math.round(l._radiusY||y);this._setPath(l,l._empty()?"M0 0":"AL "+h.x+","+h.y+" "+y+","+T+" 0,"+65535*360)},_setPath:function(l,h){l._path.v=h},_bringToFront:function(l){Dn(l._container)},_bringToBack:function(l){mr(l._container)}},xs=Ge.vml?ya:dr,dl=er.extend({_initContainer:function(){this._container=xs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ct(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var l=this._bounds,h=l.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,y.setAttribute("width",h.x),y.setAttribute("height",h.y)),cn(y,l.min),y.setAttribute("viewBox",[l.min.x,l.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(l){var h=l._path=xs("path");l.options.className&&Ye(h,l.options.className),l.options.interactive&&Ye(h,"leaflet-interactive"),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Ct(l._path),l.removeInteractiveTarget(l._path),delete this._layers[p(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var h=l._path,y=l.options;h&&(y.stroke?(h.setAttribute("stroke",y.color),h.setAttribute("stroke-opacity",y.opacity),h.setAttribute("stroke-width",y.weight),h.setAttribute("stroke-linecap",y.lineCap),h.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?h.setAttribute("stroke-dasharray",y.dashArray):h.removeAttribute("stroke-dasharray"),y.dashOffset?h.setAttribute("stroke-dashoffset",y.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),y.fill?(h.setAttribute("fill",y.fillColor||y.color),h.setAttribute("fill-opacity",y.fillOpacity),h.setAttribute("fill-rule",y.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(l,h){this._setPath(l,Oi(l._parts,h))},_updateCircle:function(l){var h=l._point,y=Math.max(Math.round(l._radius),1),T=Math.max(Math.round(l._radiusY),1)||y,A="a"+y+","+T+" 0 1,0 ",M=l._empty()?"M0 0":"M"+(h.x-y)+","+h.y+A+y*2+",0 "+A+-y*2+",0 ";this._setPath(l,M)},_setPath:function(l,h){l._path.setAttribute("d",h)},_bringToFront:function(l){Dn(l._path)},_bringToBack:function(l){mr(l._path)}});Ge.vml&&dl.include(jh);function Pc(l){return Ge.svg||Ge.vml?new dl(l):null}bt.include({getRenderer:function(l){var h=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var h=this._paneRenderers[l];return h===void 0&&(h=this._createRenderer({pane:l}),this._paneRenderers[l]=h),h},_createRenderer:function(l){return this.options.preferCanvas&&Rc(l)||Pc(l)}});var ro=al.extend({initialize:function(l,h){al.prototype.initialize.call(this,this._boundsToLatLngs(l),h)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=$(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Fy(l,h){return new ro(l,h)}dl.create=xs,dl.pointsToPath=Oi,Gs.geometryToLayer=Ai,Gs.coordsToLatLng=zu,Gs.coordsToLatLngs=xc,Gs.latLngToCoords=Fu,Gs.latLngsToCoords=Cc,Gs.getFeature=pa,Gs.asFeature=Hu,bt.mergeOptions({boxZoom:!0});var tr=_r.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ct(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rr(),Xa(),this._startPoint=this._map.mouseEventToContainerPoint(l),lt(document,{contextmenu:$r,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Et("div","leaflet-zoom-box",this._container),Ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var h=new K(this._point,this._startPoint),y=h.getSize();cn(this._box,h.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(Ct(this._box),ln(this._container,"leaflet-crosshair")),ci(),la(),Yt(document,{contextmenu:$r,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var h=new we(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});bt.addInitHook("addHandler","boxZoom",tr),bt.mergeOptions({doubleClickZoom:!0});var Wu=_r.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var h=this._map,y=h.getZoom(),T=h.options.zoomDelta,A=l.originalEvent.shiftKey?y-T:y+T;h.options.doubleClickZoom==="center"?h.setZoom(A):h.setZoomAround(l.containerPoint,A)}});bt.addInitHook("addHandler","doubleClickZoom",Wu),bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cs=_r.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new es(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ln(this._map._container,"leaflet-grab"),ln(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=$(this._map.options.maxBounds);this._offsetLimit=fe(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var h=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(h),this._prunePositions(h)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,h){return l-(l-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;l.x<h.min.x&&(l.x=this._viscousLimit(l.x,h.min.x)),l.y<h.min.y&&(l.y=this._viscousLimit(l.y,h.min.y)),l.x>h.max.x&&(l.x=this._viscousLimit(l.x,h.max.x)),l.y>h.max.y&&(l.y=this._viscousLimit(l.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,h=Math.round(l/2),y=this._initialWorldOffset,T=this._draggable._newPos.x,A=(T-h+y)%l+h-y,M=(T+h+y)%l-h-y,Q=Math.abs(A+y)<Math.abs(M+y)?A:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(l){var h=this._map,y=h.options,T=!y.inertia||l.noInertia||this._times.length<2;if(h.fire("dragend",l),T)h.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,Q=y.easeLinearity,re=A.multiplyBy(Q/M),pe=re.distanceTo([0,0]),Ie=Math.min(y.inertiaMaxSpeed,pe),ze=re.multiplyBy(Ie/pe),tt=Ie/(y.inertiaDeceleration*Q),yt=ze.multiplyBy(-tt/2).round();!yt.x&&!yt.y?h.fire("moveend"):(yt=h._limitOffset(yt,h.options.maxBounds),q(function(){h.panBy(yt,{duration:tt,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});bt.addInitHook("addHandler","dragging",Cs),bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vh=_r.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),lt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,h=document.documentElement,y=l.scrollTop||h.scrollTop,T=l.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(T,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var h=this._panKeys={},y=this.keyCodes,T,A;for(T=0,A=y.left.length;T<A;T++)h[y.left[T]]=[-1*l,0];for(T=0,A=y.right.length;T<A;T++)h[y.right[T]]=[l,0];for(T=0,A=y.down.length;T<A;T++)h[y.down[T]]=[0,l];for(T=0,A=y.up.length;T<A;T++)h[y.up[T]]=[0,-1*l]},_setZoomDelta:function(l){var h=this._zoomKeys={},y=this.keyCodes,T,A;for(T=0,A=y.zoomIn.length;T<A;T++)h[y.zoomIn[T]]=l;for(T=0,A=y.zoomOut.length;T<A;T++)h[y.zoomOut[T]]=-l},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var h=l.keyCode,y=this._map,T;if(h in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(T=this._panKeys[h],l.shiftKey&&(T=Ce(T).multiplyBy(3)),y.options.maxBounds&&(T=y._limitOffset(Ce(T),y.options.maxBounds)),y.options.worldCopyJump){var A=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(T)));y.panTo(A)}else y.panBy(T)}else if(h in this._zoomKeys)y.setZoom(y.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;$r(l)}}});bt.addInitHook("addHandler","keyboard",Vh),bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Oc=_r.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var h=ui(l),y=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var T=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),T),$r(l)},_performZoom:function(){var l=this._map,h=l.getZoom(),y=this._map.options.zoomSnap||0;l._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,M=y?Math.ceil(A/y)*y:A,Q=l._limitZoom(h+(this._delta>0?M:-M))-h;this._delta=0,this._startTime=null,Q&&(l.options.scrollWheelZoom==="center"?l.setZoom(h+Q):l.setZoomAround(this._lastMousePos,h+Q))}});bt.addInitHook("addHandler","scrollWheelZoom",Oc);var so=600;bt.mergeOptions({tapHold:Ge.touchNative&&Ge.safari&&Ge.mobile,tapTolerance:15});var Ku=_r.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var h=l.touches[0];this._startPos=this._newPos=new se(h.clientX,h.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(lt(document,"touchend",Rn),lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),so),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Yt(document,"touchend",Rn),Yt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Yt(document,"touchend touchcancel contextmenu",this._cancel,this),Yt(document,"touchmove",this._onMove,this)},_onMove:function(l){var h=l.touches[0];this._newPos=new se(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,h){var y=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});y._simulated=!0,h.target.dispatchEvent(y)}});bt.addInitHook("addHandler","tapHold",Ku),bt.mergeOptions({touchZoom:Ge.touch,bounceAtZoomLimits:!0});var Uh=_r.extend({addHooks:function(){Ye(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ln(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var h=this._map;if(!(!l.touches||l.touches.length!==2||h._animatingZoom||this._zooming)){var y=h.mouseEventToContainerPoint(l.touches[0]),T=h.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(y.add(T)._divideBy(2))),this._startDist=y.distanceTo(T),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),Rn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var h=this._map,y=h.mouseEventToContainerPoint(l.touches[0]),T=h.mouseEventToContainerPoint(l.touches[1]),A=y.distanceTo(T)/this._startDist;if(this._zoom=h.getScaleZoom(A,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&A<1||this._zoom>h.getMaxZoom()&&A>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var M=y._add(T)._divideBy(2)._subtract(this._centerPoint);if(A===1&&M.x===0&&M.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var Q=c(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=q(Q,this,!0),Rn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});bt.addInitHook("addHandler","touchZoom",Uh),bt.BoxZoom=tr,bt.DoubleClickZoom=Wu,bt.Drag=Cs,bt.Keyboard=Vh,bt.ScrollWheelZoom=Oc,bt.TapHold=Ku,bt.TouchZoom=Uh,t.Bounds=K,t.Browser=Ge,t.CRS=Fe,t.Canvas=Gu,t.Circle=Bu,t.CircleMarker=sl,t.Class=Re,t.Control=xi,t.DivIcon=rm,t.DivOverlay=Ii,t.DomEvent=bs,t.DomUtil=ua,t.Draggable=es,t.Evented=le,t.FeatureGroup=Es,t.GeoJSON=Gs,t.GridLayer=ul,t.Handler=_r,t.Icon=Ts,t.ImageOverlay=ll,t.LatLng=ye,t.LatLngBounds=we,t.Layer=ns,t.LayerGroup=rl,t.LineUtil=Or,t.Map=bt,t.Marker=Sc,t.Mixin=Vu,t.Path=Ss,t.Point=se,t.PolyUtil=fa,t.Polygon=al,t.Polyline=Ys,t.Popup=Ic,t.PosAnimation=Fs,t.Projection=ts,t.Rectangle=ro,t.Renderer=er,t.SVG=dl,t.SVGOverlay=Yu,t.TileLayer=_a,t.Tooltip=Nc,t.Transformation=qt,t.Util=H,t.VideoOverlay=ga,t.bind=c,t.bounds=fe,t.canvas=Rc,t.circle=em,t.circleMarker=Jp,t.control=Ji,t.divIcon=zy,t.extend=r,t.featureGroup=Qp,t.geoJSON=qu,t.geoJson=Ac,t.gridLayer=sm,t.icon=bc,t.imageOverlay=tm,t.latLng=be,t.latLngBounds=$,t.layerGroup=jy,t.map=ha,t.marker=Xp,t.point=Ce,t.polygon=Uy,t.polyline=Vy,t.popup=im,t.rectangle=Fy,t.setOptions=O,t.stamp=p,t.svg=Pc,t.svgOverlay=nm,t.tileLayer=kr,t.tooltip=By,t.transformation=Wt,t.version=n,t.videoOverlay=cl;var Bh=window.L;t.noConflict=function(){return window.L=Bh,this},window.L=t}))})(Gf,Gf.exports)),Gf.exports}var Lh=mY();const gY=F_(Lh);function ky(i,e,t){return Object.freeze({instance:i,context:e,container:t})}function Ly(i,e){return e==null?function(n,r){const a=P.useRef(void 0);return a.current||(a.current=i(n,r)),a}:function(n,r){const a=P.useRef(void 0);a.current||(a.current=i(n,r));const c=P.useRef(n),{instance:d}=a.current;return P.useEffect(function(){c.current!==n&&(e(d,n,c.current),c.current=n)},[d,n,e]),a}}function _Y(i,e){P.useEffect(function(){return(e.layerContainer??e.map).addLayer(i.instance),function(){e.layerContainer?.removeLayer(i.instance),e.map.removeLayer(i.instance)}},[e,i])}function eM(i){return function(t){const n=GE(),r=i(WE(t,n),n);return QO(n.map,t.attribution),JO(r.current,t.eventHandlers),_Y(r.current,n),r}}function yY(i){function e(r,a){return ky(i(r),a)}const t=Ly(e),n=hY(t);return XO(n)}function vY(i,e){const t=Ly(i,e),n=eM(t);return uY(n)}function wY(i,e){const t=Ly(i),n=fY(t,e);return dY(n)}function bY(i,e){const t=Ly(i,e),n=eM(t);return XO(n)}function EY(i,e,t){const{opacity:n,zIndex:r}=e;n!=null&&n!==t.opacity&&i.setOpacity(n),r!=null&&r!==t.zIndex&&i.setZIndex(r)}function TY({bounds:i,boundsOptions:e,center:t,children:n,className:r,id:a,placeholder:c,style:d,whenReady:p,zoom:m,...w},b){const[S]=P.useState({className:r,id:a,style:d}),[C,N]=P.useState(null),O=P.useRef(void 0);P.useImperativeHandle(b,()=>C?.map??null,[C]);const R=P.useCallback(G=>{if(G!==null&&!O.current){const Z=new Lh.Map(G,w);O.current=Z,t!=null&&m!=null?Z.setView(t,m):i!=null&&Z.fitBounds(i,e),p!=null&&Z.whenReady(p),N(lY(Z))}},[]);P.useEffect(()=>()=>{C?.map.remove()},[C]);const k=C?te.createElement(YE,{value:C},n):c??null;return te.createElement("div",{...S,ref:R},k)}const SY=P.forwardRef(TY),xY=vY(function({position:e,...t},n){const r=new Lh.Marker(e,t);return ky(r,cY(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==n.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==n.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),CY=wY(function(e,t){const n=new Lh.Popup(e,t.overlayContainer);return ky(n,t)},function(e,t,{position:n},r){P.useEffect(function(){const{instance:c}=e;function d(m){m.popup===c&&(c.update(),r(!0))}function p(m){m.popup===c&&r(!1)}return t.map.on({popupopen:d,popupclose:p}),t.overlayContainer==null?(n!=null&&c.setLatLng(n),c.openOn(t.map)):t.overlayContainer.bindPopup(c),function(){t.map.off({popupopen:d,popupclose:p}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(c)}},[e,t,r,n])}),AY=bY(function({url:e,...t},n){const r=new Lh.TileLayer(e,WE(t,n));return ky(r,n)},function(e,t,n){EY(e,t,n);const{url:r}=t;r!=null&&r!==n.url&&e.setUrl(r)}),IY=yY(function(e){return new Lh.Control.Zoom(e)}),NY=gY.divIcon({className:"custom-marker",html:'<div class="marker-pin"></div>',iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),DY=()=>{const[i,e]=P.useState(""),t=[{id:1,title:"CENTRAL PARK ENCOUNTER",description:"Saw you near the Bethesda Fountain. You had a red scarf and were reading a book. We made eye contact for a split second.",time:"2 hours ago",location:"New York, NY",coords:[40.7739,-73.9713]},{id:2,title:"SUBWAY SMILE",description:"Line 1 heading downtown. You got off at Times Square. I was wearing the green jacket. You smiled as the doors closed.",time:"5 hours ago",location:"New York, NY",coords:[40.7589,-73.9851]},{id:3,title:"COFFEE SHOP SPARK",description:"Blue Bottle Coffee on 9th Ave. We both reached for the oat milk at the same time. I wish I had said something more than just 'sorry'.",time:"Yesterday",location:"New York, NY",coords:[40.7484,-74.0051]},{id:4,title:"SOHO STROLL",description:"Walking down Prince St. You were walking a golden retriever. We bumped shoulders. You have amazing eyes.",time:"2 days ago",location:"New York, NY",coords:[40.7247,-73.9995]}];return _.jsxs("div",{className:"connection-map-mockup",children:[_.jsx("div",{className:"search-container",children:_.jsxs("div",{className:"search-bar",children:[_.jsx("span",{className:"search-icon",children:"??"}),_.jsx("input",{type:"text",className:"search-input",placeholder:"Search locations or connections...",value:i,onChange:n=>e(n.target.value)})]})}),_.jsx("div",{className:"map-underlay",children:_.jsxs(SY,{center:[40.7589,-73.9851],zoom:13,zoomControl:!1,style:{height:"100%",width:"100%"},children:[_.jsx(AY,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:" CARTO"}),t.map(n=>_.jsx(xY,{position:n.coords,icon:NY,children:_.jsx(CY,{className:"figma-popup",children:_.jsxs("div",{style:{minWidth:"200px"},children:[_.jsx("h3",{style:{margin:"0 0 8px",color:"#FE2C55",fontSize:"16px"},children:n.title}),_.jsx("p",{style:{margin:0,fontSize:"13px",color:"#121214"},children:n.description})]})})},n.id)),_.jsx(IY,{position:"topright"})]})}),_.jsx("button",{className:"fab-add",onClick:()=>alert("Add Connection Flow"),children:"+"}),_.jsx("div",{className:"connection-cards-overlay",children:_.jsx("div",{className:"cards-scroller",children:t.map(n=>_.jsxs("div",{className:"connection-card",children:[_.jsxs("div",{className:"card-header",children:[_.jsx("span",{className:"card-title",children:n.title}),_.jsx("span",{className:"card-time",children:n.time})]}),_.jsx("p",{className:"card-description",children:n.description}),_.jsxs("div",{className:"card-footer",children:[_.jsx("span",{className:"location-pill",children:n.location}),_.jsx("span",{children:""}),_.jsx("span",{children:n.time})]})]},n.id))})}),_.jsx(ac,{})]})},RY="/assets/hero-woman-bluebg-D6bOtoVy.svg",PY="/assets/paulina-BEpK_suE.svg",OY=()=>{const i=Hi(),[e,t]=te.useState(!1);return _.jsxs("div",{className:"about-page",children:[_.jsx(mu,{isOpen:e,onClose:()=>t(!1)}),_.jsxs("button",{className:"hamburger-btn-static",onClick:()=>t(!0),children:[_.jsx("div",{className:"hamburger-line"}),_.jsx("div",{className:"hamburger-line"}),_.jsx("div",{className:"hamburger-line"})]}),_.jsx("button",{className:"about-back-btn",onClick:()=>i(-1),children:"?"}),_.jsxs("header",{className:"about-hero",style:{backgroundImage:`url(${Y_})`},children:[_.jsx("div",{className:"about-hero-halftone"}),_.jsxs("div",{className:"about-hero-content",children:[_.jsxs("div",{className:"about-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"about-heart-logo"}),_.jsx("h1",{className:"about-title",children:"ABOUT US"})]}),_.jsx("p",{className:"about-subtitle",children:"Have you ever crossed paths with someone special but missed the chance to connect? We believe in second chances!"})]})]}),_.jsxs("div",{className:"founders-section",children:[_.jsxs("div",{className:"founder-card",children:[_.jsxs("div",{className:"founder-image-wrap",children:[_.jsx("div",{className:"speech-bubble bubble-left",children:"HOWDY!"}),_.jsx("img",{src:RY,alt:"Michele Nieves",className:"founder-img"})]}),_.jsx("div",{className:"founder-name-wrap",children:_.jsx("h2",{className:"founder-name",children:"MICHELE NIEVES"})}),_.jsx("p",{className:"founder-bio",children:"Born and raised in Brooklyn, NY, Michele Nieves is an accomplished Audio Visual Technician, V1, Video Engineer, and Production Manager, with experience on major projects like the MTV VMAs, national comedy tours, and global music festivals. Also a graphic designer and entrepreneur, she's crafted campaigns for top fashion brands like Calvin Klein, DKNY to name a few, blending technical expertise with creativity. Inspired by her passion for connection, Michele created Miss Me Connection to bridge the gap between people who missed their moment."})]}),_.jsxs("div",{className:"founder-card",children:[_.jsxs("div",{className:"founder-image-wrap",children:[_.jsx("div",{className:"speech-bubble bubble-right",children:"Follow us!"}),_.jsx("img",{src:PY,alt:"Paulina Kucharski",className:"founder-img"})]}),_.jsx("div",{className:"founder-name-wrap",children:_.jsx("h2",{className:"founder-name",children:"PAULINA KUCHARSKI"})}),_.jsx("p",{className:"founder-bio",children:"A Chicago native, Paulina Kucharski is an accomplished Producer and documentary filmmaker with a rich background in the film and television industry. Her work spans a variety of acclaimed projects, blending creative storytelling with sharp production expertise. Passionate about exploring human connections and untold narratives, Paulina has brought powerful stories to life on screen. Now, as a producer of the Miss Me Connection platform, Paulina applies her talents to help others turn missed encounters into meaningful connections."})]})]})]})},MY=()=>{const i=Hi(),[e,t]=te.useState(!1),n=[{number:1,question:"What is Miss ME Connection?",answer:"Miss ME Connection is a platform where you can post or discover real-life missed connection stories. Whether you locked eyes with someone on the train or had a brief but unforgettable exchange at a coffee shop. The platform is free to browse, post, and reply, giving everyone a second chance to reconnect without barriers."},{number:2,question:"How do I post a missed connection?",answer:"Simply create a profile, then click + to Add a Missed Connection. The platform will guide you to pinpoint the location of the moment. Add as many details as you remember: location, time, what happened, and any unique traits about the person or moment. The more details, the better your chances of being found!"},{number:3,question:"Is Miss ME Connection a dating site?",answer:"Not exactly. While some missed connections might lead to romance, Miss ME Connection is about rediscovering any meaningful momentromantic, platonic, or just plain curious. It's a celebration of serendipity, where chance encounters get a second chance. Its about connection, not swiping."},{number:4,question:"Is my information private on Miss ME Connection?",answer:"Yes! We value your privacy and safety. We keep it simple and only ask for a first name, email address, and your postal code. Only the details you choose to include in your post are visible to other users. Your contact info is never shared publicly, and messaging happens securely within the platform. Unlike traditional dating sites, we don't ask for detailed personal info because we believe in real-world stories, not overly curated profiles."},{number:5,question:"How Does MISS ME CONNECTION KEEP USERS SAFE?",answer:_.jsxs(_.Fragment,{children:["We require all users to create profiles and follow community guidelines. Inappropriate behavior or spam is not tolerated. You can email us at the address below with any concerns.",_.jsx("br",{}),_.jsx("a",{href:"mailto:support@missmeconnection.com",className:"faq-link",children:"support@missmeconnection.com"})]})},{number:6,question:"What should I do if I recognize myself in someone elses post?",answer:"If you think a post is about you, you can respond safely through our platform's messaging system. Please be respectful and thoughtfulafter all, someone took a chance to find you!"},{number:7,question:"Who can I contact if I need help or have an issue?",answer:_.jsxs(_.Fragment,{children:["Our support team is here to help! You can reach us directly by emailing us at support@missmeconnection.com for assistance with anything from technical issues to platform concerns or community guideline violations.",_.jsx("br",{}),_.jsx("a",{href:"mailto:support@missmeconnection.com",className:"faq-link",children:"support@missmeconnection.com"})]})}];return _.jsxs("div",{className:"faq-page",children:[_.jsx(mu,{isOpen:e,onClose:()=>t(!1)}),_.jsxs("button",{className:"hamburger-btn-static",onClick:()=>t(!0),children:[_.jsx("div",{className:"hamburger-line"}),_.jsx("div",{className:"hamburger-line"}),_.jsx("div",{className:"hamburger-line"})]}),_.jsx("button",{className:"faq-back-btn",onClick:()=>i(-1),children:"?"}),_.jsxs("header",{className:"faq-hero",style:{backgroundImage:`url(${Y_})`},children:[_.jsx("div",{className:"faq-hero-halftone"}),_.jsxs("div",{className:"faq-hero-content",children:[_.jsxs("div",{className:"faq-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"faq-heart-logo"}),_.jsx("h1",{className:"faq-title",children:"FAQS"})]}),_.jsx("p",{className:"faq-subtitle",children:"Some common questions and answers below."})]})]}),_.jsxs("div",{className:"faq-content",children:[_.jsx("h1",{className:"faq-content-title",children:"FAQs"}),n.map(r=>_.jsxs("div",{className:"faq-item",children:[_.jsxs("h2",{className:"faq-question",children:[r.number," - ",r.question]}),_.jsx("div",{className:"faq-answer",children:r.answer})]},r.number))]})]})},kY=()=>{const i=Hi();return _.jsxs("div",{className:"static-page-container",children:[_.jsxs("header",{className:"static-header",children:[_.jsx("button",{className:"static-back-btn",onClick:()=>i(-1),children:"?"}),_.jsxs("div",{className:"static-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"static-heart-logo"}),_.jsx("h1",{className:"static-title",children:"HELP & SUPPORT"})]})]}),_.jsxs("div",{className:"static-content",children:[_.jsxs("section",{className:"static-section text-center",children:[_.jsx("h2",{className:"mm-heading",children:"Get in Touch"}),_.jsx("p",{children:"Have a question, feedback, or a technical issue? We're here to help. Reach out to our support team and we'll get back to you as soon as possible."}),_.jsx("div",{className:"support-cta",children:_.jsx("a",{href:"mailto:MissMe@missmeconnection.com",className:"support-email-link",children:"MissMe@missmeconnection.com"})})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"Common Issues"}),_.jsxs("ul",{className:"support-list",children:[_.jsx("li",{children:"Forgotten password? Use the reset link on the login page."}),_.jsx("li",{children:"Incorrect pin location? You can edit your pins from your Account page."}),_.jsx("li",{children:'Reporting abuse? Click the "Report" button on any connection pin.'})]})]})]})]})},LY=()=>{const i=Hi();return _.jsxs("div",{className:"static-page-container",children:[_.jsxs("header",{className:"static-header",children:[_.jsx("button",{className:"static-back-btn",onClick:()=>i(-1),children:"?"}),_.jsxs("div",{className:"static-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"static-heart-logo"}),_.jsx("h1",{className:"static-title",children:"TERMS & CONDITIONS"})]})]}),_.jsxs("div",{className:"static-content",children:[_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"1. Acceptance of Terms"}),_.jsx("p",{children:"By accessing and using Miss Me Connection, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions."})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"2. Content Ownership"}),_.jsx("p",{children:"You retain ownership of any content you post to the platform. However, by posting, you grant Miss Me Connection a non-exclusive, worldwide, royalty-free license to display and distribute that content."})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"3. Prohibited Conduct"}),_.jsx("p",{children:'Users are prohibited from posting content that is harassing, illegal, or reveals the private information of others ("doxxing"). Respect and safety are our core values.'})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"4. Liability"}),_.jsx("p",{children:'Miss Me Connection is provided "as-is" without any warranties. Users assume all risks associated with using the platform and meeting individuals through the connections made here.'})]})]})]})},jY=()=>{const i=Hi();return _.jsxs("div",{className:"static-page-container",children:[_.jsxs("header",{className:"static-header",children:[_.jsx("button",{className:"static-back-btn",onClick:()=>i(-1),children:"?"}),_.jsxs("div",{className:"static-logo-group",onClick:()=>i("/"),children:[_.jsx("img",{src:xr,alt:"Logo",className:"static-heart-logo"}),_.jsx("h1",{className:"static-title",children:"PRIVACY POLICY"})]})]}),_.jsxs("div",{className:"static-content",children:[_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"1. Information We Collect"}),_.jsx("p",{children:"We collect your email address for account management, location data associated with pins you drop, and basic usage data to improve the service."})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"2. How We Use Information"}),_.jsx("p",{children:"Your information is used solely to facilitate connections on the map, manage your account, and enhance the overall user experience."})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"3. Information Sharing"}),_.jsx("p",{children:'We do not sell your personal data. Your location is shared on the map only as part of your public "missed connection" pins.'})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"4. Data Security"}),_.jsx("p",{children:"We utilize industry-standard encryption to protect your data and ensure that your private information remains private."})]}),_.jsxs("section",{className:"static-section",children:[_.jsx("h2",{className:"mm-heading",children:"5. Childrens Privacy"}),_.jsx("p",{children:"Miss Me Connection is intended for users 18 years of age and older. We do not knowingly collect information from children under 18."})]})]})]})};var cb;(function(i){i.Dark="DARK",i.Light="LIGHT",i.Default="DEFAULT"})(cb||(cb={}));var w1;(function(i){i.None="NONE",i.Slide="SLIDE",i.Fade="FADE"})(w1||(w1={}));const b1=vh("StatusBar"),VY=vh("SplashScreen",{web:()=>SE(()=>import("./web-CVK_7g6z.js"),[]).then(i=>new i.SplashScreenWeb)}),ql=vh("PushNotifications",{}),UY=async()=>{if(!gu.isNativePlatform())return console.log("?? Notifications: Skip (Web platform)"),!1;try{let i=await ql.checkPermissions();return i.receive==="prompt"&&(i=await ql.requestPermissions()),i.receive!=="granted"?(console.warn("?? Notifications: Permission denied"),!1):(await ql.register(),console.log("?? Notifications: Registered for push"),BY(),!0)}catch(i){return console.error("?? Notifications: Registration failed",i),gt.trackError(i,{source:"push_registration"}),!1}},BY=async()=>{await ql.removeAllListeners(),ql.addListener("registration",i=>{console.log("?? Push Token:",i.value)}),ql.addListener("registrationError",i=>{console.error("?? Push Registration Error:",i)}),ql.addListener("pushNotificationReceived",i=>{console.log("?? Push Received:",i)}),ql.addListener("pushNotificationActionPerformed",i=>{console.log("?? Push Action:",i.actionId,i.notification)})};function zY(){return P.useEffect(()=>{(async()=>{if(gu.isNativePlatform())try{await b1.setStyle({style:cb.Dark}),await b1.setBackgroundColor({color:"#1a1a1b"}),await UY(),await VY.hide()}catch(e){console.warn("Capacitor plugin failed to init:",e)}})()},[]),_.jsx(f9,{children:_.jsx(K2,{children:_.jsx("div",{className:"app-container",children:_.jsxs(S2,{children:[_.jsx(rr,{path:"/",element:_.jsx(aC,{})}),_.jsx(rr,{path:"/map",element:_.jsx(J7,{})}),_.jsx(rr,{path:"/browse/:id",element:_.jsx(nY,{})}),_.jsx(rr,{path:"/browse",element:_.jsx(eY,{})}),_.jsx(rr,{path:"/messages",element:_.jsx(iY,{})}),_.jsx(rr,{path:"/account",element:_.jsx(rY,{})}),_.jsx(rr,{path:"/login",element:_.jsx(sY,{})}),_.jsx(rr,{path:"/admin",element:_.jsx(aY,{})}),_.jsx(rr,{path:"/mockup",element:_.jsx(DY,{})}),_.jsx(rr,{path:"/about",element:_.jsx(OY,{})}),_.jsx(rr,{path:"/faq",element:_.jsx(MY,{})}),_.jsx(rr,{path:"/support",element:_.jsx(kY,{})}),_.jsx(rr,{path:"/terms",element:_.jsx(LY,{})}),_.jsx(rr,{path:"/privacy",element:_.jsx(jY,{})}),_.jsx(rr,{path:"*",element:_.jsx(aC,{})})]})})})})}class FY extends te.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){gt.trackError(e,{source:"ErrorBoundary",componentStack:t.componentStack?.split(`
